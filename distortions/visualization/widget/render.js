var rp=Object.create;var Ga=Object.defineProperty;var np=Object.getOwnPropertyDescriptor;var ip=Object.getOwnPropertyNames;var op=Object.getPrototypeOf,ap=Object.prototype.hasOwnProperty;var Za=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var up=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ip(t))!ap.call(e,i)&&i!==r&&Ga(e,i,{get:()=>t[i],enumerable:!(n=np(t,i))||n.enumerable});return e};var Mi=(e,t,r)=>(r=e!=null?rp(op(e)):{},up(t||!e||!e.__esModule?Ga(r,"default",{value:e,enumerable:!0}):r,e));var lf=Za((ei,cf)=>{(function(e,t){typeof ei=="object"&&typeof cf<"u"?t(ei):typeof define=="function"&&define.amd?define(["exports"],t):t((e=typeof globalThis<"u"?globalThis:e||self).SVDJS={})})(ei,function(e){"use strict";e.SVD=function(t,r,n,i,o){if(r=r===void 0||r,n=n===void 0||n,o=1e-64/(i=i||Math.pow(2,-52)),!t)throw new TypeError("Matrix a is not defined");var a,u,f,s,c,l,p,m,d,h,v,y,A=t[0].length,g=t.length;if(g<A)throw new TypeError("Invalid matrix: m < n");for(var E=[],D=[],w=[],_=r==="f"?g:A,x=h=p=0;x<g;x++)D[x]=new Array(_).fill(0);for(x=0;x<A;x++)w[x]=new Array(A).fill(0);var S,b=new Array(A).fill(0);for(x=0;x<g;x++)for(a=0;a<A;a++)D[x][a]=t[x][a];for(x=0;x<A;x++){for(E[x]=p,d=0,f=x+1,a=x;a<g;a++)d+=Math.pow(D[a][x],2);if(d<o)p=0;else for(m=(l=D[x][x])*(p=l<0?Math.sqrt(d):-Math.sqrt(d))-d,D[x][x]=l-p,a=f;a<A;a++){for(d=0,u=x;u<g;u++)d+=D[u][x]*D[u][a];for(l=d/m,u=x;u<g;u++)D[u][a]=D[u][a]+l*D[u][x]}for(b[x]=p,d=0,a=f;a<A;a++)d+=Math.pow(D[x][a],2);if(d<o)p=0;else{for(m=(l=D[x][x+1])*(p=l<0?Math.sqrt(d):-Math.sqrt(d))-d,D[x][x+1]=l-p,a=f;a<A;a++)E[a]=D[x][a]/m;for(a=f;a<g;a++){for(d=0,u=f;u<A;u++)d+=D[a][u]*D[x][u];for(u=f;u<A;u++)D[a][u]=D[a][u]+d*E[u]}}h<(v=Math.abs(b[x])+Math.abs(E[x]))&&(h=v)}if(n)for(x=A-1;0<=x;x--){if(p!==0){for(m=D[x][x+1]*p,a=f;a<A;a++)w[a][x]=D[x][a]/m;for(a=f;a<A;a++){for(d=0,u=f;u<A;u++)d+=D[x][u]*w[u][a];for(u=f;u<A;u++)w[u][a]=w[u][a]+d*w[u][x]}}for(a=f;a<A;a++)w[x][a]=0,w[a][x]=0;w[x][x]=1,p=E[x],f=x}if(r){if(r==="f")for(x=A;x<g;x++){for(a=A;a<g;a++)D[x][a]=0;D[x][x]=1}for(x=A-1;0<=x;x--){for(f=x+1,p=b[x],a=f;a<_;a++)D[x][a]=0;if(p!==0){for(m=D[x][x]*p,a=f;a<_;a++){for(d=0,u=f;u<g;u++)d+=D[u][x]*D[u][a];for(l=d/m,u=x;u<g;u++)D[u][a]=D[u][a]+l*D[u][x]}for(a=x;a<g;a++)D[a][x]=D[a][x]/p}else for(a=x;a<g;a++)D[a][x]=0;D[x][x]=D[x][x]+1}}for(i*=h,u=A-1;0<=u;u--)for(var C=0;C<50;C++){for(S=!1,f=u;0<=f;f--){if(Math.abs(E[f])<=i){S=!0;break}if(Math.abs(b[f-1])<=i)break}if(!S){for(c=0,s=f-(d=1),x=f;x<u+1&&(l=d*E[x],E[x]=c*E[x],!(Math.abs(l)<=i));x++)if(p=b[x],b[x]=Math.sqrt(l*l+p*p),c=p/(m=b[x]),d=-l/m,r)for(a=0;a<g;a++)v=D[a][s],y=D[a][x],D[a][s]=v*c+y*d,D[a][x]=-v*d+y*c}if(y=b[u],f===u){if(y<0&&(b[u]=-y,n))for(a=0;a<A;a++)w[a][u]=-w[a][u];break}for(h=b[f],l=(((v=b[u-1])-y)*(v+y)+((p=E[u-1])-(m=E[u]))*(p+m))/(2*m*v),p=Math.sqrt(l*l+1),l=((h-y)*(h+y)+m*(v/(l<0?l-p:l+p)-m))/h,x=f+(d=c=1);x<u+1;x++){if(p=E[x],v=b[x],m=d*p,p*=c,y=Math.sqrt(l*l+m*m),l=h*(c=l/(E[x-1]=y))+p*(d=m/y),p=-h*d+p*c,m=v*d,v*=c,n)for(a=0;a<A;a++)h=w[a][x-1],y=w[a][x],w[a][x-1]=h*c+y*d,w[a][x]=-h*d+y*c;if(y=Math.sqrt(l*l+m*m),l=(c=l/(b[x-1]=y))*p+(d=m/y)*v,h=-d*p+c*v,r)for(a=0;a<g;a++)v=D[a][x-1],y=D[a][x],D[a][x-1]=v*c+y*d,D[a][x]=-v*d+y*c}E[f]=0,E[u]=l,b[u]=h}for(x=0;x<A;x++)b[x]<i&&(b[x]=0);return{u:D,q:b,v:w}},e.VERSION="1.1.1",Object.defineProperty(e,"__esModule",{value:!0})})});var No=Za((So,Mo)=>{(function(e,t){typeof So=="object"&&typeof Mo<"u"?Mo.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self,e["'typed'"]=t())})(So,function(){"use strict";function e(){return!0}function t(){return!1}function r(){}let n="Argument is not a typed-function.";function i(){function a(F){return typeof F=="object"&&F!==null&&F.constructor===Object}let u=[{name:"number",test:function(F){return typeof F=="number"}},{name:"string",test:function(F){return typeof F=="string"}},{name:"boolean",test:function(F){return typeof F=="boolean"}},{name:"Function",test:function(F){return typeof F=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(F){return F instanceof Date}},{name:"RegExp",test:function(F){return F instanceof RegExp}},{name:"Object",test:a},{name:"null",test:function(F){return F===null}},{name:"undefined",test:function(F){return F===void 0}}],f={name:"any",test:e,isAny:!0},s,c,l=0,p={createCount:0};function m(F){let M=s.get(F);if(M)return M;let B='Unknown type "'+F+'"',z=F.toLowerCase(),q;for(q of c)if(q.toLowerCase()===z){B+='. Did you mean "'+q+'" ?';break}throw new TypeError(B)}function d(F){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",B=M?m(M).index:c.length,z=[];for(let P=0;P<F.length;++P){if(!F[P]||typeof F[P].name!="string"||typeof F[P].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");let X=F[P].name;if(s.has(X))throw new TypeError('Duplicate type name "'+X+'"');z.push(X),s.set(X,{name:X,test:F[P].test,isAny:F[P].isAny,index:B+P,conversionsTo:[]})}let q=c.slice(B);c=c.slice(0,B).concat(z).concat(q);for(let P=B+z.length;P<c.length;++P)s.get(c[P]).index=P}function h(){s=new Map,c=[],l=0,d([f],!1)}h(),d(u);function v(){let F;for(F of c)s.get(F).conversionsTo=[];l=0}function y(F){let M=c.filter(B=>{let z=s.get(B);return!z.isAny&&z.test(F)});return M.length?M:["any"]}function A(F){return F&&typeof F=="function"&&"_typedFunctionData"in F}function g(F,M,B){if(!A(F))throw new TypeError(n);let z=B&&B.exact,q=Array.isArray(M)?M.join(","):M,P=b(q),X=w(P);if(!z||X in F.signatures){let ge=F._typedFunctionData.signatureMap.get(X);if(ge)return ge}let H=P.length,Y;if(z){Y=[];let ge;for(ge in F.signatures)Y.push(F._typedFunctionData.signatureMap.get(ge))}else Y=F._typedFunctionData.signatures;for(let ge=0;ge<H;++ge){let we=P[ge],Oe=[],et;for(et of Y){let Ke=O(et.params,ge);if(!(!Ke||we.restParam&&!Ke.restParam)){if(!Ke.hasAny){let gt=S(Ke);if(we.types.some(vt=>!gt.has(vt.name)))continue}Oe.push(et)}}if(Y=Oe,Y.length===0)break}let U;for(U of Y)if(U.params.length<=H)return U;throw new TypeError("Signature not found (signature: "+(F.name||"unnamed")+"("+w(P,", ")+"))")}function E(F,M,B){return g(F,M,B).implementation}function D(F,M){let B=m(M);if(B.test(F))return F;let z=B.conversionsTo;if(z.length===0)throw new Error("There are no conversions to "+M+" defined.");for(let q=0;q<z.length;q++)if(m(z[q].from).test(F))return z[q].convert(F);throw new Error("Cannot convert "+F+" to "+M)}function w(F){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return F.map(B=>B.name).join(M)}function _(F){let M=F.indexOf("...")===0,z=(M?F.length>3?F.slice(3):"any":F).split("|").map(H=>m(H.trim())),q=!1,P=M?"...":"";return{types:z.map(function(H){return q=H.isAny||q,P+=H.name+"|",{name:H.name,typeIndex:H.index,test:H.test,isAny:H.isAny,conversion:null,conversionIndex:-1}}),name:P.slice(0,-1),hasAny:q,hasConversion:!1,restParam:M}}function x(F){let M=F.types.map(X=>X.name),B=fe(M),z=F.hasAny,q=F.name,P=B.map(function(X){let H=m(X.from);return z=H.isAny||z,q+="|"+X.from,{name:X.from,typeIndex:H.index,test:H.test,isAny:H.isAny,conversion:X,conversionIndex:X.index}});return{types:F.types.concat(P),name:q,hasAny:z,hasConversion:P.length>0,restParam:F.restParam}}function S(F){return F.typeSet||(F.typeSet=new Set,F.types.forEach(M=>F.typeSet.add(M.name))),F.typeSet}function b(F){let M=[];if(typeof F!="string")throw new TypeError("Signatures must be strings");let B=F.trim();if(B==="")return M;let z=B.split(",");for(let q=0;q<z.length;++q){let P=_(z[q].trim());if(P.restParam&&q!==z.length-1)throw new SyntaxError('Unexpected rest parameter "'+z[q]+'": only allowed for the last parameter');if(P.types.length===0)return null;M.push(P)}return M}function C(F){let M=ke(F);return M?M.restParam:!1}function T(F){if(!F||F.types.length===0)return e;if(F.types.length===1)return m(F.types[0].name).test;if(F.types.length===2){let M=m(F.types[0].name).test,B=m(F.types[1].name).test;return function(q){return M(q)||B(q)}}else{let M=F.types.map(function(B){return m(B.name).test});return function(z){for(let q=0;q<M.length;q++)if(M[q](z))return!0;return!1}}}function k(F){let M,B,z;if(C(F)){M=Be(F).map(T);let q=M.length,P=T(ke(F)),X=function(H){for(let Y=q;Y<H.length;Y++)if(!P(H[Y]))return!1;return!0};return function(Y){for(let U=0;U<M.length;U++)if(!M[U](Y[U]))return!1;return X(Y)&&Y.length>=q+1}}else return F.length===0?function(P){return P.length===0}:F.length===1?(B=T(F[0]),function(P){return B(P[0])&&P.length===1}):F.length===2?(B=T(F[0]),z=T(F[1]),function(P){return B(P[0])&&z(P[1])&&P.length===2}):(M=F.map(T),function(P){for(let X=0;X<M.length;X++)if(!M[X](P[X]))return!1;return P.length===M.length})}function O(F,M){return M<F.length?F[M]:C(F)?ke(F):null}function L(F,M){let B=O(F,M);return B?S(B):new Set}function N(F){return F.conversion===null||F.conversion===void 0}function G(F,M){let B=new Set;return F.forEach(z=>{let q=L(z.params,M),P;for(P of q)B.add(P)}),B.has("any")?["any"]:Array.from(B)}function Z(F,M,B){let z,q,P=F||"unnamed",X=B,H;for(H=0;H<M.length;H++){let we=[];if(X.forEach(Oe=>{let et=O(Oe.params,H),Ke=T(et);(H<Oe.params.length||C(Oe.params))&&Ke(M[H])&&we.push(Oe)}),we.length===0){if(q=G(X,H),q.length>0){let Oe=y(M[H]);return z=new TypeError("Unexpected type of argument in function "+P+" (expected: "+q.join(" or ")+", actual: "+Oe.join(" | ")+", index: "+H+")"),z.data={category:"wrongType",fn:P,index:H,actual:Oe,expected:q},z}}else X=we}let Y=X.map(function(we){return C(we.params)?1/0:we.params.length});if(M.length<Math.min.apply(null,Y))return q=G(X,H),z=new TypeError("Too few arguments in function "+P+" (expected: "+q.join(" or ")+", index: "+M.length+")"),z.data={category:"tooFewArgs",fn:P,index:M.length,expected:q},z;let U=Math.max.apply(null,Y);if(M.length>U)return z=new TypeError("Too many arguments in function "+P+" (expected: "+U+", actual: "+M.length+")"),z.data={category:"tooManyArgs",fn:P,index:M.length,expectedLength:U},z;let ge=[];for(let we=0;we<M.length;++we)ge.push(y(M[we]).join("|"));return z=new TypeError('Arguments of type "'+ge.join(", ")+'" do not match any of the defined signatures of function '+P+"."),z.data={category:"mismatch",actual:ge},z}function $(F){let M=c.length+1;for(let B=0;B<F.types.length;B++)N(F.types[B])&&(M=Math.min(M,F.types[B].typeIndex));return M}function Q(F){let M=l+1;for(let B=0;B<F.types.length;B++)N(F.types[B])||(M=Math.min(M,F.types[B].conversionIndex));return M}function te(F,M){if(F.hasAny){if(!M.hasAny)return 1}else if(M.hasAny)return-1;if(F.restParam){if(!M.restParam)return 1}else if(M.restParam)return-1;if(F.hasConversion){if(!M.hasConversion)return 1}else if(M.hasConversion)return-1;let B=$(F)-$(M);if(B<0)return-1;if(B>0)return 1;let z=Q(F)-Q(M);return z<0?-1:z>0?1:0}function j(F,M){let B=F.params,z=M.params,q=ke(B),P=ke(z),X=C(B),H=C(z);if(X&&q.hasAny){if(!H||!P.hasAny)return 1}else if(H&&P.hasAny)return-1;let Y=0,U=0,ge;for(ge of B)ge.hasAny&&++Y,ge.hasConversion&&++U;let we=0,Oe=0;for(ge of z)ge.hasAny&&++we,ge.hasConversion&&++Oe;if(Y!==we)return Y-we;if(X&&q.hasConversion){if(!H||!P.hasConversion)return 1}else if(H&&P.hasConversion)return-1;if(U!==Oe)return U-Oe;if(X){if(!H)return 1}else if(H)return-1;let et=(B.length-z.length)*(X?-1:1);if(et!==0)return et;let Ke=[],gt=0;for(let ar=0;ar<B.length;++ar){let pn=te(B[ar],z[ar]);Ke.push(pn),gt+=pn}if(gt!==0)return gt;let vt;for(vt of Ke)if(vt!==0)return vt;return 0}function fe(F){if(F.length===0)return[];let M=F.map(m);F.length>1&&M.sort((q,P)=>q.index-P.index);let B=M[0].conversionsTo;if(F.length===1)return B;B=B.concat([]);let z=new Set(F);for(let q=1;q<M.length;++q){let P;for(P of M[q].conversionsTo)z.has(P.from)||(B.push(P),z.add(P.from))}return B}function Ee(F,M){let B=M;if(F.some(q=>q.hasConversion)){let q=C(F),P=F.map(ye);B=function(){let H=[],Y=q?arguments.length-1:arguments.length;for(let U=0;U<Y;U++)H[U]=P[U](arguments[U]);return q&&(H[Y]=arguments[Y].map(P[Y])),M.apply(this,H)}}let z=B;if(C(F)){let q=F.length-1;z=function(){return B.apply(this,ct(arguments,0,q).concat([ct(arguments,q)]))}}return z}function ye(F){let M,B,z,q,P=[],X=[];switch(F.types.forEach(function(H){H.conversion&&(P.push(m(H.conversion.from).test),X.push(H.conversion.convert))}),X.length){case 0:return function(Y){return Y};case 1:return M=P[0],z=X[0],function(Y){return M(Y)?z(Y):Y};case 2:return M=P[0],B=P[1],z=X[0],q=X[1],function(Y){return M(Y)?z(Y):B(Y)?q(Y):Y};default:return function(Y){for(let U=0;U<X.length;U++)if(P[U](Y))return X[U](Y);return Y}}}function ve(F){function M(B,z,q){if(z<B.length){let P=B[z],X=[];if(P.restParam){let H=P.types.filter(N);H.length<P.types.length&&X.push({types:H,name:"..."+H.map(Y=>Y.name).join("|"),hasAny:H.some(Y=>Y.isAny),hasConversion:!1,restParam:!0}),X.push(P)}else X=P.types.map(function(H){return{types:[H],name:H.name,hasAny:H.isAny,hasConversion:H.conversion,restParam:!1}});return _e(X,function(H){return M(B,z+1,q.concat([H]))})}else return[q]}return M(F,0,[])}function oe(F,M){let B=Math.max(F.length,M.length);for(let H=0;H<B;H++){let Y=L(F,H),U=L(M,H),ge=!1,we;for(we of U)if(Y.has(we)){ge=!0;break}if(!ge)return!1}let z=F.length,q=M.length,P=C(F),X=C(M);return P?X?z===q:q>=z:X?z>=q:z===q}function Te(F){return F.map(M=>$a(M)?La(M.referToSelf.callback):Ua(M)?ut(M.referTo.references,M.referTo.callback):M)}function Fe(F,M,B){let z=[],q;for(q of F){let P=B[q];if(typeof P!="number")throw new TypeError('No definition for referenced signature "'+q+'"');if(P=M[P],typeof P!="function")return!1;z.push(P)}return z}function he(F,M,B){let z=Te(F),q=new Array(z.length).fill(!1),P=!0;for(;P;){P=!1;let X=!0;for(let H=0;H<z.length;++H){if(q[H])continue;let Y=z[H];if($a(Y))z[H]=Y.referToSelf.callback(B),z[H].referToSelf=Y.referToSelf,q[H]=!0,X=!1;else if(Ua(Y)){let U=Fe(Y.referTo.references,z,M);U?(z[H]=Y.referTo.callback.apply(this,U),z[H].referTo=Y.referTo,q[H]=!0,X=!1):P=!0}}if(X&&P)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return z}function Qe(F){let M=/\bthis(\(|\.signatures\b)/;Object.keys(F).forEach(B=>{let z=F[B];if(M.test(z.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function Ie(F,M){if(p.createCount++,Object.keys(M).length===0)throw new SyntaxError("No signatures provided");p.warnAgainstDeprecatedThis&&Qe(M);let B=[],z=[],q={},P=[],X;for(X in M){if(!Object.prototype.hasOwnProperty.call(M,X))continue;let de=b(X);if(!de)continue;B.forEach(function(Br){if(oe(Br,de))throw new TypeError('Conflicting signatures "'+w(Br)+'" and "'+w(de)+'".')}),B.push(de);let tt=z.length;z.push(M[X]);let ep=de.map(x),hn;for(hn of ve(ep)){let Br=w(hn);P.push({params:hn,name:Br,fn:tt}),hn.every(tp=>!tp.hasConversion)&&(q[Br]=tt)}}P.sort(j);let H=he(z,q,Nr),Y;for(Y in q)Object.prototype.hasOwnProperty.call(q,Y)&&(q[Y]=H[q[Y]]);let U=[],ge=new Map;for(Y of P)ge.has(Y.name)||(Y.fn=H[Y.fn],U.push(Y),ge.set(Y.name,Y));let we=U[0]&&U[0].params.length<=2&&!C(U[0].params),Oe=U[1]&&U[1].params.length<=2&&!C(U[1].params),et=U[2]&&U[2].params.length<=2&&!C(U[2].params),Ke=U[3]&&U[3].params.length<=2&&!C(U[3].params),gt=U[4]&&U[4].params.length<=2&&!C(U[4].params),vt=U[5]&&U[5].params.length<=2&&!C(U[5].params),ar=we&&Oe&&et&&Ke&&gt&&vt;for(let de=0;de<U.length;++de)U[de].test=k(U[de].params);let pn=we?T(U[0].params[0]):t,Cl=Oe?T(U[1].params[0]):t,bl=et?T(U[2].params[0]):t,Sl=Ke?T(U[3].params[0]):t,Ml=gt?T(U[4].params[0]):t,Nl=vt?T(U[5].params[0]):t,Bl=we?T(U[0].params[1]):t,Tl=Oe?T(U[1].params[1]):t,Il=et?T(U[2].params[1]):t,Ol=Ke?T(U[3].params[1]):t,zl=gt?T(U[4].params[1]):t,Pl=vt?T(U[5].params[1]):t;for(let de=0;de<U.length;++de)U[de].implementation=Ee(U[de].params,U[de].fn);let Rl=we?U[0].implementation:r,kl=Oe?U[1].implementation:r,ql=et?U[2].implementation:r,Ll=Ke?U[3].implementation:r,Ul=gt?U[4].implementation:r,$l=vt?U[5].implementation:r,Vl=we?U[0].params.length:-1,Hl=Oe?U[1].params.length:-1,Gl=et?U[2].params.length:-1,Zl=Ke?U[3].params.length:-1,Wl=gt?U[4].params.length:-1,Xl=vt?U[5].params.length:-1,Yl=ar?6:0,Ql=U.length,Kl=U.map(de=>de.test),Jl=U.map(de=>de.implementation),jl=function(){for(let tt=Yl;tt<Ql;tt++)if(Kl[tt](arguments))return Jl[tt].apply(this,arguments);return p.onMismatch(F,arguments,U)};function Nr(de,tt){return arguments.length===Vl&&pn(de)&&Bl(tt)?Rl.apply(this,arguments):arguments.length===Hl&&Cl(de)&&Tl(tt)?kl.apply(this,arguments):arguments.length===Gl&&bl(de)&&Il(tt)?ql.apply(this,arguments):arguments.length===Zl&&Sl(de)&&Ol(tt)?Ll.apply(this,arguments):arguments.length===Wl&&Ml(de)&&zl(tt)?Ul.apply(this,arguments):arguments.length===Xl&&Nl(de)&&Pl(tt)?$l.apply(this,arguments):jl.apply(this,arguments)}try{Object.defineProperty(Nr,"name",{value:F})}catch{}return Nr.signatures=q,Nr._typedFunctionData={signatures:U,signatureMap:ge},Nr}function se(F,M,B){throw Z(F,M,B)}function Be(F){return ct(F,0,F.length-1)}function ke(F){return F[F.length-1]}function ct(F,M,B){return Array.prototype.slice.call(F,M,B)}function re(F,M){for(let B=0;B<F.length;B++)if(M(F[B]))return F[B]}function _e(F,M){return Array.prototype.concat.apply([],F.map(M))}function lt(){let F=Be(arguments).map(B=>w(b(B))),M=ke(arguments);if(typeof M!="function")throw new TypeError("Callback function expected as last argument");return ut(F,M)}function ut(F,M){return{referTo:{references:F,callback:M}}}function La(F){if(typeof F!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:F}}}function Ua(F){return F&&typeof F.referTo=="object"&&Array.isArray(F.referTo.references)&&typeof F.referTo.callback=="function"}function $a(F){return F&&typeof F.referToSelf=="object"&&typeof F.referToSelf.callback=="function"}function Va(F,M){if(!F)return M;if(M&&M!==F){let B=new Error("Function names do not match (expected: "+F+", actual: "+M+")");throw B.data={actual:M,expected:F},B}return F}function El(F){let M;for(let B in F)Object.prototype.hasOwnProperty.call(F,B)&&(A(F[B])||typeof F[B].signature=="string")&&(M=Va(M,F[B].name));return M}function Fl(F,M){let B;for(B in M)if(Object.prototype.hasOwnProperty.call(M,B)){if(B in F&&M[B]!==F[B]){let z=new Error('Signature "'+B+'" is defined twice');throw z.data={signature:B,sourceFunction:M[B],destFunction:F[B]},z}F[B]=M[B]}}let _l=p;p=function(F){let M=typeof F=="string",B=M?1:0,z=M?F:"",q={};for(let P=B;P<arguments.length;++P){let X=arguments[P],H={},Y;if(typeof X=="function"?(Y=X.name,typeof X.signature=="string"?H[X.signature]=X:A(X)&&(H=X.signatures)):a(X)&&(H=X,M||(Y=El(X))),Object.keys(H).length===0){let U=new TypeError("Argument to 'typed' at index "+P+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw U.data={index:P,argument:X},U}M||(z=Va(z,Y)),Fl(q,H)}return Ie(z||"",q)},p.create=i,p.createCount=_l.createCount,p.onMismatch=se,p.throwMismatchError=se,p.createError=Z,p.clear=h,p.clearConversions=v,p.addTypes=d,p._findType=m,p.referTo=lt,p.referToSelf=La,p.convert=D,p.findSignature=g,p.find=E,p.isTypedFunction=A,p.warnAgainstDeprecatedThis=!0,p.addType=function(F,M){let B="any";M!==!1&&s.has("Object")&&(B="Object"),p.addTypes([F],B)};function Ha(F){if(!F||typeof F.from!="string"||typeof F.to!="string"||typeof F.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(F.to===F.from)throw new SyntaxError('Illegal to define conversion from "'+F.from+'" to itself.')}return p.addConversion=function(F){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};Ha(F);let B=m(F.to),z=B.conversionsTo.find(q=>q.from===F.from);if(z)if(M&&M.override)p.removeConversion({from:z.from,to:F.to,convert:z.convert});else throw new Error('There is already a conversion from "'+F.from+'" to "'+B.name+'"');B.conversionsTo.push({from:F.from,convert:F.convert,index:l++})},p.addConversions=function(F,M){F.forEach(B=>p.addConversion(B,M))},p.removeConversion=function(F){Ha(F);let M=m(F.to),B=re(M.conversionsTo,q=>q.from===F.from);if(!B)throw new Error("Attempt to remove nonexistent conversion from "+F.from+" to "+F.to);if(B.convert!==F.convert)throw new Error("Conversion to remove does not match existing conversion");let z=M.conversionsTo.indexOf(B);M.conversionsTo.splice(z,1)},p.resolve=function(F,M){if(!A(F))throw new TypeError(n);let B=F._typedFunctionData.signatures;for(let z=0;z<B.length;++z)if(B[z].test(M))return B[z];return null},p}var o=i();return o})});function Wt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ni(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function mn(e){let t,r,n;e.length!==2?(t=Wt,r=(u,f)=>Wt(e(u),f),n=(u,f)=>e(u)-f):(t=e===Wt||e===Ni?e:sp,r=e,n=e);function i(u,f,s=0,c=u.length){if(s<c){if(t(f,f)!==0)return c;do{let l=s+c>>>1;r(u[l],f)<0?s=l+1:c=l}while(s<c)}return s}function o(u,f,s=0,c=u.length){if(s<c){if(t(f,f)!==0)return c;do{let l=s+c>>>1;r(u[l],f)<=0?s=l+1:c=l}while(s<c)}return s}function a(u,f,s=0,c=u.length){let l=i(u,f,s,c-1);return l>s&&n(u[l-1],f)>-n(u[l],f)?l-1:l}return{left:i,center:a,right:o}}function sp(){return 0}function Bi(e){return e===null?NaN:+e}var Wa=mn(Wt),Xa=Wa.right,fp=Wa.left,cp=mn(Bi).center,Ti=Xa;function zt(e,t){let r,n;if(t===void 0)for(let i of e)i!=null&&(r===void 0?i>=i&&(r=n=i):(r>i&&(r=i),n<i&&(n=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(r===void 0?o>=o&&(r=n=o):(r>o&&(r=o),n<o&&(n=o)))}return[r,n]}var ur=class extends Map{constructor(t,r=hp){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(let[n,i]of t)this.set(n,i)}get(t){return super.get(Ya(this,t))}has(t){return super.has(Ya(this,t))}set(t,r){return super.set(lp(this,t),r)}delete(t){return super.delete(pp(this,t))}};function Ya({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):r}function lp({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function pp({_intern:e,_key:t},r){let n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function hp(e){return e!==null&&typeof e=="object"?e.valueOf():e}var mp=Math.sqrt(50),dp=Math.sqrt(10),gp=Math.sqrt(2);function dn(e,t,r){let n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),o=n/Math.pow(10,i),a=o>=mp?10:o>=dp?5:o>=gp?2:1,u,f,s;return i<0?(s=Math.pow(10,-i)/a,u=Math.round(e*s),f=Math.round(t*s),u/s<e&&++u,f/s>t&&--f,s=-s):(s=Math.pow(10,i)*a,u=Math.round(e/s),f=Math.round(t/s),u*s<e&&++u,f*s>t&&--f),f<u&&.5<=r&&r<2?dn(e,t,r*2):[u,f,s]}function gn(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];let n=t<e,[i,o,a]=n?dn(t,e,r):dn(e,t,r);if(!(o>=i))return[];let u=o-i+1,f=new Array(u);if(n)if(a<0)for(let s=0;s<u;++s)f[s]=(o-s)/-a;else for(let s=0;s<u;++s)f[s]=(o-s)*a;else if(a<0)for(let s=0;s<u;++s)f[s]=(i+s)/-a;else for(let s=0;s<u;++s)f[s]=(i+s)*a;return f}function Tr(e,t,r){return t=+t,e=+e,r=+r,dn(e,t,r)[2]}function Ii(e,t,r){t=+t,e=+e,r=+r;let n=t<e,i=n?Tr(t,e,r):Tr(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function Xt(e,t){let r;if(t===void 0)for(let n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}return r}function vn(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,o=new Array(i);++n<i;)o[n]=e+n*r;return o}function xn(e,t){let r=0;if(t===void 0)for(let n of e)(n=+n)&&(r+=n);else{let n=-1;for(let i of e)(i=+t(i,++n,e))&&(r+=i)}return r}function Qa(e){return e}var Oi=1,zi=2,Pi=3,Ir=4,Ka=1e-6;function vp(e){return"translate("+e+",0)"}function xp(e){return"translate(0,"+e+")"}function Dp(e){return t=>+e(t)}function yp(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),r=>+e(r)+t}function wp(){return!this.__axis}function Ja(e,t){var r=[],n=null,i=null,o=6,a=6,u=3,f=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=e===Oi||e===Ir?-1:1,c=e===Ir||e===zi?"x":"y",l=e===Oi||e===Pi?vp:xp;function p(m){var d=n??(t.ticks?t.ticks.apply(t,r):t.domain()),h=i??(t.tickFormat?t.tickFormat.apply(t,r):Qa),v=Math.max(o,0)+u,y=t.range(),A=+y[0]+f,g=+y[y.length-1]+f,E=(t.bandwidth?yp:Dp)(t.copy(),f),D=m.selection?m.selection():m,w=D.selectAll(".domain").data([null]),_=D.selectAll(".tick").data(d,t).order(),x=_.exit(),S=_.enter().append("g").attr("class","tick"),b=_.select("line"),C=_.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(S),b=b.merge(S.append("line").attr("stroke","currentColor").attr(c+"2",s*o)),C=C.merge(S.append("text").attr("fill","currentColor").attr(c,s*v).attr("dy",e===Oi?"0em":e===Pi?"0.71em":"0.32em")),m!==D&&(w=w.transition(m),_=_.transition(m),b=b.transition(m),C=C.transition(m),x=x.transition(m).attr("opacity",Ka).attr("transform",function(T){return isFinite(T=E(T))?l(T+f):this.getAttribute("transform")}),S.attr("opacity",Ka).attr("transform",function(T){var k=this.parentNode.__axis;return l((k&&isFinite(k=k(T))?k:E(T))+f)})),x.remove(),w.attr("d",e===Ir||e===zi?a?"M"+s*a+","+A+"H"+f+"V"+g+"H"+s*a:"M"+f+","+A+"V"+g:a?"M"+A+","+s*a+"V"+f+"H"+g+"V"+s*a:"M"+A+","+f+"H"+g),_.attr("opacity",1).attr("transform",function(T){return l(E(T)+f)}),b.attr(c+"2",s*o),C.attr(c,s*v).text(h),D.filter(wp).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===zi?"start":e===Ir?"end":"middle"),D.each(function(){this.__axis=E})}return p.scale=function(m){return arguments.length?(t=m,p):t},p.ticks=function(){return r=Array.from(arguments),p},p.tickArguments=function(m){return arguments.length?(r=m==null?[]:Array.from(m),p):r.slice()},p.tickValues=function(m){return arguments.length?(n=m==null?null:Array.from(m),p):n&&n.slice()},p.tickFormat=function(m){return arguments.length?(i=m,p):i},p.tickSize=function(m){return arguments.length?(o=a=+m,p):o},p.tickSizeInner=function(m){return arguments.length?(o=+m,p):o},p.tickSizeOuter=function(m){return arguments.length?(a=+m,p):a},p.tickPadding=function(m){return arguments.length?(u=+m,p):u},p.offset=function(m){return arguments.length?(f=+m,p):f},p}function Or(e){return Ja(Pi,e)}function zr(e){return Ja(Ir,e)}var Ap={value:()=>{}};function eu(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Dn(r)}function Dn(e){this._=e}function Ep(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",i=r.indexOf(".");if(i>=0&&(n=r.slice(i+1),r=r.slice(0,i)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Dn.prototype=eu.prototype={constructor:Dn,on:function(e,t){var r=this._,n=Ep(e+"",r),i,o=-1,a=n.length;if(arguments.length<2){for(;++o<a;)if((i=(e=n[o]).type)&&(i=Fp(r[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=n[o]).type)r[i]=ja(r[i],e.name,t);else if(t==null)for(i in r)r[i]=ja(r[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Dn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var r=new Array(i),n=0,i,o;n<i;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],n=0,i=o.length;n<i;++n)o[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],i=0,o=n.length;i<o;++i)n[i].value.apply(t,r)}};function Fp(e,t){for(var r=0,n=e.length,i;r<n;++r)if((i=e[r]).name===t)return i.value}function ja(e,t,r){for(var n=0,i=e.length;n<i;++n)if(e[n].name===t){e[n]=Ap,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var Pr=eu;var yn="http://www.w3.org/1999/xhtml",Ri={svg:"http://www.w3.org/2000/svg",xhtml:yn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ct(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Ri.hasOwnProperty(t)?{space:Ri[t],local:e}:e}function _p(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===yn&&t.documentElement.namespaceURI===yn?t.createElement(e):t.createElementNS(r,e)}}function Cp(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function sr(e){var t=Ct(e);return(t.local?Cp:_p)(t)}function bp(){}function Yt(e){return e==null?bp:function(){return this.querySelector(e)}}function tu(e){typeof e!="function"&&(e=Yt(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],a=o.length,u=n[i]=new Array(a),f,s,c=0;c<a;++c)(f=o[c])&&(s=e.call(f,f.__data__,c,o))&&("__data__"in f&&(s.__data__=f.__data__),u[c]=s);return new Ne(n,this._parents)}function ki(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Sp(){return[]}function Rr(e){return e==null?Sp:function(){return this.querySelectorAll(e)}}function Mp(e){return function(){return ki(e.apply(this,arguments))}}function ru(e){typeof e=="function"?e=Mp(e):e=Rr(e);for(var t=this._groups,r=t.length,n=[],i=[],o=0;o<r;++o)for(var a=t[o],u=a.length,f,s=0;s<u;++s)(f=a[s])&&(n.push(e.call(f,f.__data__,s,a)),i.push(f));return new Ne(n,i)}function kr(e){return function(){return this.matches(e)}}function wn(e){return function(t){return t.matches(e)}}var Np=Array.prototype.find;function Bp(e){return function(){return Np.call(this.children,e)}}function Tp(){return this.firstElementChild}function nu(e){return this.select(e==null?Tp:Bp(typeof e=="function"?e:wn(e)))}var Ip=Array.prototype.filter;function Op(){return Array.from(this.children)}function zp(e){return function(){return Ip.call(this.children,e)}}function iu(e){return this.selectAll(e==null?Op:zp(typeof e=="function"?e:wn(e)))}function ou(e){typeof e!="function"&&(e=kr(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],a=o.length,u=n[i]=[],f,s=0;s<a;++s)(f=o[s])&&e.call(f,f.__data__,s,o)&&u.push(f);return new Ne(n,this._parents)}function An(e){return new Array(e.length)}function au(){return new Ne(this._enter||this._groups.map(An),this._parents)}function qr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}qr.prototype={constructor:qr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function uu(e){return function(){return e}}function Pp(e,t,r,n,i,o){for(var a=0,u,f=t.length,s=o.length;a<s;++a)(u=t[a])?(u.__data__=o[a],n[a]=u):r[a]=new qr(e,o[a]);for(;a<f;++a)(u=t[a])&&(i[a]=u)}function Rp(e,t,r,n,i,o,a){var u,f,s=new Map,c=t.length,l=o.length,p=new Array(c),m;for(u=0;u<c;++u)(f=t[u])&&(p[u]=m=a.call(f,f.__data__,u,t)+"",s.has(m)?i[u]=f:s.set(m,f));for(u=0;u<l;++u)m=a.call(e,o[u],u,o)+"",(f=s.get(m))?(n[u]=f,f.__data__=o[u],s.delete(m)):r[u]=new qr(e,o[u]);for(u=0;u<c;++u)(f=t[u])&&s.get(p[u])===f&&(i[u]=f)}function kp(e){return e.__data__}function su(e,t){if(!arguments.length)return Array.from(this,kp);var r=t?Rp:Pp,n=this._parents,i=this._groups;typeof e!="function"&&(e=uu(e));for(var o=i.length,a=new Array(o),u=new Array(o),f=new Array(o),s=0;s<o;++s){var c=n[s],l=i[s],p=l.length,m=qp(e.call(c,c&&c.__data__,s,n)),d=m.length,h=u[s]=new Array(d),v=a[s]=new Array(d),y=f[s]=new Array(p);r(c,l,h,v,y,m,t);for(var A=0,g=0,E,D;A<d;++A)if(E=h[A]){for(A>=g&&(g=A+1);!(D=v[g])&&++g<d;);E._next=D||null}}return a=new Ne(a,n),a._enter=u,a._exit=f,a}function qp(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fu(){return new Ne(this._exit||this._groups.map(An),this._parents)}function cu(e,t,r){var n=this.enter(),i=this,o=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),r==null?o.remove():r(o),n&&i?n.merge(i).order():i}function lu(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,i=r.length,o=n.length,a=Math.min(i,o),u=new Array(i),f=0;f<a;++f)for(var s=r[f],c=n[f],l=s.length,p=u[f]=new Array(l),m,d=0;d<l;++d)(m=s[d]||c[d])&&(p[d]=m);for(;f<i;++f)u[f]=r[f];return new Ne(u,this._parents)}function pu(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],i=n.length-1,o=n[i],a;--i>=0;)(a=n[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function hu(e){e||(e=Lp);function t(l,p){return l&&p?e(l.__data__,p.__data__):!l-!p}for(var r=this._groups,n=r.length,i=new Array(n),o=0;o<n;++o){for(var a=r[o],u=a.length,f=i[o]=new Array(u),s,c=0;c<u;++c)(s=a[c])&&(f[c]=s);f.sort(t)}return new Ne(i,this._parents).order()}function Lp(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function mu(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function du(){return Array.from(this)}function gu(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length;i<o;++i){var a=n[i];if(a)return a}return null}function vu(){let e=0;for(let t of this)++e;return e}function xu(){return!this.node()}function Du(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var i=t[r],o=0,a=i.length,u;o<a;++o)(u=i[o])&&e.call(u,u.__data__,o,i);return this}function Up(e){return function(){this.removeAttribute(e)}}function $p(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vp(e,t){return function(){this.setAttribute(e,t)}}function Hp(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Gp(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Zp(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function yu(e,t){var r=Ct(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?$p:Up:typeof t=="function"?r.local?Zp:Gp:r.local?Hp:Vp)(r,t))}function En(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Wp(e){return function(){this.style.removeProperty(e)}}function Xp(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Yp(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function wu(e,t,r){return arguments.length>1?this.each((t==null?Wp:typeof t=="function"?Yp:Xp)(e,t,r??"")):Pt(this.node(),e)}function Pt(e,t){return e.style.getPropertyValue(t)||En(e).getComputedStyle(e,null).getPropertyValue(t)}function Qp(e){return function(){delete this[e]}}function Kp(e,t){return function(){this[e]=t}}function Jp(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Au(e,t){return arguments.length>1?this.each((t==null?Qp:typeof t=="function"?Jp:Kp)(e,t)):this.node()[e]}function Eu(e){return e.trim().split(/^|\s+/)}function qi(e){return e.classList||new Fu(e)}function Fu(e){this._node=e,this._names=Eu(e.getAttribute("class")||"")}Fu.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function _u(e,t){for(var r=qi(e),n=-1,i=t.length;++n<i;)r.add(t[n])}function Cu(e,t){for(var r=qi(e),n=-1,i=t.length;++n<i;)r.remove(t[n])}function jp(e){return function(){_u(this,e)}}function eh(e){return function(){Cu(this,e)}}function th(e,t){return function(){(t.apply(this,arguments)?_u:Cu)(this,e)}}function bu(e,t){var r=Eu(e+"");if(arguments.length<2){for(var n=qi(this.node()),i=-1,o=r.length;++i<o;)if(!n.contains(r[i]))return!1;return!0}return this.each((typeof t=="function"?th:t?jp:eh)(r,t))}function rh(){this.textContent=""}function nh(e){return function(){this.textContent=e}}function ih(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Su(e){return arguments.length?this.each(e==null?rh:(typeof e=="function"?ih:nh)(e)):this.node().textContent}function oh(){this.innerHTML=""}function ah(e){return function(){this.innerHTML=e}}function uh(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Mu(e){return arguments.length?this.each(e==null?oh:(typeof e=="function"?uh:ah)(e)):this.node().innerHTML}function sh(){this.nextSibling&&this.parentNode.appendChild(this)}function Nu(){return this.each(sh)}function fh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Bu(){return this.each(fh)}function Tu(e){var t=typeof e=="function"?e:sr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ch(){return null}function Iu(e,t){var r=typeof e=="function"?e:sr(e),n=t==null?ch:typeof t=="function"?t:Yt(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function lh(){var e=this.parentNode;e&&e.removeChild(this)}function Ou(){return this.each(lh)}function ph(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function hh(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function zu(e){return this.select(e?hh:ph)}function Pu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function mh(e){return function(t){e.call(this,t,this.__data__)}}function dh(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function gh(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,i=t.length,o;r<i;++r)o=t[r],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++n]=o;++n?t.length=n:delete this.__on}}}function vh(e,t,r){return function(){var n=this.__on,i,o=mh(t);if(n){for(var a=0,u=n.length;a<u;++a)if((i=n[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=r),i.value=t;return}}this.addEventListener(e.type,o,r),i={type:e.type,name:e.name,value:t,listener:o,options:r},n?n.push(i):this.__on=[i]}}function Ru(e,t,r){var n=dh(e+""),i,o=n.length,a;if(arguments.length<2){var u=this.node().__on;if(u){for(var f=0,s=u.length,c;f<s;++f)for(i=0,c=u[f];i<o;++i)if((a=n[i]).type===c.type&&a.name===c.name)return c.value}return}for(u=t?vh:gh,i=0;i<o;++i)this.each(u(n[i],t,r));return this}function ku(e,t,r){var n=En(e),i=n.CustomEvent;typeof i=="function"?i=new i(t,r):(i=n.document.createEvent("Event"),r?(i.initEvent(t,r.bubbles,r.cancelable),i.detail=r.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function xh(e,t){return function(){return ku(this,e,t)}}function Dh(e,t){return function(){return ku(this,e,t.apply(this,arguments))}}function qu(e,t){return this.each((typeof t=="function"?Dh:xh)(e,t))}function*Lu(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],i=0,o=n.length,a;i<o;++i)(a=n[i])&&(yield a)}var Li=[null];function Ne(e,t){this._groups=e,this._parents=t}function Uu(){return new Ne([[document.documentElement]],Li)}function yh(){return this}Ne.prototype=Uu.prototype={constructor:Ne,select:tu,selectAll:ru,selectChild:nu,selectChildren:iu,filter:ou,data:su,enter:au,exit:fu,join:cu,merge:lu,selection:yh,order:pu,sort:hu,call:mu,nodes:du,node:gu,size:vu,empty:xu,each:Du,attr:yu,style:wu,property:Au,classed:bu,text:Su,html:Mu,raise:Nu,lower:Bu,append:Tu,insert:Iu,remove:Ou,clone:zu,datum:Pu,on:Ru,dispatch:qu,[Symbol.iterator]:Lu};var bt=Uu;function rt(e){return typeof e=="string"?new Ne([[document.querySelector(e)]],[document.documentElement]):new Ne([[e]],Li)}function Ui(e){return rt(sr(e).call(document.documentElement))}function $u(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Fn(e,t){if(e=$u(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}var _n={capture:!0,passive:!1};function Cn(e){e.preventDefault(),e.stopImmediatePropagation()}function $i(e){var t=e.document.documentElement,r=rt(e).on("dragstart.drag",Cn,_n);"onselectstart"in t?r.on("selectstart.drag",Cn,_n):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Vi(e,t){var r=e.document.documentElement,n=rt(e).on("dragstart.drag",null);t&&(n.on("click.drag",Cn,_n),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function bn(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Hi(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function $r(){}var Lr=.7,Nn=1/Lr,fr="\\s*([+-]?\\d+)\\s*",Ur="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",At="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wh=/^#([0-9a-f]{3,8})$/,Ah=new RegExp(`^rgb\\(${fr},${fr},${fr}\\)$`),Eh=new RegExp(`^rgb\\(${At},${At},${At}\\)$`),Fh=new RegExp(`^rgba\\(${fr},${fr},${fr},${Ur}\\)$`),_h=new RegExp(`^rgba\\(${At},${At},${At},${Ur}\\)$`),Ch=new RegExp(`^hsl\\(${Ur},${At},${At}\\)$`),bh=new RegExp(`^hsla\\(${Ur},${At},${At},${Ur}\\)$`),Vu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bn($r,Dt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Hu,formatHex:Hu,formatHex8:Sh,formatHsl:Mh,formatRgb:Gu,toString:Gu});function Hu(){return this.rgb().formatHex()}function Sh(){return this.rgb().formatHex8()}function Mh(){return Ku(this).formatHsl()}function Gu(){return this.rgb().formatRgb()}function Dt(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=wh.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Zu(t):r===3?new nt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Sn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Sn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ah.exec(e))?new nt(t[1],t[2],t[3],1):(t=Eh.exec(e))?new nt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Fh.exec(e))?Sn(t[1],t[2],t[3],t[4]):(t=_h.exec(e))?Sn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ch.exec(e))?Yu(t[1],t[2]/100,t[3]/100,1):(t=bh.exec(e))?Yu(t[1],t[2]/100,t[3]/100,t[4]):Vu.hasOwnProperty(e)?Zu(Vu[e]):e==="transparent"?new nt(NaN,NaN,NaN,0):null}function Zu(e){return new nt(e>>16&255,e>>8&255,e&255,1)}function Sn(e,t,r,n){return n<=0&&(e=t=r=NaN),new nt(e,t,r,n)}function Nh(e){return e instanceof $r||(e=Dt(e)),e?(e=e.rgb(),new nt(e.r,e.g,e.b,e.opacity)):new nt}function cr(e,t,r,n){return arguments.length===1?Nh(e):new nt(e,t,r,n??1)}function nt(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}bn(nt,cr,Hi($r,{brighter(e){return e=e==null?Nn:Math.pow(Nn,e),new nt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Lr:Math.pow(Lr,e),new nt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new nt(Kt(this.r),Kt(this.g),Kt(this.b),Bn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wu,formatHex:Wu,formatHex8:Bh,formatRgb:Xu,toString:Xu}));function Wu(){return`#${Qt(this.r)}${Qt(this.g)}${Qt(this.b)}`}function Bh(){return`#${Qt(this.r)}${Qt(this.g)}${Qt(this.b)}${Qt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xu(){let e=Bn(this.opacity);return`${e===1?"rgb(":"rgba("}${Kt(this.r)}, ${Kt(this.g)}, ${Kt(this.b)}${e===1?")":`, ${e})`}`}function Bn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Kt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Qt(e){return e=Kt(e),(e<16?"0":"")+e.toString(16)}function Yu(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new xt(e,t,r,n)}function Ku(e){if(e instanceof xt)return new xt(e.h,e.s,e.l,e.opacity);if(e instanceof $r||(e=Dt(e)),!e)return new xt;if(e instanceof xt)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),o=Math.max(t,r,n),a=NaN,u=o-i,f=(o+i)/2;return u?(t===o?a=(r-n)/u+(r<n)*6:r===o?a=(n-t)/u+2:a=(t-r)/u+4,u/=f<.5?o+i:2-o-i,a*=60):u=f>0&&f<1?0:a,new xt(a,u,f,e.opacity)}function Ju(e,t,r,n){return arguments.length===1?Ku(e):new xt(e,t,r,n??1)}function xt(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}bn(xt,Ju,Hi($r,{brighter(e){return e=e==null?Nn:Math.pow(Nn,e),new xt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Lr:Math.pow(Lr,e),new xt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new nt(Gi(e>=240?e-240:e+120,i,n),Gi(e,i,n),Gi(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new xt(Qu(this.h),Mn(this.s),Mn(this.l),Bn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=Bn(this.opacity);return`${e===1?"hsl(":"hsla("}${Qu(this.h)}, ${Mn(this.s)*100}%, ${Mn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Qu(e){return e=(e||0)%360,e<0?e+360:e}function Mn(e){return Math.max(0,Math.min(1,e||0))}function Gi(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}function Zi(e,t,r,n,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*r+(1+3*e+3*o-3*a)*n+a*i)/6}function ju(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),i=e[n],o=e[n+1],a=n>0?e[n-1]:2*i-o,u=n<t-1?e[n+2]:2*o-i;return Zi((r-n/t)*t,a,i,o,u)}}function es(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),i=e[(n+t-1)%t],o=e[n%t],a=e[(n+1)%t],u=e[(n+2)%t];return Zi((r-n/t)*t,i,o,a,u)}}var Vr=e=>()=>e;function Th(e,t){return function(r){return e+r*t}}function Ih(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function ts(e){return(e=+e)==1?Tn:function(t,r){return r-t?Ih(t,r,e):Vr(isNaN(t)?r:t)}}function Tn(e,t){var r=t-e;return r?Th(e,r):Vr(isNaN(e)?t:e)}var Jt=function e(t){var r=ts(t);function n(i,o){var a=r((i=cr(i)).r,(o=cr(o)).r),u=r(i.g,o.g),f=r(i.b,o.b),s=Tn(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=u(c),i.b=f(c),i.opacity=s(c),i+""}}return n.gamma=e,n}(1);function rs(e){return function(t){var r=t.length,n=new Array(r),i=new Array(r),o=new Array(r),a,u;for(a=0;a<r;++a)u=cr(t[a]),n[a]=u.r||0,i[a]=u.g||0,o[a]=u.b||0;return n=e(n),i=e(i),o=e(o),u.opacity=1,function(f){return u.r=n(f),u.g=i(f),u.b=o(f),u+""}}}var Oh=rs(ju),zh=rs(es);function ns(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(o){for(i=0;i<r;++i)n[i]=e[i]*(1-o)+t[i]*o;return n}}function is(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function os(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),o=new Array(r),a;for(a=0;a<n;++a)i[a]=St(e[a],t[a]);for(;a<r;++a)o[a]=t[a];return function(u){for(a=0;a<n;++a)o[a]=i[a](u);return o}}function as(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function $e(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function us(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=St(e[i],t[i]):n[i]=t[i];return function(o){for(i in r)n[i]=r[i](o);return n}}var Xi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wi=new RegExp(Xi.source,"g");function Ph(e){return function(){return e}}function Rh(e){return function(t){return e(t)+""}}function Hr(e,t){var r=Xi.lastIndex=Wi.lastIndex=0,n,i,o,a=-1,u=[],f=[];for(e=e+"",t=t+"";(n=Xi.exec(e))&&(i=Wi.exec(t));)(o=i.index)>r&&(o=t.slice(r,o),u[a]?u[a]+=o:u[++a]=o),(n=n[0])===(i=i[0])?u[a]?u[a]+=i:u[++a]=i:(u[++a]=null,f.push({i:a,x:$e(n,i)})),r=Wi.lastIndex;return r<t.length&&(o=t.slice(r),u[a]?u[a]+=o:u[++a]=o),u.length<2?f[0]?Rh(f[0].x):Ph(t):(t=f.length,function(s){for(var c=0,l;c<t;++c)u[(l=f[c]).i]=l.x(s);return u.join("")})}function St(e,t){var r=typeof t,n;return t==null||r==="boolean"?Vr(t):(r==="number"?$e:r==="string"?(n=Dt(t))?(t=n,Jt):Hr:t instanceof Dt?Jt:t instanceof Date?as:is(t)?ns:Array.isArray(t)?os:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?us:$e)(e,t)}function Yi(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var ss=180/Math.PI,In={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qi(e,t,r,n,i,o){var a,u,f;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(f=e*r+t*n)&&(r-=e*f,n-=t*f),(u=Math.sqrt(r*r+n*n))&&(r/=u,n/=u,f/=u),e*n<t*r&&(e=-e,t=-t,f=-f,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*ss,skewX:Math.atan(f)*ss,scaleX:a,scaleY:u}}var On;function fs(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?In:Qi(t.a,t.b,t.c,t.d,t.e,t.f)}function cs(e){return e==null?In:(On||(On=document.createElementNS("http://www.w3.org/2000/svg","g")),On.setAttribute("transform",e),(e=On.transform.baseVal.consolidate())?(e=e.matrix,Qi(e.a,e.b,e.c,e.d,e.e,e.f)):In)}function ls(e,t,r,n){function i(s){return s.length?s.pop()+" ":""}function o(s,c,l,p,m,d){if(s!==l||c!==p){var h=m.push("translate(",null,t,null,r);d.push({i:h-4,x:$e(s,l)},{i:h-2,x:$e(c,p)})}else(l||p)&&m.push("translate("+l+t+p+r)}function a(s,c,l,p){s!==c?(s-c>180?c+=360:c-s>180&&(s+=360),p.push({i:l.push(i(l)+"rotate(",null,n)-2,x:$e(s,c)})):c&&l.push(i(l)+"rotate("+c+n)}function u(s,c,l,p){s!==c?p.push({i:l.push(i(l)+"skewX(",null,n)-2,x:$e(s,c)}):c&&l.push(i(l)+"skewX("+c+n)}function f(s,c,l,p,m,d){if(s!==l||c!==p){var h=m.push(i(m)+"scale(",null,",",null,")");d.push({i:h-4,x:$e(s,l)},{i:h-2,x:$e(c,p)})}else(l!==1||p!==1)&&m.push(i(m)+"scale("+l+","+p+")")}return function(s,c){var l=[],p=[];return s=e(s),c=e(c),o(s.translateX,s.translateY,c.translateX,c.translateY,l,p),a(s.rotate,c.rotate,l,p),u(s.skewX,c.skewX,l,p),f(s.scaleX,s.scaleY,c.scaleX,c.scaleY,l,p),s=c=null,function(m){for(var d=-1,h=p.length,v;++d<h;)l[(v=p[d]).i]=v.x(m);return l.join("")}}}var Ki=ls(fs,"px, ","px)","deg)"),Ji=ls(cs,", ",")",")");var lr=0,Zr=0,Gr=0,hs=1e3,zn,Wr,Pn=0,jt=0,Rn=0,Xr=typeof performance=="object"&&performance.now?performance:Date,ms=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Qr(){return jt||(ms(kh),jt=Xr.now()+Rn)}function kh(){jt=0}function Yr(){this._call=this._time=this._next=null}Yr.prototype=kn.prototype={constructor:Yr,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Qr():+r)+(t==null?0:+t),!this._next&&Wr!==this&&(Wr?Wr._next=this:zn=this,Wr=this),this._call=e,this._time=r,ji()},stop:function(){this._call&&(this._call=null,this._time=1/0,ji())}};function kn(e,t,r){var n=new Yr;return n.restart(e,t,r),n}function ds(){Qr(),++lr;for(var e=zn,t;e;)(t=jt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--lr}function ps(){jt=(Pn=Xr.now())+Rn,lr=Zr=0;try{ds()}finally{lr=0,Lh(),jt=0}}function qh(){var e=Xr.now(),t=e-Pn;t>hs&&(Rn-=t,Pn=e)}function Lh(){for(var e,t=zn,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:zn=r);Wr=e,ji(n)}function ji(e){if(!lr){Zr&&(Zr=clearTimeout(Zr));var t=e-jt;t>24?(e<1/0&&(Zr=setTimeout(ps,e-Xr.now()-Rn)),Gr&&(Gr=clearInterval(Gr))):(Gr||(Pn=Xr.now(),Gr=setInterval(qh,hs)),lr=1,ms(ps))}}function qn(e,t,r){var n=new Yr;return t=t==null?0:+t,n.restart(i=>{n.stop(),e(i+t)},t,r),n}var Uh=Pr("start","end","cancel","interrupt"),$h=[],xs=0,gs=1,Un=2,Ln=3,vs=4,$n=5,Kr=6;function Rt(e,t,r,n,i,o){var a=e.__transition;if(!a)e.__transition={};else if(r in a)return;Vh(e,r,{name:t,index:n,group:i,on:Uh,tween:$h,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:xs})}function Jr(e,t){var r=ze(e,t);if(r.state>xs)throw new Error("too late; already scheduled");return r}function Ve(e,t){var r=ze(e,t);if(r.state>Ln)throw new Error("too late; already running");return r}function ze(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Vh(e,t,r){var n=e.__transition,i;n[t]=r,r.timer=kn(o,0,r.time);function o(s){r.state=gs,r.timer.restart(a,r.delay,r.time),r.delay<=s&&a(s-r.delay)}function a(s){var c,l,p,m;if(r.state!==gs)return f();for(c in n)if(m=n[c],m.name===r.name){if(m.state===Ln)return qn(a);m.state===vs?(m.state=Kr,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete n[c]):+c<t&&(m.state=Kr,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete n[c])}if(qn(function(){r.state===Ln&&(r.state=vs,r.timer.restart(u,r.delay,r.time),u(s))}),r.state=Un,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Un){for(r.state=Ln,i=new Array(p=r.tween.length),c=0,l=-1;c<p;++c)(m=r.tween[c].value.call(e,e.__data__,r.index,r.group))&&(i[++l]=m);i.length=l+1}}function u(s){for(var c=s<r.duration?r.ease.call(null,s/r.duration):(r.timer.restart(f),r.state=$n,1),l=-1,p=i.length;++l<p;)i[l].call(e,c);r.state===$n&&(r.on.call("end",e,e.__data__,r.index,r.group),f())}function f(){r.state=Kr,r.timer.stop(),delete n[t];for(var s in n)return;delete e.__transition}}function er(e,t){var r=e.__transition,n,i,o=!0,a;if(r){t=t==null?null:t+"";for(a in r){if((n=r[a]).name!==t){o=!1;continue}i=n.state>Un&&n.state<$n,n.state=Kr,n.timer.stop(),n.on.call(i?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[a]}o&&delete e.__transition}}function Ds(e){return this.each(function(){er(this,e)})}function Hh(e,t){var r,n;return function(){var i=Ve(this,e),o=i.tween;if(o!==r){n=r=o;for(var a=0,u=n.length;a<u;++a)if(n[a].name===t){n=n.slice(),n.splice(a,1);break}}i.tween=n}}function Gh(e,t,r){var n,i;if(typeof r!="function")throw new Error;return function(){var o=Ve(this,e),a=o.tween;if(a!==n){i=(n=a).slice();for(var u={name:t,value:r},f=0,s=i.length;f<s;++f)if(i[f].name===t){i[f]=u;break}f===s&&i.push(u)}o.tween=i}}function ys(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=ze(this.node(),r).tween,i=0,o=n.length,a;i<o;++i)if((a=n[i]).name===e)return a.value;return null}return this.each((t==null?Hh:Gh)(r,e,t))}function pr(e,t,r){var n=e._id;return e.each(function(){var i=Ve(this,n);(i.value||(i.value={}))[t]=r.apply(this,arguments)}),function(i){return ze(i,n).value[t]}}function Vn(e,t){var r;return(typeof t=="number"?$e:t instanceof Dt?Jt:(r=Dt(t))?(t=r,Jt):Hr)(e,t)}function Zh(e){return function(){this.removeAttribute(e)}}function Wh(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xh(e,t,r){var n,i=r+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===n?o:o=t(n=a,r)}}function Yh(e,t,r){var n,i=r+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===n?o:o=t(n=a,r)}}function Qh(e,t,r){var n,i,o;return function(){var a,u=r(this),f;return u==null?void this.removeAttribute(e):(a=this.getAttribute(e),f=u+"",a===f?null:a===n&&f===i?o:(i=f,o=t(n=a,u)))}}function Kh(e,t,r){var n,i,o;return function(){var a,u=r(this),f;return u==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),f=u+"",a===f?null:a===n&&f===i?o:(i=f,o=t(n=a,u)))}}function ws(e,t){var r=Ct(e),n=r==="transform"?Ji:Vn;return this.attrTween(e,typeof t=="function"?(r.local?Kh:Qh)(r,n,pr(this,"attr."+e,t)):t==null?(r.local?Wh:Zh)(r):(r.local?Yh:Xh)(r,n,t))}function Jh(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function jh(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function e0(e,t){var r,n;function i(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&jh(e,o)),r}return i._value=t,i}function t0(e,t){var r,n;function i(){var o=t.apply(this,arguments);return o!==n&&(r=(n=o)&&Jh(e,o)),r}return i._value=t,i}function As(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Ct(e);return this.tween(r,(n.local?e0:t0)(n,t))}function r0(e,t){return function(){Jr(this,e).delay=+t.apply(this,arguments)}}function n0(e,t){return t=+t,function(){Jr(this,e).delay=t}}function Es(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?r0:n0)(t,e)):ze(this.node(),t).delay}function i0(e,t){return function(){Ve(this,e).duration=+t.apply(this,arguments)}}function o0(e,t){return t=+t,function(){Ve(this,e).duration=t}}function Fs(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?i0:o0)(t,e)):ze(this.node(),t).duration}function a0(e,t){if(typeof t!="function")throw new Error;return function(){Ve(this,e).ease=t}}function _s(e){var t=this._id;return arguments.length?this.each(a0(t,e)):ze(this.node(),t).ease}function u0(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Ve(this,e).ease=r}}function Cs(e){if(typeof e!="function")throw new Error;return this.each(u0(this._id,e))}function bs(e){typeof e!="function"&&(e=kr(e));for(var t=this._groups,r=t.length,n=new Array(r),i=0;i<r;++i)for(var o=t[i],a=o.length,u=n[i]=[],f,s=0;s<a;++s)(f=o[s])&&e.call(f,f.__data__,s,o)&&u.push(f);return new Je(n,this._parents,this._name,this._id)}function Ss(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,i=r.length,o=Math.min(n,i),a=new Array(n),u=0;u<o;++u)for(var f=t[u],s=r[u],c=f.length,l=a[u]=new Array(c),p,m=0;m<c;++m)(p=f[m]||s[m])&&(l[m]=p);for(;u<n;++u)a[u]=t[u];return new Je(a,this._parents,this._name,this._id)}function s0(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function f0(e,t,r){var n,i,o=s0(t)?Jr:Ve;return function(){var a=o(this,e),u=a.on;u!==n&&(i=(n=u).copy()).on(t,r),a.on=i}}function Ms(e,t){var r=this._id;return arguments.length<2?ze(this.node(),r).on.on(e):this.each(f0(r,e,t))}function c0(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function Ns(){return this.on("end.remove",c0(this._id))}function Bs(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Yt(e));for(var n=this._groups,i=n.length,o=new Array(i),a=0;a<i;++a)for(var u=n[a],f=u.length,s=o[a]=new Array(f),c,l,p=0;p<f;++p)(c=u[p])&&(l=e.call(c,c.__data__,p,u))&&("__data__"in c&&(l.__data__=c.__data__),s[p]=l,Rt(s[p],t,r,p,s,ze(c,r)));return new Je(o,this._parents,t,r)}function Ts(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Rr(e));for(var n=this._groups,i=n.length,o=[],a=[],u=0;u<i;++u)for(var f=n[u],s=f.length,c,l=0;l<s;++l)if(c=f[l]){for(var p=e.call(c,c.__data__,l,f),m,d=ze(c,r),h=0,v=p.length;h<v;++h)(m=p[h])&&Rt(m,t,r,h,p,d);o.push(p),a.push(c)}return new Je(o,a,t,r)}var l0=bt.prototype.constructor;function Is(){return new l0(this._groups,this._parents)}function p0(e,t){var r,n,i;return function(){var o=Pt(this,e),a=(this.style.removeProperty(e),Pt(this,e));return o===a?null:o===r&&a===n?i:i=t(r=o,n=a)}}function Os(e){return function(){this.style.removeProperty(e)}}function h0(e,t,r){var n,i=r+"",o;return function(){var a=Pt(this,e);return a===i?null:a===n?o:o=t(n=a,r)}}function m0(e,t,r){var n,i,o;return function(){var a=Pt(this,e),u=r(this),f=u+"";return u==null&&(f=u=(this.style.removeProperty(e),Pt(this,e))),a===f?null:a===n&&f===i?o:(i=f,o=t(n=a,u))}}function d0(e,t){var r,n,i,o="style."+t,a="end."+o,u;return function(){var f=Ve(this,e),s=f.on,c=f.value[o]==null?u||(u=Os(t)):void 0;(s!==r||i!==c)&&(n=(r=s).copy()).on(a,i=c),f.on=n}}function zs(e,t,r){var n=(e+="")=="transform"?Ki:Vn;return t==null?this.styleTween(e,p0(e,n)).on("end.style."+e,Os(e)):typeof t=="function"?this.styleTween(e,m0(e,n,pr(this,"style."+e,t))).each(d0(this._id,e)):this.styleTween(e,h0(e,n,t),r).on("end.style."+e,null)}function g0(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function v0(e,t,r){var n,i;function o(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&g0(e,a,r)),n}return o._value=t,o}function Ps(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,v0(e,t,r??""))}function x0(e){return function(){this.textContent=e}}function D0(e){return function(){var t=e(this);this.textContent=t??""}}function Rs(e){return this.tween("text",typeof e=="function"?D0(pr(this,"text",e)):x0(e==null?"":e+""))}function y0(e){return function(t){this.textContent=e.call(this,t)}}function w0(e){var t,r;function n(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&y0(i)),t}return n._value=e,n}function ks(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,w0(e))}function qs(){for(var e=this._name,t=this._id,r=Hn(),n=this._groups,i=n.length,o=0;o<i;++o)for(var a=n[o],u=a.length,f,s=0;s<u;++s)if(f=a[s]){var c=ze(f,t);Rt(f,e,r,s,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Je(n,this._parents,e,r)}function Ls(){var e,t,r=this,n=r._id,i=r.size();return new Promise(function(o,a){var u={value:a},f={value:function(){--i===0&&o()}};r.each(function(){var s=Ve(this,n),c=s.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(f)),s.on=t}),i===0&&o()})}var A0=0;function Je(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Us(e){return bt().transition(e)}function Hn(){return++A0}var Mt=bt.prototype;Je.prototype=Us.prototype={constructor:Je,select:Bs,selectAll:Ts,selectChild:Mt.selectChild,selectChildren:Mt.selectChildren,filter:bs,merge:Ss,selection:Is,transition:qs,call:Mt.call,nodes:Mt.nodes,node:Mt.node,size:Mt.size,empty:Mt.empty,each:Mt.each,on:Ms,attr:ws,attrTween:As,style:zs,styleTween:Ps,text:Rs,textTween:ks,remove:Ns,tween:ys,delay:Es,duration:Fs,ease:_s,easeVarying:Cs,end:Ls,[Symbol.iterator]:Mt[Symbol.iterator]};function Gn(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var E0={time:null,delay:0,duration:250,ease:Gn};function F0(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function $s(e){var t,r;e instanceof Je?(t=e._id,e=e._name):(t=Hn(),(r=E0).time=Qr(),e=e==null?null:e+"");for(var n=this._groups,i=n.length,o=0;o<i;++o)for(var a=n[o],u=a.length,f,s=0;s<u;++s)(f=a[s])&&Rt(f,e,t,s,a,r||F0(f,t));return new Je(n,this._parents,e,t)}bt.prototype.interrupt=Ds;bt.prototype.transition=$s;var Zn=e=>()=>e;function eo(e,{sourceEvent:t,target:r,selection:n,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},selection:{value:n,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Vs(e){e.stopImmediatePropagation()}function Wn(e){e.preventDefault(),e.stopImmediatePropagation()}var Hs={name:"drag"},to={name:"space"},hr={name:"handle"},mr={name:"center"},{abs:Gs,max:Ge,min:Ze}=Math;function Zs(e){return[+e[0],+e[1]]}function oo(e){return[Zs(e[0]),Zs(e[1])]}var ro={name:"x",handles:["w","e"].map(jr),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},no={name:"y",handles:["n","s"].map(jr),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},_0={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(jr),input:function(e){return e==null?null:oo(e)},output:function(e){return e}},Nt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ws={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Xs={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},C0={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},b0={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function jr(e){return{type:e}}function S0(e){return!e.ctrlKey&&!e.button}function M0(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function N0(){return navigator.maxTouchPoints||"ontouchstart"in this}function io(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function B0(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function ao(){return T0(_0)}function T0(e){var t=M0,r=S0,n=N0,i=!0,o=Pr("start","brush","end"),a=6,u;function f(v){var y=v.property("__brush",h).selectAll(".overlay").data([jr("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Nt.overlay).merge(y).each(function(){var g=io(this).extent;rt(this).attr("x",g[0][0]).attr("y",g[0][1]).attr("width",g[1][0]-g[0][0]).attr("height",g[1][1]-g[0][1])}),v.selectAll(".selection").data([jr("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Nt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var A=v.selectAll(".handle").data(e.handles,function(g){return g.type});A.exit().remove(),A.enter().append("rect").attr("class",function(g){return"handle handle--"+g.type}).attr("cursor",function(g){return Nt[g.type]}),v.each(s).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",p).filter(n).on("touchstart.brush",p).on("touchmove.brush",m).on("touchend.brush touchcancel.brush",d).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}f.move=function(v,y,A){v.tween?v.on("start.brush",function(g){c(this,arguments).beforestart().start(g)}).on("interrupt.brush end.brush",function(g){c(this,arguments).end(g)}).tween("brush",function(){var g=this,E=g.__brush,D=c(g,arguments),w=E.selection,_=e.input(typeof y=="function"?y.apply(this,arguments):y,E.extent),x=St(w,_);function S(b){E.selection=b===1&&_===null?null:x(b),s.call(g),D.brush()}return w!==null&&_!==null?S:S(1)}):v.each(function(){var g=this,E=arguments,D=g.__brush,w=e.input(typeof y=="function"?y.apply(g,E):y,D.extent),_=c(g,E).beforestart();er(g),D.selection=w===null?null:w,s.call(g),_.start(A).brush(A).end(A)})},f.clear=function(v,y){f.move(v,null,y)};function s(){var v=rt(this),y=io(this).selection;y?(v.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),v.selectAll(".handle").style("display",null).attr("x",function(A){return A.type[A.type.length-1]==="e"?y[1][0]-a/2:y[0][0]-a/2}).attr("y",function(A){return A.type[0]==="s"?y[1][1]-a/2:y[0][1]-a/2}).attr("width",function(A){return A.type==="n"||A.type==="s"?y[1][0]-y[0][0]+a:a}).attr("height",function(A){return A.type==="e"||A.type==="w"?y[1][1]-y[0][1]+a:a})):v.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(v,y,A){var g=v.__brush.emitter;return g&&(!A||!g.clean)?g:new l(v,y,A)}function l(v,y,A){this.that=v,this.args=y,this.state=v.__brush,this.active=0,this.clean=A}l.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(v,y){return this.starting?(this.starting=!1,this.emit("start",v,y)):this.emit("brush",v),this},brush:function(v,y){return this.emit("brush",v,y),this},end:function(v,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",v,y)),this},emit:function(v,y,A){var g=rt(this.that).datum();o.call(v,this.that,new eo(v,{sourceEvent:y,target:f,selection:e.output(this.state.selection),mode:A,dispatch:o}),g)}};function p(v){if(u&&!v.touches||!r.apply(this,arguments))return;var y=this,A=v.target.__data__.type,g=(i&&v.metaKey?A="overlay":A)==="selection"?Hs:i&&v.altKey?mr:hr,E=e===no?null:C0[A],D=e===ro?null:b0[A],w=io(y),_=w.extent,x=w.selection,S=_[0][0],b,C,T=_[0][1],k,O,L=_[1][0],N,G,Z=_[1][1],$,Q,te=0,j=0,fe,Ee=E&&D&&i&&v.shiftKey,ye,ve,oe=Array.from(v.touches||[v],re=>{let _e=re.identifier;return re=Fn(re,y),re.point0=re.slice(),re.identifier=_e,re});er(y);var Te=c(y,arguments,!0).beforestart();if(A==="overlay"){x&&(fe=!0);let re=[oe[0],oe[1]||oe[0]];w.selection=x=[[b=e===no?S:Ze(re[0][0],re[1][0]),k=e===ro?T:Ze(re[0][1],re[1][1])],[N=e===no?L:Ge(re[0][0],re[1][0]),$=e===ro?Z:Ge(re[0][1],re[1][1])]],oe.length>1&&se(v)}else b=x[0][0],k=x[0][1],N=x[1][0],$=x[1][1];C=b,O=k,G=N,Q=$;var Fe=rt(y).attr("pointer-events","none"),he=Fe.selectAll(".overlay").attr("cursor",Nt[A]);if(v.touches)Te.moved=Ie,Te.ended=Be;else{var Qe=rt(v.view).on("mousemove.brush",Ie,!0).on("mouseup.brush",Be,!0);i&&Qe.on("keydown.brush",ke,!0).on("keyup.brush",ct,!0),$i(v.view)}s.call(y),Te.start(v,g.name);function Ie(re){for(let _e of re.changedTouches||[re])for(let lt of oe)lt.identifier===_e.identifier&&(lt.cur=Fn(_e,y));if(Ee&&!ye&&!ve&&oe.length===1){let _e=oe[0];Gs(_e.cur[0]-_e[0])>Gs(_e.cur[1]-_e[1])?ve=!0:ye=!0}for(let _e of oe)_e.cur&&(_e[0]=_e.cur[0],_e[1]=_e.cur[1]);fe=!0,Wn(re),se(re)}function se(re){let _e=oe[0],lt=_e.point0;var ut;switch(te=_e[0]-lt[0],j=_e[1]-lt[1],g){case to:case Hs:{E&&(te=Ge(S-b,Ze(L-N,te)),C=b+te,G=N+te),D&&(j=Ge(T-k,Ze(Z-$,j)),O=k+j,Q=$+j);break}case hr:{oe[1]?(E&&(C=Ge(S,Ze(L,oe[0][0])),G=Ge(S,Ze(L,oe[1][0])),E=1),D&&(O=Ge(T,Ze(Z,oe[0][1])),Q=Ge(T,Ze(Z,oe[1][1])),D=1)):(E<0?(te=Ge(S-b,Ze(L-b,te)),C=b+te,G=N):E>0&&(te=Ge(S-N,Ze(L-N,te)),C=b,G=N+te),D<0?(j=Ge(T-k,Ze(Z-k,j)),O=k+j,Q=$):D>0&&(j=Ge(T-$,Ze(Z-$,j)),O=k,Q=$+j));break}case mr:{E&&(C=Ge(S,Ze(L,b-te*E)),G=Ge(S,Ze(L,N+te*E))),D&&(O=Ge(T,Ze(Z,k-j*D)),Q=Ge(T,Ze(Z,$+j*D)));break}}G<C&&(E*=-1,ut=b,b=N,N=ut,ut=C,C=G,G=ut,A in Ws&&he.attr("cursor",Nt[A=Ws[A]])),Q<O&&(D*=-1,ut=k,k=$,$=ut,ut=O,O=Q,Q=ut,A in Xs&&he.attr("cursor",Nt[A=Xs[A]])),w.selection&&(x=w.selection),ye&&(C=x[0][0],G=x[1][0]),ve&&(O=x[0][1],Q=x[1][1]),(x[0][0]!==C||x[0][1]!==O||x[1][0]!==G||x[1][1]!==Q)&&(w.selection=[[C,O],[G,Q]],s.call(y),Te.brush(re,g.name))}function Be(re){if(Vs(re),re.touches){if(re.touches.length)return;u&&clearTimeout(u),u=setTimeout(function(){u=null},500)}else Vi(re.view,fe),Qe.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Fe.attr("pointer-events","all"),he.attr("cursor",Nt.overlay),w.selection&&(x=w.selection),B0(x)&&(w.selection=null,s.call(y)),Te.end(re,g.name)}function ke(re){switch(re.keyCode){case 16:{Ee=E&&D;break}case 18:{g===hr&&(E&&(N=G-te*E,b=C+te*E),D&&($=Q-j*D,k=O+j*D),g=mr,se(re));break}case 32:{(g===hr||g===mr)&&(E<0?N=G-te:E>0&&(b=C-te),D<0?$=Q-j:D>0&&(k=O-j),g=to,he.attr("cursor",Nt.selection),se(re));break}default:return}Wn(re)}function ct(re){switch(re.keyCode){case 16:{Ee&&(ye=ve=Ee=!1,se(re));break}case 18:{g===mr&&(E<0?N=G:E>0&&(b=C),D<0?$=Q:D>0&&(k=O),g=hr,se(re));break}case 32:{g===to&&(re.altKey?(E&&(N=G-te*E,b=C+te*E),D&&($=Q-j*D,k=O+j*D),g=mr):(E<0?N=G:E>0&&(b=C),D<0?$=Q:D>0&&(k=O),g=hr),he.attr("cursor",Nt[A]),se(re));break}default:return}Wn(re)}}function m(v){c(this,arguments).moved(v)}function d(v){c(this,arguments).ended(v)}function h(){var v=this.__brush||{selection:null};return v.extent=oo(t.apply(this,arguments)),v.dim=e,v}return f.extent=function(v){return arguments.length?(t=typeof v=="function"?v:Zn(oo(v)),f):t},f.filter=function(v){return arguments.length?(r=typeof v=="function"?v:Zn(!!v),f):r},f.touchable=function(v){return arguments.length?(n=typeof v=="function"?v:Zn(!!v),f):n},f.handleSize=function(v){return arguments.length?(a=+v,f):a},f.keyModifiers=function(v){return arguments.length?(i=!!v,f):i},f.on=function(){var v=o.on.apply(o,arguments);return v===o?f:v},f}function Ys(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function tr(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Et(e){return e=tr(Math.abs(e)),e?e[1]:NaN}function Qs(e,t){return function(r,n){for(var i=r.length,o=[],a=0,u=e[0],f=0;i>0&&u>0&&(f+u+1>n&&(u=Math.max(1,n-f)),o.push(r.substring(i-=u,i+u)),!((f+=u+1)>n));)u=e[a=(a+1)%e.length];return o.reverse().join(t)}}function Ks(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var I0=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kt(e){if(!(t=I0.exec(e)))throw new Error("invalid format: "+e);var t;return new Xn({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}kt.prototype=Xn.prototype;function Xn(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Xn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Js(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var uo;function js(e,t){var r=tr(e,t);if(!r)return e+"";var n=r[0],i=r[1],o=i-(uo=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=n.length;return o===a?n:o>a?n+new Array(o-a+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+tr(e,Math.max(0,t+o-1))[0]}function so(e,t){var r=tr(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}var fo={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ys,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>so(e*100,t),r:so,s:js,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function co(e){return e}var ef=Array.prototype.map,tf=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function rf(e){var t=e.grouping===void 0||e.thousands===void 0?co:Qs(ef.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?co:Ks(ef.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"\u2212":e.minus+"",f=e.nan===void 0?"NaN":e.nan+"";function s(l){l=kt(l);var p=l.fill,m=l.align,d=l.sign,h=l.symbol,v=l.zero,y=l.width,A=l.comma,g=l.precision,E=l.trim,D=l.type;D==="n"?(A=!0,D="g"):fo[D]||(g===void 0&&(g=12),E=!0,D="g"),(v||p==="0"&&m==="=")&&(v=!0,p="0",m="=");var w=h==="$"?r:h==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",_=h==="$"?n:/[%p]/.test(D)?a:"",x=fo[D],S=/[defgprs%]/.test(D);g=g===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g));function b(C){var T=w,k=_,O,L,N;if(D==="c")k=x(C)+k,C="";else{C=+C;var G=C<0||1/C<0;if(C=isNaN(C)?f:x(Math.abs(C),g),E&&(C=Js(C)),G&&+C==0&&d!=="+"&&(G=!1),T=(G?d==="("?d:u:d==="-"||d==="("?"":d)+T,k=(D==="s"?tf[8+uo/3]:"")+k+(G&&d==="("?")":""),S){for(O=-1,L=C.length;++O<L;)if(N=C.charCodeAt(O),48>N||N>57){k=(N===46?i+C.slice(O+1):C.slice(O))+k,C=C.slice(0,O);break}}}A&&!v&&(C=t(C,1/0));var Z=T.length+C.length+k.length,$=Z<y?new Array(y-Z+1).join(p):"";switch(A&&v&&(C=t($+C,$.length?y-k.length:1/0),$=""),m){case"<":C=T+C+k+$;break;case"=":C=T+$+C+k;break;case"^":C=$.slice(0,Z=$.length>>1)+T+C+k+$.slice(Z);break;default:C=$+T+C+k;break}return o(C)}return b.toString=function(){return l+""},b}function c(l,p){var m=s((l=kt(l),l.type="f",l)),d=Math.max(-8,Math.min(8,Math.floor(Et(p)/3)))*3,h=Math.pow(10,-d),v=tf[8+d/3];return function(y){return m(h*y)+v}}return{format:s,formatPrefix:c}}var Yn,Qn,Kn;lo({thousands:",",grouping:[3],currency:["$",""]});function lo(e){return Yn=rf(e),Qn=Yn.format,Kn=Yn.formatPrefix,Yn}function po(e){return Math.max(0,-Et(Math.abs(e)))}function ho(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Et(t)/3)))*3-Et(Math.abs(e)))}function mo(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Et(t)-Et(e))+1}function dr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}var go=Symbol("implicit");function qt(){var e=new ur,t=[],r=[],n=go;function i(o){let a=e.get(o);if(a===void 0){if(n!==go)return n;e.set(o,a=t.push(o)-1)}return r[a%r.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new ur;for(let a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(r=Array.from(o),i):r.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return qt(t,r).unknown(n)},dr.apply(i,arguments),i}function en(){var e=qt().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,o,a,u=!1,f=0,s=0,c=.5;delete e.unknown;function l(){var p=t().length,m=i<n,d=m?i:n,h=m?n:i;o=(h-d)/Math.max(1,p-f+s*2),u&&(o=Math.floor(o)),d+=(h-d-o*(p-f))*c,a=o*(1-f),u&&(d=Math.round(d),a=Math.round(a));var v=vn(p).map(function(y){return d+o*y});return r(m?v.reverse():v)}return e.domain=function(p){return arguments.length?(t(p),l()):t()},e.range=function(p){return arguments.length?([n,i]=p,n=+n,i=+i,l()):[n,i]},e.rangeRound=function(p){return[n,i]=p,n=+n,i=+i,u=!0,l()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(p){return arguments.length?(u=!!p,l()):u},e.padding=function(p){return arguments.length?(f=Math.min(1,s=+p),l()):f},e.paddingInner=function(p){return arguments.length?(f=Math.min(1,p),l()):f},e.paddingOuter=function(p){return arguments.length?(s=+p,l()):s},e.align=function(p){return arguments.length?(c=Math.max(0,Math.min(1,p)),l()):c},e.copy=function(){return en(t(),[n,i]).round(u).paddingInner(f).paddingOuter(s).align(c)},dr.apply(l(),arguments)}function vo(e){return function(){return e}}function xo(e){return+e}var nf=[0,1];function gr(e){return e}function Do(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:vo(isNaN(t)?NaN:.5)}function O0(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function z0(e,t,r){var n=e[0],i=e[1],o=t[0],a=t[1];return i<n?(n=Do(i,n),o=r(a,o)):(n=Do(n,i),o=r(o,a)),function(u){return o(n(u))}}function P0(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),o=new Array(n),a=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<n;)i[a]=Do(e[a],e[a+1]),o[a]=r(t[a],t[a+1]);return function(u){var f=Ti(e,u,1,n)-1;return o[f](i[f](u))}}function of(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function R0(){var e=nf,t=nf,r=St,n,i,o,a=gr,u,f,s;function c(){var p=Math.min(e.length,t.length);return a!==gr&&(a=O0(e[0],e[p-1])),u=p>2?P0:z0,f=s=null,l}function l(p){return p==null||isNaN(p=+p)?o:(f||(f=u(e.map(n),t,r)))(n(a(p)))}return l.invert=function(p){return a(i((s||(s=u(t,e.map(n),$e)))(p)))},l.domain=function(p){return arguments.length?(e=Array.from(p,xo),c()):e.slice()},l.range=function(p){return arguments.length?(t=Array.from(p),c()):t.slice()},l.rangeRound=function(p){return t=Array.from(p),r=Yi,c()},l.clamp=function(p){return arguments.length?(a=p?!0:gr,c()):a!==gr},l.interpolate=function(p){return arguments.length?(r=p,c()):r},l.unknown=function(p){return arguments.length?(o=p,l):o},function(p,m){return n=p,i=m,c()}}function yo(){return R0()(gr,gr)}function wo(e,t,r,n){var i=Ii(e,t,r),o;switch(n=kt(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(o=ho(i,a))&&(n.precision=o),Kn(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(o=mo(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=o-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(o=po(i))&&(n.precision=o-(n.type==="%")*2);break}}return Qn(n)}function k0(e){var t=e.domain;return e.ticks=function(r){var n=t();return gn(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return wo(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,o=n.length-1,a=n[i],u=n[o],f,s,c=10;for(u<a&&(s=a,a=u,u=s,s=i,i=o,o=s);c-- >0;){if(s=Tr(a,u,r),s===f)return n[i]=a,n[o]=u,t(n);if(s>0)a=Math.floor(a/s)*s,u=Math.ceil(u/s)*s;else if(s<0)a=Math.ceil(a*s)/s,u=Math.floor(u*s)/s;else break;f=s}return e},e}function pt(){var e=yo();return e.copy=function(){return of(e,pt())},dr.apply(e,arguments),k0(e)}function af(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}var Jn=af("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Lt(e,t,r){this.k=e,this.x=t,this.y=r}Lt.prototype={constructor:Lt,scale:function(e){return e===1?this:new Lt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Lt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ao=new Lt(1,0,0);Eo.prototype=Lt.prototype;function Eo(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Ao;return e.__zoom}import yl from"https://cdn.jsdelivr.net/npm/d3-svg-legend@2.25.6/+esm";function uf(e,t,r,n,i){let a={...{title:"",x:"",y:""},...t};return{type:"labs",options:a,render:()=>{a.title&&e.append("text").attr("x",r/2).attr("y",i.top/2).attr("text-anchor","middle").style("font-size","16px").text(a.title),a.x&&e.append("text").attr("x",r/2).attr("y",n-i.bottom/3).attr("text-anchor","middle").text(a.x),a.y&&e.append("text").attr("transform","rotate(-90)").attr("x",-n/2).attr("y",i.left/3).attr("text-anchor","middle").text(a.y)}}}function jn(e,t,r){let n=[];for(let i in e)for(let o in e[i])n.push({_id:`${i}_${e[i][o]}`,x1:t[i][r.x],y1:t[i][r.y],x2:t[e[i][o]][r.x],y2:t[e[i][o]][r.y],_id_source:i,_id_target:e[i][o]});return n}function sf(e,t,r){e.g.append("g").attr("class",e.opts.className),L0(e,t),q0(e,t),U0(e,r),$0(e,r),G0(e)}function q0(e,t){e.g.select(`.${e.opts.className}`).selectAll("rect").data(t,r=>r.bin).enter().append("rect").attr("x",r=>e.xBoxScale(r.bin)).attr("y",r=>e.yBoxScale(r.q3)).attr("width",e.xBoxScale.bandwidth()).attr("height",r=>e.yBoxScale(r.q1)-e.yBoxScale(r.q3)).attr("fill",e.opts.fill).attr("stroke",e.opts.stroke),e.g.select(`.${e.opts.className}`).selectAll("line").data(t,r=>r.id).enter().append("line").attr("x1",r=>e.xBoxScale(r.bin)).attr("y1",r=>e.yBoxScale(r.q2)).attr("x2",r=>e.xBoxScale(r.bin)+e.xBoxScale.bandwidth()).attr("y2",r=>e.yBoxScale(r.q2)).attr("stroke",e.opts.stroke)}function L0(e,t){e.g.select(`.${e.opts.className}`).selectAll(".whisker").data(t,r=>r.bin).enter().append("line").attr("class","whisker").attr("x1",r=>e.xBoxScale(r.bin)+e.xBoxScale.bandwidth()/2).attr("y1",r=>e.yBoxScale(r.lower)).attr("x2",r=>e.xBoxScale(r.bin)+e.xBoxScale.bandwidth()/2).attr("y2",r=>e.yBoxScale(r.upper)).attr("stroke",e.opts.stroke)}function U0(e,t){e.g.select(`.${e.opts.className}`).selectAll("circle").data(t,r=>`${r.center}-${r.neighbor}`).enter().append("circle").attr("cx",r=>e.xBoxScale(r.bin)+e.xBoxScale.bandwidth()/2).attr("cy",r=>e.yBoxScale(r.value)).attr("r",e.opts.outlierRadius).attr("fill",e.opts.fill)}function $0(e,t){let r=ao().on("brush end",n).extent([[e.xBoxScale.range()[0]-15,e.yBoxScale.range()[1]-15],[e.xBoxScale.range()[1]+15,e.yBoxScale.range()[0]+15]]);e.g.select(`.${e.opts.className}`).call(r),e.g.insert("g").attr("id","link_highlight");function n(i){if(!i.selection)return;let[[o,a],[u,f]]=i.selection,s=t.filter(c=>{let l=e.xBoxScale(c.bin)+e.xBoxScale.bandwidth()/2,p=e.yBoxScale(c.value);return o<=l&&l<=u&&a<=p&&p<=f});V0(e,s),H0(e,s)}}function V0(e,t){let r=new Set(t.map(n=>`${n.center}-${n.neighbor}`));e.g.select(`.${e.opts.className}`).selectAll("circle").attr("fill",n=>r.has(`${n.center}-${n.neighbor}`)?e.opts.highlightColor:e.opts.fill)}function H0(e,t){let r=[];for(let o=0;o<t.length;o++)r.push({center:e.dataset[t[o].center],neighbor:e.dataset[t[o].neighbor],center_id:t[o].center,neighbor_id:t[o].neighbor});let n=e.g.select("#link_highlight").selectAll("line").data(r,o=>`${o.center_id}-${o.neighbor_id}`);n.exit().remove(),n.enter().append("line").attr("x1",o=>e.xScale(o.center.embedding_0)).attr("y1",o=>e.yScale(o.center.embedding_1)).attr("x2",o=>e.xScale(o.neighbor.embedding_0)).attr("y2",o=>e.yScale(o.neighbor.embedding_1)).attr("stroke",e.opts.highlightColor).attr("stroke-width",e.opts.strokeWidth).attr("id",o=>`${o.center_id}-${o.neighbor_id}`);let i=new Set(r.flatMap(o=>[o.center_id,o.neighbor_id]));for(let o=0;o<e.opts.otherClasses.length;o++)e.g.select(`.${e.opts.otherClasses[o]}`).selectAll("*").attr("stroke",a=>i.has(a._id)?e.opts.highlightColor:null).attr("stroke-width",a=>i.has(a._id)?e.opts.highlightStrokeWidth:null).attr("fill-opacity",a=>i.has(a._id)?e.opts.opacity:e.opts.backgroundOpacity)}function G0(e){e.g.select(`.${e.opts.className}`).append("g").attr("class","x-axis").attr("transform",`translate(0,${e.yBoxScale.range()[0]})`).call(Or(e.xBoxScale)).selectAll("text").attr("transform","rotate(90)").attr("x",10).attr("y",-e.xBoxScale.bandwidth()*.25).style("text-anchor","start"),e.g.select(`.${e.opts.className}`).append("g").append("g").attr("class","y-axis").attr("transform",`translate(${e.xBoxScale.range()[0]},0)`).call(zr(e.yBoxScale).ticks(5)),e.g.select(`.${e.opts.className}`).append("text").attr("text-anchor","middle").attr("x",(e.xBoxScale.range()[0]+e.xBoxScale.range()[1])/2).attr("y",e.yBoxScale.range()[1]-10).style("fill","#0c0c0c").style("font-size","10px").text("Embedding vs. Original Distance")}function ff(e,t,r,n,i,o,a,u,f){let s=Object.keys(r).map(d=>({_id:d,data:n[parseInt(d)]})),c=[o.invert(e.layerX-f.left),a.invert(e.layerY-f.top)],l=[];for(let d=0;d<s.length;d++)(s[d].data[i.x]-c[0])**2+(s[d].data[i.y]-c[1])**2<u.threshold&&l.push(s[d]._id);let p=jn(Z0(r,l),n,i),m=t.select(`.${u.className}`).selectAll("line").data(p,d=>d._id);m.enter().append("line").attr("x1",d=>o(d.x1)).attr("y1",d=>a(d.y1)).attr("x2",d=>o(d.x2)).attr("y2",d=>a(d.y2)).attr("stroke-width",u.strokeWidth).attr("stroke",u.stroke).attr("opacity",u.opacity);for(let d in u.otherClasses)t.select(`.${u.otherClasses[d]}`).selectAll("*").attr("opacity",h=>Object.keys(r).indexOf(h._id.toString())==-1?u.backgroundOpacity:u.opacity).attr("stroke-width",h=>Object.keys(r).indexOf(h._id.toString())==-1?0:u.highlightStrokeWidth);m.exit().remove()}function Z0(e,t){return Object.keys(e).filter(r=>t.includes(r)).reduce((r,n)=>(r[n]=e[n],r),{})}var Si=Mi(lf(),1);function vr(){return vr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vr.apply(null,arguments)}var _o={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function pf(e,t){if(tn(e,t))return e[t];throw typeof e[t]=="function"&&W0(e,t)?new Error('Cannot access method "'+t+'" as a property'):new Error('No access to property "'+t+'"')}function hf(e,t,r){if(tn(e,t))return e[t]=r,r;throw new Error('No access to property "'+t+'"')}function tn(e,t){return!X0(e)&&!Array.isArray(e)?!1:xr(Y0,t)?!0:!(t in Object.prototype||t in Function.prototype)}function W0(e,t){return e==null||typeof e[t]!="function"||xr(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e)?!1:xr(Q0,t)?!0:!(t in Object.prototype||t in Function.prototype)}function X0(e){return typeof e=="object"&&e&&e.constructor===Object}var Y0={length:!0,name:!0},Q0={toString:!0,valueOf:!0,toLocaleString:!0};var ti=class{constructor(t){this.wrappedObject=t,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(t=>this.has(t)).values()}get(t){return pf(this.wrappedObject,t)}set(t,r){return hf(this.wrappedObject,t,r),this}has(t){return tn(this.wrappedObject,t)&&t in this.wrappedObject}entries(){return K0(this.keys(),t=>[t,this.get(t)])}forEach(t){for(var r of this.keys())t(this.get(r),r,this)}delete(t){tn(this.wrappedObject,t)&&delete this.wrappedObject[t]}clear(){for(var t of this.keys())this.delete(t)}get size(){return Object.keys(this.wrappedObject).length}};function K0(e,t){return{next:()=>{var r=e.next();return r.done?r:{value:t(r.value),done:!1}}}}function ce(e){return typeof e=="number"}function le(e){return!e||typeof e!="object"||typeof e.constructor!="function"?!1:e.isBigNumber===!0&&typeof e.constructor.prototype=="object"&&e.constructor.prototype.isBigNumber===!0||typeof e.constructor.isDecimal=="function"&&e.constructor.isDecimal(e)===!0}function mf(e){return typeof e=="bigint"}function Co(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isComplex===!0||!1}function bo(e){return e&&typeof e=="object"&&Object.getPrototypeOf(e).isFraction===!0||!1}function ri(e){return e&&e.constructor.prototype.isUnit===!0||!1}function je(e){return typeof e=="string"}var Me=Array.isArray;function pe(e){return e&&e.constructor.prototype.isMatrix===!0||!1}function Ut(e){return Array.isArray(e)||pe(e)}function df(e){return e&&e.isDenseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function gf(e){return e&&e.isSparseMatrix&&e.constructor.prototype.isMatrix===!0||!1}function vf(e){return e&&e.constructor.prototype.isRange===!0||!1}function Dr(e){return e&&e.constructor.prototype.isIndex===!0||!1}function xf(e){return typeof e=="boolean"}function Df(e){return e&&e.constructor.prototype.isResultSet===!0||!1}function yf(e){return e&&e.constructor.prototype.isHelp===!0||!1}function wf(e){return typeof e=="function"}function Af(e){return e instanceof Date}function Ef(e){return e instanceof RegExp}function yr(e){return!!(e&&typeof e=="object"&&e.constructor===Object&&!Co(e)&&!bo(e))}function Ff(e){return e?e instanceof Map||e instanceof ti||typeof e.set=="function"&&typeof e.get=="function"&&typeof e.keys=="function"&&typeof e.has=="function":!1}function _f(e){return e===null}function Cf(e){return e===void 0}function bf(e){return e&&e.isAccessorNode===!0&&e.constructor.prototype.isNode===!0||!1}function Sf(e){return e&&e.isArrayNode===!0&&e.constructor.prototype.isNode===!0||!1}function Mf(e){return e&&e.isAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function Nf(e){return e&&e.isBlockNode===!0&&e.constructor.prototype.isNode===!0||!1}function Bf(e){return e&&e.isConditionalNode===!0&&e.constructor.prototype.isNode===!0||!1}function Tf(e){return e&&e.isConstantNode===!0&&e.constructor.prototype.isNode===!0||!1}function If(e){return e&&e.isFunctionAssignmentNode===!0&&e.constructor.prototype.isNode===!0||!1}function Of(e){return e&&e.isFunctionNode===!0&&e.constructor.prototype.isNode===!0||!1}function zf(e){return e&&e.isIndexNode===!0&&e.constructor.prototype.isNode===!0||!1}function Pf(e){return e&&e.isNode===!0&&e.constructor.prototype.isNode===!0||!1}function Rf(e){return e&&e.isObjectNode===!0&&e.constructor.prototype.isNode===!0||!1}function kf(e){return e&&e.isOperatorNode===!0&&e.constructor.prototype.isNode===!0||!1}function qf(e){return e&&e.isParenthesisNode===!0&&e.constructor.prototype.isNode===!0||!1}function Lf(e){return e&&e.isRangeNode===!0&&e.constructor.prototype.isNode===!0||!1}function Uf(e){return e&&e.isRelationalNode===!0&&e.constructor.prototype.isNode===!0||!1}function $f(e){return e&&e.isSymbolNode===!0&&e.constructor.prototype.isNode===!0||!1}function Vf(e){return e&&e.constructor.prototype.isChain===!0||!1}function st(e){var t=typeof e;return t==="object"?e===null?"null":le(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}function xe(e){var t=typeof e;if(t==="number"||t==="bigint"||t==="string"||t==="boolean"||e===null||e===void 0)return e;if(typeof e.clone=="function")return e.clone();if(Array.isArray(e))return e.map(function(r){return xe(r)});if(e instanceof Date)return new Date(e.valueOf());if(le(e))return e;if(yr(e))return J0(e,xe);if(t==="function")return e;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function J0(e,t){var r={};for(var n in e)xr(e,n)&&(r[n]=t(e[n]));return r}function Hf(e,t){for(var r in t)xr(t,r)&&(e[r]=t[r]);return e}function ht(e,t){var r,n,i;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;n++)if(!ht(e[n],t[n]))return!1;return!0}else{if(typeof e=="function")return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(r in e)if(!(r in t)||!ht(e[r],t[r]))return!1;for(r in t)if(!(r in e))return!1;return!0}else return e===t}}function xr(e,t){return e&&Object.hasOwnProperty.call(e,t)}function Gf(e,t){for(var r={},n=0;n<t.length;n++){var i=t[n],o=e[i];o!==void 0&&(r[i]=o)}return r}var Zf=["Matrix","Array"],Wf=["number","BigNumber","Fraction"];var rr=function(t){if(t)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(_o)};vr(rr,_o,{MATRIX_OPTIONS:Zf,NUMBER_OPTIONS:Wf});var Io=Mi(No(),1);function V(e,t,r,n){function i(o){var a=Gf(o,t.map(tm));return j0(e,t,o),r(a)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),n&&(i.meta=n),i}function j0(e,t,r){var n=t.filter(o=>!em(o)).every(o=>r[o]!==void 0);if(!n){var i=t.filter(o=>r[o]===void 0);throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(i.map(o=>'"'.concat(o,'"')).join(", "),"."))}}function em(e){return e&&e[0]==="?"}function tm(e){return e&&e[0]==="?"?e.slice(1):e}function ue(e){return typeof e=="boolean"?!0:isFinite(e)?e===Math.round(e):!1}var Qf=Math.sign||function(e){return e>0?1:e<0?-1:0},Kf=Math.log2||function(t){return Math.log(t)/Math.LN2},Jf=Math.log10||function(t){return Math.log(t)/Math.LN10},jf=Math.log1p||function(e){return Math.log(e+1)},ec=Math.cbrt||function(t){if(t===0)return t;var r=t<0,n;return r&&(t=-t),isFinite(t)?(n=Math.exp(Math.log(t)/3),n=(t/(n*n)+2*n)/3):n=t,r?-n:n},tc=Math.expm1||function(t){return t>=2e-4||t<=-2e-4?Math.exp(t)-1:t+t*t/2+t*t*t/6};function Bo(e,t,r){var n={2:"0b",8:"0o",16:"0x"},i=n[t],o="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!ue(r))throw new Error("size must be an integer");if(e>2**(r-1)-1||e<-(2**(r-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!ue(e))throw new Error("Value must be an integer");e<0&&(e=e+2**r),o="i".concat(r)}var a="";return e<0&&(e=-e,a="-"),"".concat(a).concat(i).concat(e.toString(t)).concat(o)}function rn(e,t){if(typeof t=="function")return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:r,precision:n,wordSize:i}=To(t);switch(r){case"fixed":return rc(e,n);case"exponential":return nc(e,n);case"engineering":return rm(e,n);case"bin":return Bo(e,2,i);case"oct":return Bo(e,8,i);case"hex":return Bo(e,16,i);case"auto":return nm(e,n,t).replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],a=arguments[4];return o!=="."?o+a:a});default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function To(e){var t="auto",r,n;if(e!==void 0)if(ce(e))r=e;else if(le(e))r=e.toNumber();else if(yr(e))e.precision!==void 0&&(r=Xf(e.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),e.wordSize!==void 0&&(n=Xf(e.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),e.notation&&(t=e.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:t,precision:r,wordSize:n}}function ni(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var r=t[1],n=t[2],i=parseFloat(t[4]||"0"),o=n.indexOf(".");i+=o!==-1?o-1:n.length-1;var a=n.replace(".","").replace(/^0*/,function(u){return i-=u.length,""}).replace(/0*$/,"").split("").map(function(u){return parseInt(u)});return a.length===0&&(a.push(0),i++),{sign:r,coefficients:a,exponent:i}}function rm(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=ni(e),n=ii(r,t),i=n.exponent,o=n.coefficients,a=i%3===0?i:i<0?i-3-i%3:i-i%3;if(ce(t))for(;t>o.length||i-a+1>o.length;)o.push(0);else for(var u=Math.abs(i-a)-(o.length-1),f=0;f<u;f++)o.push(0);for(var s=Math.abs(i-a),c=1;s>0;)c++,s--;var l=o.slice(c).join(""),p=ce(t)&&l.length||l.match(/[1-9]/)?"."+l:"",m=o.slice(0,c).join("")+p+"e"+(i>=0?"+":"")+a.toString();return n.sign+m}function rc(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=ni(e),n=typeof t=="number"?ii(r,r.exponent+1+t):r,i=n.coefficients,o=n.exponent+1,a=o+(t||0);return i.length<a&&(i=i.concat(wr(a-i.length))),o<0&&(i=wr(-o+1).concat(i),o=1),o<i.length&&i.splice(o,0,o===0?"0.":"."),n.sign+i.join("")}function nc(e,t){if(isNaN(e)||!isFinite(e))return String(e);var r=ni(e),n=t?ii(r,t):r,i=n.coefficients,o=n.exponent;i.length<t&&(i=i.concat(wr(t-i.length)));var a=i.shift();return n.sign+a+(i.length>0?"."+i.join(""):"")+"e"+(o>=0?"+":"")+o}function nm(e,t,r){if(isNaN(e)||!isFinite(e))return String(e);var n=Yf(r?.lowerExp,-3),i=Yf(r?.upperExp,5),o=ni(e),a=t?ii(o,t):o;if(a.exponent<n||a.exponent>=i)return nc(e,t);var u=a.coefficients,f=a.exponent;u.length<t&&(u=u.concat(wr(t-u.length))),u=u.concat(wr(f-u.length+1+(u.length<t?t-u.length:0))),u=wr(-f).concat(u);var s=f>0?f:0;return s<u.length-1&&u.splice(s+1,0,"."),a.sign+u.join("")}function ii(e,t){for(var r={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},n=r.coefficients;t<=0;)n.unshift(0),r.exponent++,t++;if(n.length>t){var i=n.splice(t,n.length-t);if(i[0]>=5){var o=t-1;for(n[o]++;n[o]===10;)n.pop(),o===0&&(n.unshift(0),r.exponent++,o++),o--,n[o]++}}return r}function wr(e){for(var t=[],r=0;r<e;r++)t.push(0);return t}function ic(e){return e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function Ar(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(e)||isNaN(t)?!1:!isFinite(e)||!isFinite(t)?e===t:e===t?!0:Math.abs(e-t)<=Math.max(r*Math.max(Math.abs(e),Math.abs(t)),n)}function Xf(e,t){if(ce(e))return e;if(le(e))return e.toNumber();t()}function Yf(e,t){return ce(e)?e:le(e)?e.toNumber():t}var oc=function(){return oc=Io.default.create,Io.default},im=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Oo=V("typed",im,function(t){var{BigNumber:r,Complex:n,DenseMatrix:i,Fraction:o}=t,a=oc();return a.clear(),a.addTypes([{name:"number",test:ce},{name:"Complex",test:Co},{name:"BigNumber",test:le},{name:"bigint",test:mf},{name:"Fraction",test:bo},{name:"Unit",test:ri},{name:"identifier",test:u=>je&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(u)},{name:"string",test:je},{name:"Chain",test:Vf},{name:"Array",test:Me},{name:"Matrix",test:pe},{name:"DenseMatrix",test:df},{name:"SparseMatrix",test:gf},{name:"Range",test:vf},{name:"Index",test:Dr},{name:"boolean",test:xf},{name:"ResultSet",test:Df},{name:"Help",test:yf},{name:"function",test:wf},{name:"Date",test:Af},{name:"RegExp",test:Ef},{name:"null",test:_f},{name:"undefined",test:Cf},{name:"AccessorNode",test:bf},{name:"ArrayNode",test:Sf},{name:"AssignmentNode",test:Mf},{name:"BlockNode",test:Nf},{name:"ConditionalNode",test:Bf},{name:"ConstantNode",test:Tf},{name:"FunctionNode",test:Of},{name:"FunctionAssignmentNode",test:If},{name:"IndexNode",test:zf},{name:"Node",test:Pf},{name:"ObjectNode",test:Rf},{name:"OperatorNode",test:kf},{name:"ParenthesisNode",test:qf},{name:"RangeNode",test:Lf},{name:"RelationalNode",test:Uf},{name:"SymbolNode",test:$f},{name:"Map",test:Ff},{name:"Object",test:yr}]),a.addConversions([{from:"number",to:"BigNumber",convert:function(f){if(r||oi(f),ic(f)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+f+"). Use function bignumber(x) to convert to BigNumber.");return new r(f)}},{from:"number",to:"Complex",convert:function(f){return n||ai(f),new n(f,0)}},{from:"BigNumber",to:"Complex",convert:function(f){return n||ai(f),new n(f.toNumber(),0)}},{from:"bigint",to:"number",convert:function(f){if(f>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+f+")");return Number(f)}},{from:"bigint",to:"BigNumber",convert:function(f){return r||oi(f),new r(f.toString())}},{from:"bigint",to:"Fraction",convert:function(f){return o||ui(f),new o(f)}},{from:"Fraction",to:"BigNumber",convert:function(f){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(f){return n||ai(f),new n(f.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(f){o||ui(f);var s=new o(f);if(s.valueOf()!==f)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+f+"). Use function fraction(x) to convert to Fraction.");return s}},{from:"string",to:"number",convert:function(f){var s=Number(f);if(isNaN(s))throw new Error('Cannot convert "'+f+'" to a number');return s}},{from:"string",to:"BigNumber",convert:function(f){r||oi(f);try{return new r(f)}catch{throw new Error('Cannot convert "'+f+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(f){try{return BigInt(f)}catch{throw new Error('Cannot convert "'+f+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(f){o||ui(f);try{return new o(f)}catch{throw new Error('Cannot convert "'+f+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(f){n||ai(f);try{return new n(f)}catch{throw new Error('Cannot convert "'+f+'" to Complex')}}},{from:"boolean",to:"number",convert:function(f){return+f}},{from:"boolean",to:"BigNumber",convert:function(f){return r||oi(f),new r(+f)}},{from:"boolean",to:"bigint",convert:function(f){return BigInt(+f)}},{from:"boolean",to:"Fraction",convert:function(f){return o||ui(f),new o(+f)}},{from:"boolean",to:"string",convert:function(f){return String(f)}},{from:"Array",to:"Matrix",convert:function(f){return i||om(),new i(f)}},{from:"Matrix",to:"Array",convert:function(f){return f.valueOf()}}]),a.onMismatch=(u,f,s)=>{var c=a.createError(u,f,s);if(["wrongType","mismatch"].includes(c.data.category)&&f.length===1&&Ut(f[0])&&s.some(p=>!p.params.includes(","))){var l=new TypeError("Function '".concat(u,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(u,")'."));throw l.data=c.data,l}throw c},a.onMismatch=(u,f,s)=>{var c=a.createError(u,f,s);if(["wrongType","mismatch"].includes(c.data.category)&&f.length===1&&Ut(f[0])&&s.some(p=>!p.params.includes(","))){var l=new TypeError("Function '".concat(u,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(u,")'."));throw l.data=c.data,l}throw c},a});function oi(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function ai(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function om(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function ui(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}var Er=9e15,Gt=1e9,zo="0123456789abcdef",ci="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",li="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Po={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Er,maxE:Er,crypto:!1},fc,Bt,ne=!0,hi="[DecimalError] ",Ht=hi+"Invalid argument: ",cc=hi+"Precision limit exceeded",lc=hi+"crypto unavailable",pc="[object Decimal]",We=Math.floor,Pe=Math.pow,am=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,um=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,sm=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,hc=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,yt=1e7,ee=7,fm=9007199254740991,cm=ci.length-1,Ro=li.length-1,R={toStringTag:pc};R.absoluteValue=R.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),J(e)};R.ceil=function(){return J(new this.constructor(this),this.e+1,2)};R.clampedTo=R.clamp=function(e,t){var r,n=this,i=n.constructor;if(e=new i(e),t=new i(t),!e.s||!t.s)return new i(NaN);if(e.gt(t))throw Error(Ht+t);return r=n.cmp(e),r<0?e:n.cmp(t)>0?t:new i(n)};R.comparedTo=R.cmp=function(e){var t,r,n,i,o=this,a=o.d,u=(e=new o.constructor(e)).d,f=o.s,s=e.s;if(!a||!u)return!f||!s?NaN:f!==s?f:a===u?0:!a^f<0?1:-1;if(!a[0]||!u[0])return a[0]?f:u[0]?-s:0;if(f!==s)return f;if(o.e!==e.e)return o.e>e.e^f<0?1:-1;for(n=a.length,i=u.length,t=0,r=n<i?n:i;t<r;++t)if(a[t]!==u[t])return a[t]>u[t]^f<0?1:-1;return n===i?0:n>i^f<0?1:-1};R.cosine=R.cos=function(){var e,t,r=this,n=r.constructor;return r.d?r.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+ee,n.rounding=1,r=lm(n,xc(n,r)),n.precision=e,n.rounding=t,J(Bt==2||Bt==3?r.neg():r,e,t,!0)):new n(1):new n(NaN)};R.cubeRoot=R.cbrt=function(){var e,t,r,n,i,o,a,u,f,s,c=this,l=c.constructor;if(!c.isFinite()||c.isZero())return new l(c);for(ne=!1,o=c.s*Pe(c.s*c,1/3),!o||Math.abs(o)==1/0?(r=He(c.d),e=c.e,(o=(e-r.length+1)%3)&&(r+=o==1||o==-2?"0":"00"),o=Pe(r,1/3),e=We((e+1)/3)-(e%3==(e<0?-1:2)),o==1/0?r="5e"+e:(r=o.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),n=new l(r),n.s=c.s):n=new l(o.toString()),a=(e=l.precision)+3;;)if(u=n,f=u.times(u).times(u),s=f.plus(c),n=De(s.plus(c).times(u),s.plus(f),a+2,1),He(u.d).slice(0,a)===(r=He(n.d)).slice(0,a))if(r=r.slice(a-3,a+1),r=="9999"||!i&&r=="4999"){if(!i&&(J(u,e+1,0),u.times(u).times(u).eq(c))){n=u;break}a+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(J(n,e+1,1),t=!n.times(n).times(n).eq(c));break}return ne=!0,J(n,e,l.rounding,t)};R.decimalPlaces=R.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-We(this.e/ee))*ee,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};R.dividedBy=R.div=function(e){return De(this,new this.constructor(e))};R.dividedToIntegerBy=R.divToInt=function(e){var t=this,r=t.constructor;return J(De(t,new r(e),0,1,1),r.precision,r.rounding)};R.equals=R.eq=function(e){return this.cmp(e)===0};R.floor=function(){return J(new this.constructor(this),this.e+1,3)};R.greaterThan=R.gt=function(e){return this.cmp(e)>0};R.greaterThanOrEqualTo=R.gte=function(e){var t=this.cmp(e);return t==1||t===0};R.hyperbolicCosine=R.cosh=function(){var e,t,r,n,i,o=this,a=o.constructor,u=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return u;r=a.precision,n=a.rounding,a.precision=r+Math.max(o.e,o.sd())+4,a.rounding=1,i=o.d.length,i<32?(e=Math.ceil(i/3),t=(1/di(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),o=Fr(a,1,o.times(t),new a(1),!0);for(var f,s=e,c=new a(8);s--;)f=o.times(o),o=u.minus(f.times(c.minus(f.times(c))));return J(o,a.precision=r,a.rounding=n,!0)};R.hyperbolicSine=R.sinh=function(){var e,t,r,n,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.precision,r=o.rounding,o.precision=t+Math.max(i.e,i.sd())+4,o.rounding=1,n=i.d.length,n<3)i=Fr(o,2,i,i,!0);else{e=1.4*Math.sqrt(n),e=e>16?16:e|0,i=i.times(1/di(5,e)),i=Fr(o,2,i,i,!0);for(var a,u=new o(5),f=new o(16),s=new o(20);e--;)a=i.times(i),i=i.times(u.plus(a.times(f.times(a).plus(s))))}return o.precision=t,o.rounding=r,J(i,t,r,!0)};R.hyperbolicTangent=R.tanh=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,De(r.sinh(),r.cosh(),n.precision=e,n.rounding=t)):new n(r.s)};R.inverseCosine=R.acos=function(){var e=this,t=e.constructor,r=e.abs().cmp(1),n=t.precision,i=t.rounding;return r!==-1?r===0?e.isNeg()?Ft(t,n,i):new t(0):new t(NaN):e.isZero()?Ft(t,n+4,i).times(.5):(t.precision=n+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=n,t.rounding=i,e.times(2))};R.inverseHyperbolicCosine=R.acosh=function(){var e,t,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,ne=!1,r=r.times(r).minus(1).sqrt().plus(r),ne=!0,n.precision=e,n.rounding=t,r.ln()):new n(r)};R.inverseHyperbolicSine=R.asinh=function(){var e,t,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,ne=!1,r=r.times(r).plus(1).sqrt().plus(r),ne=!0,n.precision=e,n.rounding=t,r.ln())};R.inverseHyperbolicTangent=R.atanh=function(){var e,t,r,n,i=this,o=i.constructor;return i.isFinite()?i.e>=0?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=o.precision,t=o.rounding,n=i.sd(),Math.max(n,e)<2*-i.e-1?J(new o(i),e,t,!0):(o.precision=r=n-i.e,i=De(i.plus(1),new o(1).minus(i),r+e,1),o.precision=e+4,o.rounding=1,i=i.ln(),o.precision=e,o.rounding=t,i.times(.5))):new o(NaN)};R.inverseSine=R.asin=function(){var e,t,r,n,i=this,o=i.constructor;return i.isZero()?new o(i):(t=i.abs().cmp(1),r=o.precision,n=o.rounding,t!==-1?t===0?(e=Ft(o,r+4,n).times(.5),e.s=i.s,e):new o(NaN):(o.precision=r+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=r,o.rounding=n,i.times(2)))};R.inverseTangent=R.atan=function(){var e,t,r,n,i,o,a,u,f,s=this,c=s.constructor,l=c.precision,p=c.rounding;if(s.isFinite()){if(s.isZero())return new c(s);if(s.abs().eq(1)&&l+4<=Ro)return a=Ft(c,l+4,p).times(.25),a.s=s.s,a}else{if(!s.s)return new c(NaN);if(l+4<=Ro)return a=Ft(c,l+4,p).times(.5),a.s=s.s,a}for(c.precision=u=l+10,c.rounding=1,r=Math.min(28,u/ee+2|0),e=r;e;--e)s=s.div(s.times(s).plus(1).sqrt().plus(1));for(ne=!1,t=Math.ceil(u/ee),n=1,f=s.times(s),a=new c(s),i=s;e!==-1;)if(i=i.times(f),o=a.minus(i.div(n+=2)),i=i.times(f),a=o.plus(i.div(n+=2)),a.d[t]!==void 0)for(e=t;a.d[e]===o.d[e]&&e--;);return r&&(a=a.times(2<<r-1)),ne=!0,J(a,c.precision=l,c.rounding=p,!0)};R.isFinite=function(){return!!this.d};R.isInteger=R.isInt=function(){return!!this.d&&We(this.e/ee)>this.d.length-2};R.isNaN=function(){return!this.s};R.isNegative=R.isNeg=function(){return this.s<0};R.isPositive=R.isPos=function(){return this.s>0};R.isZero=function(){return!!this.d&&this.d[0]===0};R.lessThan=R.lt=function(e){return this.cmp(e)<0};R.lessThanOrEqualTo=R.lte=function(e){return this.cmp(e)<1};R.logarithm=R.log=function(e){var t,r,n,i,o,a,u,f,s=this,c=s.constructor,l=c.precision,p=c.rounding,m=5;if(e==null)e=new c(10),t=!0;else{if(e=new c(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(r=s.d,s.s<0||!r||!r[0]||s.eq(1))return new c(r&&!r[0]?-1/0:s.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)o=!0;else{for(i=r[0];i%10===0;)i/=10;o=i!==1}if(ne=!1,u=l+m,a=Vt(s,u),n=t?pi(c,u+10):Vt(e,u),f=De(a,n,u,1),nn(f.d,i=l,p))do if(u+=10,a=Vt(s,u),n=t?pi(c,u+10):Vt(e,u),f=De(a,n,u,1),!o){+He(f.d).slice(i+1,i+15)+1==1e14&&(f=J(f,l+1,0));break}while(nn(f.d,i+=10,p));return ne=!0,J(f,l,p)};R.minus=R.sub=function(e){var t,r,n,i,o,a,u,f,s,c,l,p,m=this,d=m.constructor;if(e=new d(e),!m.d||!e.d)return!m.s||!e.s?e=new d(NaN):m.d?e.s=-e.s:e=new d(e.d||m.s!==e.s?m:NaN),e;if(m.s!=e.s)return e.s=-e.s,m.plus(e);if(s=m.d,p=e.d,u=d.precision,f=d.rounding,!s[0]||!p[0]){if(p[0])e.s=-e.s;else if(s[0])e=new d(m);else return new d(f===3?-0:0);return ne?J(e,u,f):e}if(r=We(e.e/ee),c=We(m.e/ee),s=s.slice(),o=c-r,o){for(l=o<0,l?(t=s,o=-o,a=p.length):(t=p,r=c,a=s.length),n=Math.max(Math.ceil(u/ee),a)+2,o>n&&(o=n,t.length=1),t.reverse(),n=o;n--;)t.push(0);t.reverse()}else{for(n=s.length,a=p.length,l=n<a,l&&(a=n),n=0;n<a;n++)if(s[n]!=p[n]){l=s[n]<p[n];break}o=0}for(l&&(t=s,s=p,p=t,e.s=-e.s),a=s.length,n=p.length-a;n>0;--n)s[a++]=0;for(n=p.length;n>o;){if(s[--n]<p[n]){for(i=n;i&&s[--i]===0;)s[i]=yt-1;--s[i],s[n]+=yt}s[n]-=p[n]}for(;s[--a]===0;)s.pop();for(;s[0]===0;s.shift())--r;return s[0]?(e.d=s,e.e=mi(s,r),ne?J(e,u,f):e):new d(f===3?-0:0)};R.modulo=R.mod=function(e){var t,r=this,n=r.constructor;return e=new n(e),!r.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||r.d&&!r.d[0]?J(new n(r),n.precision,n.rounding):(ne=!1,n.modulo==9?(t=De(r,e.abs(),0,3,1),t.s*=e.s):t=De(r,e,0,n.modulo,1),t=t.times(e),ne=!0,r.minus(t))};R.naturalExponential=R.exp=function(){return ko(this)};R.naturalLogarithm=R.ln=function(){return Vt(this)};R.negated=R.neg=function(){var e=new this.constructor(this);return e.s=-e.s,J(e)};R.plus=R.add=function(e){var t,r,n,i,o,a,u,f,s,c,l=this,p=l.constructor;if(e=new p(e),!l.d||!e.d)return!l.s||!e.s?e=new p(NaN):l.d||(e=new p(e.d||l.s===e.s?l:NaN)),e;if(l.s!=e.s)return e.s=-e.s,l.minus(e);if(s=l.d,c=e.d,u=p.precision,f=p.rounding,!s[0]||!c[0])return c[0]||(e=new p(l)),ne?J(e,u,f):e;if(o=We(l.e/ee),n=We(e.e/ee),s=s.slice(),i=o-n,i){for(i<0?(r=s,i=-i,a=c.length):(r=c,n=o,a=s.length),o=Math.ceil(u/ee),a=o>a?o+1:a+1,i>a&&(i=a,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(a=s.length,i=c.length,a-i<0&&(i=a,r=c,c=s,s=r),t=0;i;)t=(s[--i]=s[i]+c[i]+t)/yt|0,s[i]%=yt;for(t&&(s.unshift(t),++n),a=s.length;s[--a]==0;)s.pop();return e.d=s,e.e=mi(s,n),ne?J(e,u,f):e};R.precision=R.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ht+e);return r.d?(t=mc(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};R.round=function(){var e=this,t=e.constructor;return J(new t(e),e.e+1,t.rounding)};R.sine=R.sin=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+ee,n.rounding=1,r=hm(n,xc(n,r)),n.precision=e,n.rounding=t,J(Bt>2?r.neg():r,e,t,!0)):new n(NaN)};R.squareRoot=R.sqrt=function(){var e,t,r,n,i,o,a=this,u=a.d,f=a.e,s=a.s,c=a.constructor;if(s!==1||!u||!u[0])return new c(!s||s<0&&(!u||u[0])?NaN:u?a:1/0);for(ne=!1,s=Math.sqrt(+a),s==0||s==1/0?(t=He(u),(t.length+f)%2==0&&(t+="0"),s=Math.sqrt(t),f=We((f+1)/2)-(f<0||f%2),s==1/0?t="5e"+f:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+f),n=new c(t)):n=new c(s.toString()),r=(f=c.precision)+3;;)if(o=n,n=o.plus(De(a,o,r+2,1)).times(.5),He(o.d).slice(0,r)===(t=He(n.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!i&&t=="4999"){if(!i&&(J(o,f+1,0),o.times(o).eq(a))){n=o;break}r+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(J(n,f+1,1),e=!n.times(n).eq(a));break}return ne=!0,J(n,f,c.rounding,e)};R.tangent=R.tan=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,r=r.sin(),r.s=1,r=De(r,new n(1).minus(r.times(r)).sqrt(),e+10,0),n.precision=e,n.rounding=t,J(Bt==2||Bt==4?r.neg():r,e,t,!0)):new n(NaN)};R.times=R.mul=function(e){var t,r,n,i,o,a,u,f,s,c=this,l=c.constructor,p=c.d,m=(e=new l(e)).d;if(e.s*=c.s,!p||!p[0]||!m||!m[0])return new l(!e.s||p&&!p[0]&&!m||m&&!m[0]&&!p?NaN:!p||!m?e.s/0:e.s*0);for(r=We(c.e/ee)+We(e.e/ee),f=p.length,s=m.length,f<s&&(o=p,p=m,m=o,a=f,f=s,s=a),o=[],a=f+s,n=a;n--;)o.push(0);for(n=s;--n>=0;){for(t=0,i=f+n;i>n;)u=o[i]+m[n]*p[i-n-1]+t,o[i--]=u%yt|0,t=u/yt|0;o[i]=(o[i]+t)%yt|0}for(;!o[--a];)o.pop();return t?++r:o.shift(),e.d=o,e.e=mi(o,r),ne?J(e,l.precision,l.rounding):e};R.toBinary=function(e,t){return qo(this,2,e,t)};R.toDecimalPlaces=R.toDP=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(it(e,0,Gt),t===void 0?t=n.rounding:it(t,0,8),J(r,e+r.e+1,t))};R.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=_t(n,!0):(it(e,0,Gt),t===void 0?t=i.rounding:it(t,0,8),n=J(new i(n),e+1,t),r=_t(n,!0,e+1)),n.isNeg()&&!n.isZero()?"-"+r:r};R.toFixed=function(e,t){var r,n,i=this,o=i.constructor;return e===void 0?r=_t(i):(it(e,0,Gt),t===void 0?t=o.rounding:it(t,0,8),n=J(new o(i),e+i.e+1,t),r=_t(n,!1,e+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r};R.toFraction=function(e){var t,r,n,i,o,a,u,f,s,c,l,p,m=this,d=m.d,h=m.constructor;if(!d)return new h(m);if(s=r=new h(1),n=f=new h(0),t=new h(n),o=t.e=mc(d)-m.e-1,a=o%ee,t.d[0]=Pe(10,a<0?ee+a:a),e==null)e=o>0?t:s;else{if(u=new h(e),!u.isInt()||u.lt(s))throw Error(Ht+u);e=u.gt(t)?o>0?t:s:u}for(ne=!1,u=new h(He(d)),c=h.precision,h.precision=o=d.length*ee*2;l=De(u,t,0,1,1),i=r.plus(l.times(n)),i.cmp(e)!=1;)r=n,n=i,i=s,s=f.plus(l.times(i)),f=i,i=t,t=u.minus(l.times(i)),u=i;return i=De(e.minus(r),n,0,1,1),f=f.plus(i.times(s)),r=r.plus(i.times(n)),f.s=s.s=m.s,p=De(s,n,o,1).minus(m).abs().cmp(De(f,r,o,1).minus(m).abs())<1?[s,n]:[f,r],h.precision=c,ne=!0,p};R.toHexadecimal=R.toHex=function(e,t){return qo(this,16,e,t)};R.toNearest=function(e,t){var r=this,n=r.constructor;if(r=new n(r),e==null){if(!r.d)return r;e=new n(1),t=n.rounding}else{if(e=new n(e),t===void 0?t=n.rounding:it(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(ne=!1,r=De(r,e,0,t,1).times(e),ne=!0,J(r)):(e.s=r.s,r=e),r};R.toNumber=function(){return+this};R.toOctal=function(e,t){return qo(this,8,e,t)};R.toPower=R.pow=function(e){var t,r,n,i,o,a,u=this,f=u.constructor,s=+(e=new f(e));if(!u.d||!e.d||!u.d[0]||!e.d[0])return new f(Pe(+u,s));if(u=new f(u),u.eq(1))return u;if(n=f.precision,o=f.rounding,e.eq(1))return J(u,n,o);if(t=We(e.e/ee),t>=e.d.length-1&&(r=s<0?-s:s)<=fm)return i=dc(f,u,r,n),e.s<0?new f(1).div(i):J(i,n,o);if(a=u.s,a<0){if(t<e.d.length-1)return new f(NaN);if((e.d[t]&1)==0&&(a=1),u.e==0&&u.d[0]==1&&u.d.length==1)return u.s=a,u}return r=Pe(+u,s),t=r==0||!isFinite(r)?We(s*(Math.log("0."+He(u.d))/Math.LN10+u.e+1)):new f(r+"").e,t>f.maxE+1||t<f.minE-1?new f(t>0?a/0:0):(ne=!1,f.rounding=u.s=1,r=Math.min(12,(t+"").length),i=ko(e.times(Vt(u,n+r)),n),i.d&&(i=J(i,n+5,1),nn(i.d,n,o)&&(t=n+10,i=J(ko(e.times(Vt(u,t+r)),t),t+5,1),+He(i.d).slice(n+1,n+15)+1==1e14&&(i=J(i,n+1,0)))),i.s=a,ne=!0,f.rounding=o,J(i,n,o))};R.toPrecision=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=_t(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(it(e,1,Gt),t===void 0?t=i.rounding:it(t,0,8),n=J(new i(n),e,t),r=_t(n,e<=n.e||n.e<=i.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+r:r};R.toSignificantDigits=R.toSD=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(it(e,1,Gt),t===void 0?t=n.rounding:it(t,0,8)),J(new n(r),e,t)};R.toString=function(){var e=this,t=e.constructor,r=_t(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};R.truncated=R.trunc=function(){return J(new this.constructor(this),this.e+1,1)};R.valueOf=R.toJSON=function(){var e=this,t=e.constructor,r=_t(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function He(e){var t,r,n,i=e.length-1,o="",a=e[0];if(i>0){for(o+=a,t=1;t<i;t++)n=e[t]+"",r=ee-n.length,r&&(o+=$t(r)),o+=n;a=e[t],n=a+"",r=ee-n.length,r&&(o+=$t(r))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}function it(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ht+e)}function nn(e,t,r,n){var i,o,a,u;for(o=e[0];o>=10;o/=10)--t;return--t<0?(t+=ee,i=0):(i=Math.ceil((t+1)/ee),t%=ee),o=Pe(10,ee-t),u=e[i]%o|0,n==null?t<3?(t==0?u=u/100|0:t==1&&(u=u/10|0),a=r<4&&u==99999||r>3&&u==49999||u==5e4||u==0):a=(r<4&&u+1==o||r>3&&u+1==o/2)&&(e[i+1]/o/100|0)==Pe(10,t-2)-1||(u==o/2||u==0)&&(e[i+1]/o/100|0)==0:t<4?(t==0?u=u/1e3|0:t==1?u=u/100|0:t==2&&(u=u/10|0),a=(n||r<4)&&u==9999||!n&&r>3&&u==4999):a=((n||r<4)&&u+1==o||!n&&r>3&&u+1==o/2)&&(e[i+1]/o/1e3|0)==Pe(10,t-3)-1,a}function si(e,t,r){for(var n,i=[0],o,a=0,u=e.length;a<u;){for(o=i.length;o--;)i[o]*=t;for(i[0]+=zo.indexOf(e.charAt(a++)),n=0;n<i.length;n++)i[n]>r-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function lm(e,t){var r,n,i;if(t.isZero())return t;n=t.d.length,n<32?(r=Math.ceil(n/3),i=(1/di(4,r)).toString()):(r=16,i="2.3283064365386962890625e-10"),e.precision+=r,t=Fr(e,1,t.times(i),new e(1));for(var o=r;o--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=r,t}var De=function(){function e(n,i,o){var a,u=0,f=n.length;for(n=n.slice();f--;)a=n[f]*i+u,n[f]=a%o|0,u=a/o|0;return u&&n.unshift(u),n}function t(n,i,o,a){var u,f;if(o!=a)f=o>a?1:-1;else for(u=f=0;u<o;u++)if(n[u]!=i[u]){f=n[u]>i[u]?1:-1;break}return f}function r(n,i,o,a){for(var u=0;o--;)n[o]-=u,u=n[o]<i[o]?1:0,n[o]=u*a+n[o]-i[o];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,o,a,u,f){var s,c,l,p,m,d,h,v,y,A,g,E,D,w,_,x,S,b,C,T,k=n.constructor,O=n.s==i.s?1:-1,L=n.d,N=i.d;if(!L||!L[0]||!N||!N[0])return new k(!n.s||!i.s||(L?N&&L[0]==N[0]:!N)?NaN:L&&L[0]==0||!N?O*0:O/0);for(f?(m=1,c=n.e-i.e):(f=yt,m=ee,c=We(n.e/m)-We(i.e/m)),C=N.length,S=L.length,y=new k(O),A=y.d=[],l=0;N[l]==(L[l]||0);l++);if(N[l]>(L[l]||0)&&c--,o==null?(w=o=k.precision,a=k.rounding):u?w=o+(n.e-i.e)+1:w=o,w<0)A.push(1),d=!0;else{if(w=w/m+2|0,l=0,C==1){for(p=0,N=N[0],w++;(l<S||p)&&w--;l++)_=p*f+(L[l]||0),A[l]=_/N|0,p=_%N|0;d=p||l<S}else{for(p=f/(N[0]+1)|0,p>1&&(N=e(N,p,f),L=e(L,p,f),C=N.length,S=L.length),x=C,g=L.slice(0,C),E=g.length;E<C;)g[E++]=0;T=N.slice(),T.unshift(0),b=N[0],N[1]>=f/2&&++b;do p=0,s=t(N,g,C,E),s<0?(D=g[0],C!=E&&(D=D*f+(g[1]||0)),p=D/b|0,p>1?(p>=f&&(p=f-1),h=e(N,p,f),v=h.length,E=g.length,s=t(h,g,v,E),s==1&&(p--,r(h,C<v?T:N,v,f))):(p==0&&(s=p=1),h=N.slice()),v=h.length,v<E&&h.unshift(0),r(g,h,E,f),s==-1&&(E=g.length,s=t(N,g,C,E),s<1&&(p++,r(g,C<E?T:N,E,f))),E=g.length):s===0&&(p++,g=[0]),A[l++]=p,s&&g[0]?g[E++]=L[x]||0:(g=[L[x]],E=1);while((x++<S||g[0]!==void 0)&&w--);d=g[0]!==void 0}A[0]||A.shift()}if(m==1)y.e=c,fc=d;else{for(l=1,p=A[0];p>=10;p/=10)l++;y.e=l+c*m-1,J(y,u?o+y.e+1:o,a,d)}return y}}();function J(e,t,r,n){var i,o,a,u,f,s,c,l,p,m=e.constructor;e:if(t!=null){if(l=e.d,!l)return e;for(i=1,u=l[0];u>=10;u/=10)i++;if(o=t-i,o<0)o+=ee,a=t,c=l[p=0],f=c/Pe(10,i-a-1)%10|0;else if(p=Math.ceil((o+1)/ee),u=l.length,p>=u)if(n){for(;u++<=p;)l.push(0);c=f=0,i=1,o%=ee,a=o-ee+1}else break e;else{for(c=u=l[p],i=1;u>=10;u/=10)i++;o%=ee,a=o-ee+i,f=a<0?0:c/Pe(10,i-a-1)%10|0}if(n=n||t<0||l[p+1]!==void 0||(a<0?c:c%Pe(10,i-a-1)),s=r<4?(f||n)&&(r==0||r==(e.s<0?3:2)):f>5||f==5&&(r==4||n||r==6&&(o>0?a>0?c/Pe(10,i-a):0:l[p-1])%10&1||r==(e.s<0?8:7)),t<1||!l[0])return l.length=0,s?(t-=e.e+1,l[0]=Pe(10,(ee-t%ee)%ee),e.e=-t||0):l[0]=e.e=0,e;if(o==0?(l.length=p,u=1,p--):(l.length=p+1,u=Pe(10,ee-o),l[p]=a>0?(c/Pe(10,i-a)%Pe(10,a)|0)*u:0),s)for(;;)if(p==0){for(o=1,a=l[0];a>=10;a/=10)o++;for(a=l[0]+=u,u=1;a>=10;a/=10)u++;o!=u&&(e.e++,l[0]==yt&&(l[0]=1));break}else{if(l[p]+=u,l[p]!=yt)break;l[p--]=0,u=1}for(o=l.length;l[--o]===0;)l.pop()}return ne&&(e.e>m.maxE?(e.d=null,e.e=NaN):e.e<m.minE&&(e.e=0,e.d=[0])),e}function _t(e,t,r){if(!e.isFinite())return vc(e);var n,i=e.e,o=He(e.d),a=o.length;return t?(r&&(n=r-a)>0?o=o.charAt(0)+"."+o.slice(1)+$t(n):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(e.e<0?"e":"e+")+e.e):i<0?(o="0."+$t(-i-1)+o,r&&(n=r-a)>0&&(o+=$t(n))):i>=a?(o+=$t(i+1-a),r&&(n=r-i-1)>0&&(o=o+"."+$t(n))):((n=i+1)<a&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(o+="."),o+=$t(n))),o}function mi(e,t){var r=e[0];for(t*=ee;r>=10;r/=10)t++;return t}function pi(e,t,r){if(t>cm)throw ne=!0,r&&(e.precision=r),Error(cc);return J(new e(ci),t,1,!0)}function Ft(e,t,r){if(t>Ro)throw Error(cc);return J(new e(li),t,r,!0)}function mc(e){var t=e.length-1,r=t*ee+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function $t(e){for(var t="";e--;)t+="0";return t}function dc(e,t,r,n){var i,o=new e(1),a=Math.ceil(n/ee+4);for(ne=!1;;){if(r%2&&(o=o.times(t),uc(o.d,a)&&(i=!0)),r=We(r/2),r===0){r=o.d.length-1,i&&o.d[r]===0&&++o.d[r];break}t=t.times(t),uc(t.d,a)}return ne=!0,o}function ac(e){return e.d[e.d.length-1]&1}function gc(e,t,r){for(var n,i,o=new e(t[0]),a=0;++a<t.length;){if(i=new e(t[a]),!i.s){o=i;break}n=o.cmp(i),(n===r||n===0&&o.s===r)&&(o=i)}return o}function ko(e,t){var r,n,i,o,a,u,f,s=0,c=0,l=0,p=e.constructor,m=p.rounding,d=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(ne=!1,f=d):f=t,u=new p(.03125);e.e>-2;)e=e.times(u),l+=5;for(n=Math.log(Pe(2,l))/Math.LN10*2+5|0,f+=n,r=o=a=new p(1),p.precision=f;;){if(o=J(o.times(e),f,1),r=r.times(++c),u=a.plus(De(o,r,f,1)),He(u.d).slice(0,f)===He(a.d).slice(0,f)){for(i=l;i--;)a=J(a.times(a),f,1);if(t==null)if(s<3&&nn(a.d,f-n,m,s))p.precision=f+=10,r=o=u=new p(1),c=0,s++;else return J(a,p.precision=d,m,ne=!0);else return p.precision=d,a}a=u}}function Vt(e,t){var r,n,i,o,a,u,f,s,c,l,p,m=1,d=10,h=e,v=h.d,y=h.constructor,A=y.rounding,g=y.precision;if(h.s<0||!v||!v[0]||!h.e&&v[0]==1&&v.length==1)return new y(v&&!v[0]?-1/0:h.s!=1?NaN:v?0:h);if(t==null?(ne=!1,c=g):c=t,y.precision=c+=d,r=He(v),n=r.charAt(0),Math.abs(o=h.e)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=He(h.d),n=r.charAt(0),m++;o=h.e,n>1?(h=new y("0."+r),o++):h=new y(n+"."+r.slice(1))}else return s=pi(y,c+2,g).times(o+""),h=Vt(new y(n+"."+r.slice(1)),c-d).plus(s),y.precision=g,t==null?J(h,g,A,ne=!0):h;for(l=h,f=a=h=De(h.minus(1),h.plus(1),c,1),p=J(h.times(h),c,1),i=3;;){if(a=J(a.times(p),c,1),s=f.plus(De(a,new y(i),c,1)),He(s.d).slice(0,c)===He(f.d).slice(0,c))if(f=f.times(2),o!==0&&(f=f.plus(pi(y,c+2,g).times(o+""))),f=De(f,new y(m),c,1),t==null)if(nn(f.d,c-d,A,u))y.precision=c+=d,s=a=h=De(l.minus(1),l.plus(1),c,1),p=J(h.times(h),c,1),i=u=1;else return J(f,y.precision=g,A,ne=!0);else return y.precision=g,f;f=s,i+=2}}function vc(e){return String(e.s*e.s/0)}function fi(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;n++);for(i=t.length;t.charCodeAt(i-1)===48;--i);if(t=t.slice(n,i),t){if(i-=n,e.e=r=r-n-1,e.d=[],n=(r+1)%ee,r<0&&(n+=ee),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=ee;n<i;)e.d.push(+t.slice(n,n+=ee));t=t.slice(n),n=ee-t.length}else n-=i;for(;n--;)t+="0";e.d.push(+t),ne&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function pm(e,t){var r,n,i,o,a,u,f,s,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),hc.test(t))return fi(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(um.test(t))r=16,t=t.toLowerCase();else if(am.test(t))r=2;else if(sm.test(t))r=8;else throw Error(Ht+t);for(o=t.search(/p/i),o>0?(f=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),o=t.indexOf("."),a=o>=0,n=e.constructor,a&&(t=t.replace(".",""),u=t.length,o=u-o,i=dc(n,new n(r),o,o*2)),s=si(t,r,yt),c=s.length-1,o=c;s[o]===0;--o)s.pop();return o<0?new n(e.s*0):(e.e=mi(s,c),e.d=s,ne=!1,a&&(e=De(e,i,u*4)),f&&(e=e.times(Math.abs(f)<54?Pe(2,f):on.pow(2,f))),ne=!0,e)}function hm(e,t){var r,n=t.d.length;if(n<3)return t.isZero()?t:Fr(e,2,t,t);r=1.4*Math.sqrt(n),r=r>16?16:r|0,t=t.times(1/di(5,r)),t=Fr(e,2,t,t);for(var i,o=new e(5),a=new e(16),u=new e(20);r--;)i=t.times(t),t=t.times(o.plus(i.times(a.times(i).minus(u))));return t}function Fr(e,t,r,n,i){var o,a,u,f,s=1,c=e.precision,l=Math.ceil(c/ee);for(ne=!1,f=r.times(r),u=new e(n);;){if(a=De(u.times(f),new e(t++*t++),c,1),u=i?n.plus(a):n.minus(a),n=De(a.times(f),new e(t++*t++),c,1),a=u.plus(n),a.d[l]!==void 0){for(o=l;a.d[o]===u.d[o]&&o--;);if(o==-1)break}o=u,u=n,n=a,a=o,s++}return ne=!0,a.d.length=l+1,a}function di(e,t){for(var r=e;--t;)r*=e;return r}function xc(e,t){var r,n=t.s<0,i=Ft(e,e.precision,1),o=i.times(.5);if(t=t.abs(),t.lte(o))return Bt=n?4:1,t;if(r=t.divToInt(i),r.isZero())Bt=n?3:2;else{if(t=t.minus(r.times(i)),t.lte(o))return Bt=ac(r)?n?2:3:n?4:1,t;Bt=ac(r)?n?1:4:n?3:2}return t.minus(i).abs()}function qo(e,t,r,n){var i,o,a,u,f,s,c,l,p,m=e.constructor,d=r!==void 0;if(d?(it(r,1,Gt),n===void 0?n=m.rounding:it(n,0,8)):(r=m.precision,n=m.rounding),!e.isFinite())c=vc(e);else{for(c=_t(e),a=c.indexOf("."),d?(i=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):i=t,a>=0&&(c=c.replace(".",""),p=new m(1),p.e=c.length-a,p.d=si(_t(p),10,i),p.e=p.d.length),l=si(c,10,i),o=f=l.length;l[--f]==0;)l.pop();if(!l[0])c=d?"0p+0":"0";else{if(a<0?o--:(e=new m(e),e.d=l,e.e=o,e=De(e,p,r,n,0,i),l=e.d,o=e.e,s=fc),a=l[r],u=i/2,s=s||l[r+1]!==void 0,s=n<4?(a!==void 0||s)&&(n===0||n===(e.s<0?3:2)):a>u||a===u&&(n===4||s||n===6&&l[r-1]&1||n===(e.s<0?8:7)),l.length=r,s)for(;++l[--r]>i-1;)l[r]=0,r||(++o,l.unshift(1));for(f=l.length;!l[f-1];--f);for(a=0,c="";a<f;a++)c+=zo.charAt(l[a]);if(d){if(f>1)if(t==16||t==8){for(a=t==16?4:3,--f;f%a;f++)c+="0";for(l=si(c,i,t),f=l.length;!l[f-1];--f);for(a=1,c="1.";a<f;a++)c+=zo.charAt(l[a])}else c=c.charAt(0)+"."+c.slice(1);c=c+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)c="0"+c;c="0."+c}else if(++o>f)for(o-=f;o--;)c+="0";else o<f&&(c=c.slice(0,o)+"."+c.slice(o))}c=(t==16?"0x":t==2?"0b":t==8?"0o":"")+c}return e.s<0?"-"+c:c}function uc(e,t){if(e.length>t)return e.length=t,!0}function mm(e){return new this(e).abs()}function dm(e){return new this(e).acos()}function gm(e){return new this(e).acosh()}function vm(e,t){return new this(e).plus(t)}function xm(e){return new this(e).asin()}function Dm(e){return new this(e).asinh()}function ym(e){return new this(e).atan()}function wm(e){return new this(e).atanh()}function Am(e,t){e=new this(e),t=new this(t);var r,n=this.precision,i=this.rounding,o=n+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=Ft(this,o,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?Ft(this,n,i):new this(0),r.s=e.s):!e.d||t.isZero()?(r=Ft(this,o,1).times(.5),r.s=e.s):t.s<0?(this.precision=o,this.rounding=1,r=this.atan(De(e,t,o,1)),t=Ft(this,o,1),this.precision=n,this.rounding=i,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(De(e,t,o,1)),r}function Em(e){return new this(e).cbrt()}function Fm(e){return J(e=new this(e),e.e+1,2)}function _m(e,t,r){return new this(e).clamp(t,r)}function Cm(e){if(!e||typeof e!="object")throw Error(hi+"Object expected");var t,r,n,i=e.defaults===!0,o=["precision",1,Gt,"rounding",0,8,"toExpNeg",-Er,0,"toExpPos",0,Er,"maxE",0,Er,"minE",-Er,0,"modulo",0,9];for(t=0;t<o.length;t+=3)if(r=o[t],i&&(this[r]=Po[r]),(n=e[r])!==void 0)if(We(n)===n&&n>=o[t+1]&&n<=o[t+2])this[r]=n;else throw Error(Ht+r+": "+n);if(r="crypto",i&&(this[r]=Po[r]),(n=e[r])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(lc);else this[r]=!1;else throw Error(Ht+r+": "+n);return this}function bm(e){return new this(e).cos()}function Sm(e){return new this(e).cosh()}function Dc(e){var t,r,n;function i(o){var a,u,f,s=this;if(!(s instanceof i))return new i(o);if(s.constructor=i,sc(o)){s.s=o.s,ne?!o.d||o.e>i.maxE?(s.e=NaN,s.d=null):o.e<i.minE?(s.e=0,s.d=[0]):(s.e=o.e,s.d=o.d.slice()):(s.e=o.e,s.d=o.d?o.d.slice():o.d);return}if(f=typeof o,f==="number"){if(o===0){s.s=1/o<0?-1:1,s.e=0,s.d=[0];return}if(o<0?(o=-o,s.s=-1):s.s=1,o===~~o&&o<1e7){for(a=0,u=o;u>=10;u/=10)a++;ne?a>i.maxE?(s.e=NaN,s.d=null):a<i.minE?(s.e=0,s.d=[0]):(s.e=a,s.d=[o]):(s.e=a,s.d=[o]);return}if(o*0!==0){o||(s.s=NaN),s.e=NaN,s.d=null;return}return fi(s,o.toString())}if(f==="string")return(u=o.charCodeAt(0))===45?(o=o.slice(1),s.s=-1):(u===43&&(o=o.slice(1)),s.s=1),hc.test(o)?fi(s,o):pm(s,o);if(f==="bigint")return o<0?(o=-o,s.s=-1):s.s=1,fi(s,o.toString());throw Error(Ht+o)}if(i.prototype=R,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Cm,i.clone=Dc,i.isDecimal=sc,i.abs=mm,i.acos=dm,i.acosh=gm,i.add=vm,i.asin=xm,i.asinh=Dm,i.atan=ym,i.atanh=wm,i.atan2=Am,i.cbrt=Em,i.ceil=Fm,i.clamp=_m,i.cos=bm,i.cosh=Sm,i.div=Mm,i.exp=Nm,i.floor=Bm,i.hypot=Tm,i.ln=Im,i.log=Om,i.log10=Pm,i.log2=zm,i.max=Rm,i.min=km,i.mod=qm,i.mul=Lm,i.pow=Um,i.random=$m,i.round=Vm,i.sign=Hm,i.sin=Gm,i.sinh=Zm,i.sqrt=Wm,i.sub=Xm,i.sum=Ym,i.tan=Qm,i.tanh=Km,i.trunc=Jm,e===void 0&&(e={}),e&&e.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function Mm(e,t){return new this(e).div(t)}function Nm(e){return new this(e).exp()}function Bm(e){return J(e=new this(e),e.e+1,3)}function Tm(){var e,t,r=new this(0);for(ne=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return ne=!0,new this(1/0);r=t}return ne=!0,r.sqrt()}function sc(e){return e instanceof on||e&&e.toStringTag===pc||!1}function Im(e){return new this(e).ln()}function Om(e,t){return new this(e).log(t)}function zm(e){return new this(e).log(2)}function Pm(e){return new this(e).log(10)}function Rm(){return gc(this,arguments,-1)}function km(){return gc(this,arguments,1)}function qm(e,t){return new this(e).mod(t)}function Lm(e,t){return new this(e).mul(t)}function Um(e,t){return new this(e).pow(t)}function $m(e){var t,r,n,i,o=0,a=new this(1),u=[];if(e===void 0?e=this.precision:it(e,1,Gt),n=Math.ceil(e/ee),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));o<n;)i=t[o],i>=429e7?t[o]=crypto.getRandomValues(new Uint32Array(1))[0]:u[o++]=i%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(n*=4);o<n;)i=t[o]+(t[o+1]<<8)+(t[o+2]<<16)+((t[o+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(t,o):(u.push(i%1e7),o+=4);o=n/4}else throw Error(lc);else for(;o<n;)u[o++]=Math.random()*1e7|0;for(n=u[--o],e%=ee,n&&e&&(i=Pe(10,ee-e),u[o]=(n/i|0)*i);u[o]===0;o--)u.pop();if(o<0)r=0,u=[0];else{for(r=-1;u[0]===0;r-=ee)u.shift();for(n=1,i=u[0];i>=10;i/=10)n++;n<ee&&(r-=ee-n)}return a.e=r,a.d=u,a}function Vm(e){return J(e=new this(e),e.e+1,this.rounding)}function Hm(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function Gm(e){return new this(e).sin()}function Zm(e){return new this(e).sinh()}function Wm(e){return new this(e).sqrt()}function Xm(e,t){return new this(e).sub(t)}function Ym(){var e=0,t=arguments,r=new this(t[e]);for(ne=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return ne=!0,J(r,this.precision,this.rounding)}function Qm(e){return new this(e).tan()}function Km(e){return new this(e).tanh()}function Jm(e){return J(e=new this(e),e.e+1,1)}R[Symbol.for("nodejs.util.inspect.custom")]=R.toString;R[Symbol.toStringTag]="Decimal";var on=R.constructor=Dc(Po);ci=new on(ci);li=new on(li);var Lo=on;var jm="BigNumber",ed=["?on","config"],Uo=V(jm,ed,e=>{var{on:t,config:r}=e,n=Lo.clone({precision:r.precision,modulo:Lo.EUCLID});return n.prototype=Object.create(n.prototype),n.prototype.type="BigNumber",n.prototype.isBigNumber=!0,n.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},n.fromJSON=function(i){return new n(i.value)},t&&t("config",function(i,o){i.precision!==o.precision&&n.config({precision:i.precision})}),n},{isClass:!0});var Xe=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:(Math.exp(e)+Math.exp(-e))*.5},mt=Math.sinh||function(e){return Math.abs(e)<1e-9?e:(Math.exp(e)-Math.exp(-e))*.5},td=function(e){let t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;let r=e*e;return r*(r*(r*(r*(r*(r*(r*(r/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},$o=function(e,t){return e=Math.abs(e),t=Math.abs(t),e<t&&([e,t]=[t,e]),e<1e8?Math.sqrt(e*e+t*t):(t/=e,e*Math.sqrt(1+t*t))},_r=function(){throw SyntaxError("Invalid Param")};function Vo(e,t){let r=Math.abs(e),n=Math.abs(t);return e===0?Math.log(n):t===0?Math.log(r):r<3e3&&n<3e3?Math.log(e*e+t*t)*.5:(e=e*.5,t=t*.5,.5*Math.log(e*e+t*t)+Math.LN2)}var rd={re:0,im:0},nr=function(e,t){let r=rd;if(e==null)r.re=r.im=0;else if(t!==void 0)r.re=e,r.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)r.re=e.re,r.im=e.im;else if("abs"in e&&"arg"in e){if(!isFinite(e.abs)&&isFinite(e.arg))return I.INFINITY;r.re=e.abs*Math.cos(e.arg),r.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!isFinite(e.r)&&isFinite(e.phi))return I.INFINITY;r.re=e.r*Math.cos(e.phi),r.im=e.r*Math.sin(e.phi)}else e.length===2?(r.re=e[0],r.im=e[1]):_r();break;case"string":r.im=r.re=0;let n=e.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),i=1,o=0;n===null&&_r();for(let a=0;a<n.length;a++){let u=n[a];u===" "||u==="	"||u===`
`||(u==="+"?i++:u==="-"?o++:u==="i"||u==="I"?(i+o===0&&_r(),n[a+1]!==" "&&!isNaN(n[a+1])?(r.im+=parseFloat((o%2?"-":"")+n[a+1]),a++):r.im+=parseFloat((o%2?"-":"")+"1"),i=o=0):((i+o===0||isNaN(u))&&_r(),n[a+1]==="i"||n[a+1]==="I"?(r.im+=parseFloat((o%2?"-":"")+u),a++):r.re+=parseFloat((o%2?"-":"")+u),i=o=0))}i+o>0&&_r();break;case"number":r.im=0,r.re=e;break;default:_r()}return isNaN(r.re)||isNaN(r.im),r};function I(e,t){if(!(this instanceof I))return new I(e,t);let r=nr(e,t);this.re=r.re,this.im=r.im}I.prototype={re:0,im:0,sign:function(){let e=$o(this.re,this.im);return new I(this.re/e,this.im/e)},add:function(e,t){let r=nr(e,t),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im));return n||i?n&&i?I.NAN:I.INFINITY:new I(this.re+r.re,this.im+r.im)},sub:function(e,t){let r=nr(e,t),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im));return n||i?n&&i?I.NAN:I.INFINITY:new I(this.re-r.re,this.im-r.im)},mul:function(e,t){let r=nr(e,t),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im)),o=this.re===0&&this.im===0,a=r.re===0&&r.im===0;return n&&a||i&&o?I.NAN:n||i?I.INFINITY:r.im===0&&this.im===0?new I(this.re*r.re,0):new I(this.re*r.re-this.im*r.im,this.re*r.im+this.im*r.re)},div:function(e,t){let r=nr(e,t),n=this.isInfinite(),i=!(isFinite(r.re)&&isFinite(r.im)),o=this.re===0&&this.im===0,a=r.re===0&&r.im===0;if(o&&a||n&&i)return I.NAN;if(a||n)return I.INFINITY;if(o||i)return I.ZERO;if(r.im===0)return new I(this.re/r.re,this.im/r.re);if(Math.abs(r.re)<Math.abs(r.im)){let u=r.re/r.im,f=r.re*u+r.im;return new I((this.re*u+this.im)/f,(this.im*u-this.re)/f)}else{let u=r.im/r.re,f=r.im*u+r.re;return new I((this.re+this.im*u)/f,(this.im-this.re*u)/f)}},pow:function(e,t){let r=nr(e,t),n=this.re===0&&this.im===0;if(r.re===0&&r.im===0)return I.ONE;if(r.im===0){if(this.im===0&&this.re>0)return new I(Math.pow(this.re,r.re),0);if(this.re===0)switch((r.re%4+4)%4){case 0:return new I(Math.pow(this.im,r.re),0);case 1:return new I(0,Math.pow(this.im,r.re));case 2:return new I(-Math.pow(this.im,r.re),0);case 3:return new I(0,-Math.pow(this.im,r.re))}}if(n&&r.re>0)return I.ZERO;let o=Math.atan2(this.im,this.re),a=Vo(this.re,this.im),u=Math.exp(r.re*a-r.im*o),f=r.im*a+r.re*o;return new I(u*Math.cos(f),u*Math.sin(f))},sqrt:function(){let e=this.re,t=this.im;if(t===0)return e>=0?new I(Math.sqrt(e),0):new I(0,Math.sqrt(-e));let r=$o(e,t),n=Math.sqrt(.5*(r+Math.abs(e))),i=Math.abs(t)/(2*n);return e>=0?new I(n,t<0?-i:i):new I(i,t<0?-n:n)},exp:function(){let e=Math.exp(this.re);return this.im===0?new I(e,0):new I(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){let e=this.re,t=this.im;return new I(Math.expm1(e)*Math.cos(t)+td(t),Math.exp(e)*Math.sin(t))},log:function(){let e=this.re,t=this.im;return t===0&&e>0?new I(Math.log(e),0):new I(Vo(e,t),Math.atan2(t,e))},abs:function(){return $o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){let e=this.re,t=this.im;return new I(Math.sin(e)*Xe(t),Math.cos(e)*mt(t))},cos:function(){let e=this.re,t=this.im;return new I(Math.cos(e)*Xe(t),-Math.sin(e)*mt(t))},tan:function(){let e=2*this.re,t=2*this.im,r=Math.cos(e)+Xe(t);return new I(Math.sin(e)/r,mt(t)/r)},cot:function(){let e=2*this.re,t=2*this.im,r=Math.cos(e)-Xe(t);return new I(-Math.sin(e)/r,mt(t)/r)},sec:function(){let e=this.re,t=this.im,r=.5*Xe(2*t)+.5*Math.cos(2*e);return new I(Math.cos(e)*Xe(t)/r,Math.sin(e)*mt(t)/r)},csc:function(){let e=this.re,t=this.im,r=.5*Xe(2*t)-.5*Math.cos(2*e);return new I(Math.sin(e)*Xe(t)/r,-Math.cos(e)*mt(t)/r)},asin:function(){let e=this.re,t=this.im,r=new I(t*t-e*e+1,-2*e*t).sqrt(),n=new I(r.re-t,r.im+e).log();return new I(n.im,-n.re)},acos:function(){let e=this.re,t=this.im,r=new I(t*t-e*e+1,-2*e*t).sqrt(),n=new I(r.re-t,r.im+e).log();return new I(Math.PI/2-n.im,n.re)},atan:function(){let e=this.re,t=this.im;if(e===0){if(t===1)return new I(0,1/0);if(t===-1)return new I(0,-1/0)}let r=e*e+(1-t)*(1-t),n=new I((1-t*t-e*e)/r,-2*e/r).log();return new I(-.5*n.im,.5*n.re)},acot:function(){let e=this.re,t=this.im;if(t===0)return new I(Math.atan2(1,e),0);let r=e*e+t*t;return r!==0?new I(e/r,-t/r).atan():new I(e!==0?e/0:0,t!==0?-t/0:0).atan()},asec:function(){let e=this.re,t=this.im;if(e===0&&t===0)return new I(0,1/0);let r=e*e+t*t;return r!==0?new I(e/r,-t/r).acos():new I(e!==0?e/0:0,t!==0?-t/0:0).acos()},acsc:function(){let e=this.re,t=this.im;if(e===0&&t===0)return new I(Math.PI/2,1/0);let r=e*e+t*t;return r!==0?new I(e/r,-t/r).asin():new I(e!==0?e/0:0,t!==0?-t/0:0).asin()},sinh:function(){let e=this.re,t=this.im;return new I(mt(e)*Math.cos(t),Xe(e)*Math.sin(t))},cosh:function(){let e=this.re,t=this.im;return new I(Xe(e)*Math.cos(t),mt(e)*Math.sin(t))},tanh:function(){let e=2*this.re,t=2*this.im,r=Xe(e)+Math.cos(t);return new I(mt(e)/r,Math.sin(t)/r)},coth:function(){let e=2*this.re,t=2*this.im,r=Xe(e)-Math.cos(t);return new I(mt(e)/r,-Math.sin(t)/r)},csch:function(){let e=this.re,t=this.im,r=Math.cos(2*t)-Xe(2*e);return new I(-2*mt(e)*Math.cos(t)/r,2*Xe(e)*Math.sin(t)/r)},sech:function(){let e=this.re,t=this.im,r=Math.cos(2*t)+Xe(2*e);return new I(2*Xe(e)*Math.cos(t)/r,-2*mt(e)*Math.sin(t)/r)},asinh:function(){let e=this.im;this.im=-this.re,this.re=e;let t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){let e=this.acos();if(e.im<=0){let t=e.re;e.re=-e.im,e.im=t}else{let t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){let e=this.re,t=this.im,r=e>1&&t===0,n=1-e,i=1+e,o=n*n+t*t,a=o!==0?new I((i*n-t*t)/o,(t*n+i*t)/o):new I(e!==-1?e/0:0,t!==0?t/0:0),u=a.re;return a.re=Vo(a.re,a.im)/2,a.im=Math.atan2(a.im,u)/2,r&&(a.im=-a.im),a},acoth:function(){let e=this.re,t=this.im;if(e===0&&t===0)return new I(0,Math.PI/2);let r=e*e+t*t;return r!==0?new I(e/r,-t/r).atanh():new I(e!==0?e/0:0,t!==0?-t/0:0).atanh()},acsch:function(){let e=this.re,t=this.im;if(t===0)return new I(e!==0?Math.log(e+Math.sqrt(e*e+1)):1/0,0);let r=e*e+t*t;return r!==0?new I(e/r,-t/r).asinh():new I(e!==0?e/0:0,t!==0?-t/0:0).asinh()},asech:function(){let e=this.re,t=this.im;if(this.isZero())return I.INFINITY;let r=e*e+t*t;return r!==0?new I(e/r,-t/r).acosh():new I(e!==0?e/0:0,t!==0?-t/0:0).acosh()},inverse:function(){if(this.isZero())return I.INFINITY;if(this.isInfinite())return I.ZERO;let e=this.re,t=this.im,r=e*e+t*t;return new I(e/r,-t/r)},conjugate:function(){return new I(this.re,-this.im)},neg:function(){return new I(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new I(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new I(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new I(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){let r=nr(e,t);return Math.abs(r.re-this.re)<=I.EPSILON&&Math.abs(r.im-this.im)<=I.EPSILON},clone:function(){return new I(this.re,this.im)},toString:function(){let e=this.re,t=this.im,r="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<I.EPSILON&&(e=0),Math.abs(t)<I.EPSILON&&(t=0),t===0?r+e:(e!==0?(r+=e,r+=" ",t<0?(t=-t,r+="-"):r+="+",r+=" "):t<0&&(t=-t,r+="-"),t!==1&&(r+=t),r+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};I.ZERO=new I(0,0);I.ONE=new I(1,0);I.I=new I(0,1);I.PI=new I(Math.PI,0);I.E=new I(Math.E,0);I.INFINITY=new I(1/0,1/0);I.NAN=new I(NaN,NaN);I.EPSILON=1e-15;var nd="Complex",id=[],Ho=V(nd,id,()=>(Object.defineProperty(I,"name",{value:"Complex"}),I.prototype.constructor=I,I.prototype.type="Complex",I.prototype.isComplex=!0,I.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},I.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},I.prototype.format=function(e){var t="",r=this.im,n=this.re,i=rn(this.re,e),o=rn(this.im,e),a=ce(e)?e:e?e.precision:null;if(a!==null){var u=Math.pow(10,-a);Math.abs(n/r)<u&&(n=0),Math.abs(r/n)<u&&(r=0)}return r===0?t=i:n===0?r===1?t="i":r===-1?t="-i":t=o+"i":r<0?r===-1?t=i+" - i":t=i+" - "+o.substring(1)+"i":r===1?t=i+" + i":t=i+" + "+o+"i",t},I.fromPolar=function(e){switch(arguments.length){case 1:{var t=arguments[0];if(typeof t=="object")return I(t);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var r=arguments[0],n=arguments[1];if(ce(r)){if(ri(n)&&n.hasBase("ANGLE")&&(n=n.toNumber("rad")),ce(n))return new I({r,phi:n});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},I.prototype.valueOf=I.prototype.toString,I.fromJSON=function(e){return new I(e)},I.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},I),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(e){if(isNaN(e))throw new Error("");return e});var K=BigInt(0),ie=BigInt(1),Le=BigInt(2),an=BigInt(3),br=BigInt(5),ot=BigInt(10),w_=BigInt(Number.MAX_SAFE_INTEGER),od=2e3,W={s:ie,n:K,d:ie};function Tt(e,t){try{e=BigInt(e)}catch{throw Zt()}return e*t}function wt(e){return typeof e=="bigint"?e:Math.floor(e)}function be(e,t){if(t===K)throw Go();let r=Object.create(ft.prototype);r.s=e<K?-ie:ie,e=e<K?-e:e;let n=ir(e,t);return r.n=e/n,r.d=t/n,r}var ad=[Le*Le,Le,Le*Le,Le,Le*Le,Le*an,Le,Le*an];function Cr(e){let t=Object.create(null);if(e<=ie)return t[e]=ie,t;let r=n=>{t[n]=(t[n]||K)+ie};for(;e%Le===K;)r(Le),e/=Le;for(;e%an===K;)r(an),e/=an;for(;e%br===K;)r(br),e/=br;for(let n=0,i=Le+br;i*i<=e;){for(;e%i===K;)r(i),e/=i;i+=ad[n],n=n+1&7}return e>ie&&r(e),t}var qe=function(e,t){let r=K,n=ie,i=ie;if(e!=null)if(t!==void 0){if(typeof e=="bigint")r=e;else{if(isNaN(e))throw Zt();if(e%1!==0)throw yc();r=BigInt(e)}if(typeof t=="bigint")n=t;else{if(isNaN(t))throw Zt();if(t%1!==0)throw yc();n=BigInt(t)}i=r*n}else if(typeof e=="object"){if("d"in e&&"n"in e)r=BigInt(e.n),n=BigInt(e.d),"s"in e&&(r*=BigInt(e.s));else if(0 in e)r=BigInt(e[0]),1 in e&&(n=BigInt(e[1]));else if(typeof e=="bigint")r=e;else throw Zt();i=r*n}else if(typeof e=="number"){if(isNaN(e))throw Zt();if(e<0&&(i=-ie,e=-e),e%1===0)r=BigInt(e);else{let o=1,a=0,u=1,f=1,s=1,c=1e7;for(e>=1&&(o=10**Math.floor(1+Math.log10(e)),e/=o);u<=c&&s<=c;){let l=(a+f)/(u+s);if(e===l){u+s<=c?(r=a+f,n=u+s):s>u?(r=f,n=s):(r=a,n=u);break}else e>l?(a+=f,u+=s):(f+=a,s+=u),u>c?(r=f,n=s):(r=a,n=u)}r=BigInt(r)*BigInt(o),n=BigInt(n)}}else if(typeof e=="string"){let o=0,a=K,u=K,f=K,s=ie,c=ie,l=e.replace(/_/g,"").match(/\d+|./g);if(l===null)throw Zt();if(l[o]==="-"?(i=-ie,o++):l[o]==="+"&&o++,l.length===o+1?u=Tt(l[o++],i):l[o+1]==="."||l[o]==="."?(l[o]!=="."&&(a=Tt(l[o++],i)),o++,(o+1===l.length||l[o+1]==="("&&l[o+3]===")"||l[o+1]==="'"&&l[o+3]==="'")&&(u=Tt(l[o],i),s=ot**BigInt(l[o].length),o++),(l[o]==="("&&l[o+2]===")"||l[o]==="'"&&l[o+2]==="'")&&(f=Tt(l[o+1],i),c=ot**BigInt(l[o+1].length)-ie,o+=3)):l[o+1]==="/"||l[o+1]===":"?(u=Tt(l[o],i),s=Tt(l[o+2],ie),o+=3):l[o+3]==="/"&&l[o+1]===" "&&(a=Tt(l[o],i),u=Tt(l[o+2],i),s=Tt(l[o+4],ie),o+=5),l.length<=o)n=s*c,i=r=f+n*a+c*u;else throw Zt()}else if(typeof e=="bigint")r=e,i=e,n=ie;else throw Zt();if(n===K)throw Go();W.s=i<K?-ie:ie,W.n=r<K?-r:r,W.d=n<K?-n:n};function ud(e,t,r){let n=ie;for(;t>K;e=e*e%r,t>>=ie)t&ie&&(n=n*e%r);return n}function sd(e,t){for(;t%Le===K;t/=Le);for(;t%br===K;t/=br);if(t===ie)return K;let r=ot%t,n=1;for(;r!==ie;n++)if(r=r*ot%t,n>od)return K;return BigInt(n)}function fd(e,t,r){let n=ie,i=ud(ot,r,t);for(let o=0;o<300;o++){if(n===i)return BigInt(o);n=n*ot%t,i=i*ot%t}return 0}function ir(e,t){if(!e)return t;if(!t)return e;for(;;){if(e%=t,!e)return t;if(t%=e,!t)return e}}function ft(e,t){if(qe(e,t),this instanceof ft)e=ir(W.d,W.n),this.s=W.s,this.n=W.n/e,this.d=W.d/e;else return be(W.s*W.n,W.d)}var Go=function(){return new Error("Division by Zero")},Zt=function(){return new Error("Invalid argument")},yc=function(){return new Error("Parameters must be integer")};ft.prototype={s:ie,n:K,d:ie,abs:function(){return be(this.n,this.d)},neg:function(){return be(-this.s*this.n,this.d)},add:function(e,t){return qe(e,t),be(this.s*this.n*W.d+W.s*this.d*W.n,this.d*W.d)},sub:function(e,t){return qe(e,t),be(this.s*this.n*W.d-W.s*this.d*W.n,this.d*W.d)},mul:function(e,t){return qe(e,t),be(this.s*W.s*this.n*W.n,this.d*W.d)},div:function(e,t){return qe(e,t),be(this.s*W.s*this.n*W.d,this.d*W.n)},clone:function(){return be(this.s*this.n,this.d)},mod:function(e,t){if(e===void 0)return be(this.s*this.n%this.d,ie);if(qe(e,t),K===W.n*this.d)throw Go();return be(this.s*(W.d*this.n)%(W.n*this.d),W.d*this.d)},gcd:function(e,t){return qe(e,t),be(ir(W.n,this.n)*ir(W.d,this.d),W.d*this.d)},lcm:function(e,t){return qe(e,t),W.n===K&&this.n===K?be(K,ie):be(W.n*this.n,ir(W.n,this.n)*ir(W.d,this.d))},inverse:function(){return be(this.s*this.d,this.n)},pow:function(e,t){if(qe(e,t),W.d===ie)return W.s<K?be((this.s*this.d)**W.n,this.n**W.n):be((this.s*this.n)**W.n,this.d**W.n);if(this.s<K)return null;let r=Cr(this.n),n=Cr(this.d),i=ie,o=ie;for(let a in r)if(a!=="1"){if(a==="0"){i=K;break}if(r[a]*=W.n,r[a]%W.d===K)r[a]/=W.d;else return null;i*=BigInt(a)**r[a]}for(let a in n)if(a!=="1"){if(n[a]*=W.n,n[a]%W.d===K)n[a]/=W.d;else return null;o*=BigInt(a)**n[a]}return W.s<K?be(o,i):be(i,o)},log:function(e,t){if(qe(e,t),this.s<=K||W.s<=K)return null;let r=Object.create(null),n=Cr(W.n),i=Cr(W.d),o=Cr(this.n),a=Cr(this.d);for(let s in i)n[s]=(n[s]||K)-i[s];for(let s in a)o[s]=(o[s]||K)-a[s];for(let s in n)s!=="1"&&(r[s]=!0);for(let s in o)s!=="1"&&(r[s]=!0);let u=null,f=null;for(let s in r){let c=n[s]||K,l=o[s]||K;if(c===K){if(l!==K)return null;continue}let p=l,m=c,d=ir(p,m);if(p/=d,m/=d,u===null&&f===null)u=p,f=m;else if(p*f!==u*m)return null}return u!==null&&f!==null?be(u,f):null},equals:function(e,t){return qe(e,t),this.s*this.n*W.d===W.s*W.n*this.d},lt:function(e,t){return qe(e,t),this.s*this.n*W.d<W.s*W.n*this.d},lte:function(e,t){return qe(e,t),this.s*this.n*W.d<=W.s*W.n*this.d},gt:function(e,t){return qe(e,t),this.s*this.n*W.d>W.s*W.n*this.d},gte:function(e,t){return qe(e,t),this.s*this.n*W.d>=W.s*W.n*this.d},compare:function(e,t){qe(e,t);let r=this.s*this.n*W.d-W.s*W.n*this.d;return(K<r)-(r<K)},ceil:function(e){return e=ot**BigInt(e||0),be(wt(this.s*e*this.n/this.d)+(e*this.n%this.d>K&&this.s>=K?ie:K),e)},floor:function(e){return e=ot**BigInt(e||0),be(wt(this.s*e*this.n/this.d)-(e*this.n%this.d>K&&this.s<K?ie:K),e)},round:function(e){return e=ot**BigInt(e||0),be(wt(this.s*e*this.n/this.d)+this.s*((this.s>=K?ie:K)+Le*(e*this.n%this.d)>this.d?ie:K),e)},roundTo:function(e,t){qe(e,t);let r=this.n*W.d,n=this.d*W.n,i=r%n,o=wt(r/n);return i+i>=n&&o++,be(this.s*o*W.n,W.d)},divisible:function(e,t){return qe(e,t),W.n===K?!1:this.n*W.d%(W.n*this.d)===K},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(e=15){let t=this.n,r=this.d,n=sd(t,r),i=fd(t,r,n),o=this.s<K?"-":"";if(o+=wt(t/r),t%=r,t*=ot,t&&(o+="."),n){for(let a=i;a--;)o+=wt(t/r),t%=r,t*=ot;o+="(";for(let a=n;a--;)o+=wt(t/r),t%=r,t*=ot;o+=")"}else for(let a=e;t&&a--;)o+=wt(t/r),t%=r,t*=ot;return o},toFraction:function(e=!1){let t=this.n,r=this.d,n=this.s<K?"-":"";if(r===ie)n+=t;else{let i=wt(t/r);e&&i>K&&(n+=i,n+=" ",t%=r),n+=t,n+="/",n+=r}return n},toLatex:function(e=!1){let t=this.n,r=this.d,n=this.s<K?"-":"";if(r===ie)n+=t;else{let i=wt(t/r);e&&i>K&&(n+=i,t%=r),n+="\\frac{",n+=t,n+="}{",n+=r,n+="}"}return n},toContinued:function(){let e=this.n,t=this.d,r=[];for(;t;){r.push(wt(e/t));let n=e%t;e=t,t=n}return r},simplify:function(e=.001){let t=BigInt(Math.ceil(1/e)),r=this.abs(),n=r.toContinued();for(let i=1;i<n.length;i++){let o=be(n[i-1],ie);for(let u=i-2;u>=0;u--)o=o.inverse().add(n[u]);let a=o.sub(r);if(a.n*t<a.d)return o.mul(this.s)}return this}};var cd="Fraction",ld=[],Zo=V(cd,ld,()=>(Object.defineProperty(ft,"name",{value:"Fraction"}),ft.prototype.constructor=ft,ft.prototype.type="Fraction",ft.prototype.isFraction=!0,ft.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},ft.fromJSON=function(e){return new ft(e)},ft),{isClass:!0});var pd="Matrix",hd=[],Wo=V(pd,hd,()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(t,r){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(t,r,n){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(t,r,n){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(t,r){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(t,r){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(t,r){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e},{isClass:!0});function Xo(e,t,r){var n=e.constructor,i=new n(2),o="";if(r){if(r<1)throw new Error("size must be in greater than 0");if(!ue(r))throw new Error("size must be an integer");if(e.greaterThan(i.pow(r-1).sub(1))||e.lessThan(i.pow(r-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(r-1,", 2^").concat(r-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(i.pow(r))),o="i".concat(r)}switch(t){case 2:return"".concat(e.toBinary()).concat(o);case 8:return"".concat(e.toOctal()).concat(o);case 16:return"".concat(e.toHexadecimal()).concat(o);default:throw new Error("Base ".concat(t," not supported "))}}function Ec(e,t){if(typeof t=="function")return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:r,precision:n,wordSize:i}=To(t);switch(r){case"fixed":return dd(e,n);case"exponential":return wc(e,n);case"engineering":return md(e,n);case"bin":return Xo(e,2,i);case"oct":return Xo(e,8,i);case"hex":return Xo(e,16,i);case"auto":{var o=Ac(t?.lowerExp,-3),a=Ac(t?.upperExp,5);if(e.isZero())return"0";var u,f=e.toSignificantDigits(n),s=f.e;return s>=o&&s<a?u=f.toFixed():u=wc(e,n),u.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],l=arguments[4];return c!=="."?c+l:l})}default:throw new Error('Unknown notation "'+r+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function md(e,t){var r=e.e,n=r%3===0?r:r<0?r-3-r%3:r-r%3,i=e.mul(Math.pow(10,-n)),o=i.toPrecision(t);if(o.includes("e")){var a=e.constructor;o=new a(o).toFixed()}return o+"e"+(r>=0?"+":"")+n.toString()}function wc(e,t){return t!==void 0?e.toExponential(t-1):e.toExponential()}function dd(e,t){return e.toFixed(t)}function Ac(e,t){return ce(e)?e:le(e)?e.toNumber():t}function Ce(e,t){var r=gd(e,t);return t&&typeof t=="object"&&"truncate"in t&&r.length>t.truncate?r.substring(0,t.truncate-3)+"...":r}function gd(e,t){if(typeof e=="number")return rn(e,t);if(le(e))return Ec(e,t);if(vd(e))return!t||t.fraction!=="decimal"?"".concat(e.s*e.n,"/").concat(e.d):e.toString();if(Array.isArray(e))return Cc(e,t);if(je(e))return Fc(e);if(typeof e=="function")return e.syntax?String(e.syntax):"function";if(e&&typeof e=="object"){if(typeof e.format=="function")return e.format(t);if(e&&e.toString(t)!=={}.toString())return e.toString(t);var r=Object.keys(e).map(n=>Fc(n)+": "+Ce(e[n],t));return"{"+r.join(", ")+"}"}return String(e)}function Fc(e){for(var t=String(e),r="",n=0;n<t.length;){var i=t.charAt(n);r+=i in _c?_c[i]:i,n++}return'"'+r+'"'}var _c={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function Cc(e,t){if(Array.isArray(e)){for(var r="[",n=e.length,i=0;i<n;i++)i!==0&&(r+=", "),r+=Cc(e[i],t);return r+="]",r}else return Ce(e,t)}function vd(e){return e&&typeof e=="object"&&typeof e.s=="bigint"&&typeof e.n=="bigint"&&typeof e.d=="bigint"||!1}function ae(e,t,r){if(!(this instanceof ae))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=r,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=new Error().stack}ae.prototype=new RangeError;ae.prototype.constructor=RangeError;ae.prototype.name="DimensionError";ae.prototype.isDimensionError=!0;function It(e,t,r){if(!(this instanceof It))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=r),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}It.prototype=new RangeError;It.prototype.constructor=RangeError;It.prototype.name="IndexError";It.prototype.isIndexError=!0;function me(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function bc(e,t,r){var n,i=e.length;if(i!==t[r])throw new ae(i,t[r]);if(r<t.length-1){var o=r+1;for(n=0;n<i;n++){var a=e[n];if(!Array.isArray(a))throw new ae(t.length-1,t.length,"<");bc(e[n],t,o)}}else for(n=0;n<i;n++)if(Array.isArray(e[n]))throw new ae(t.length+1,t.length,">")}function Qo(e,t){var r=t.length===0;if(r){if(Array.isArray(e))throw new ae(e.length,0)}else bc(e,t,0)}function Se(e,t){if(e!==void 0){if(!ce(e)||!ue(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||typeof t=="number"&&e>=t)throw new It(e,t)}}function or(e,t,r){if(!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new Error("Resizing to scalar is not supported");t.forEach(function(i){if(!ce(i)||!ue(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ce(t)+")")}),(ce(e)||le(e))&&(e=[e]);var n=r!==void 0?r:0;return Yo(e,t,0,n),e}function Yo(e,t,r,n){var i,o,a=e.length,u=t[r],f=Math.min(a,u);if(e.length=u,r<t.length-1){var s=r+1;for(i=0;i<f;i++)o=e[i],Array.isArray(o)||(o=[o],e[i]=o),Yo(o,t,s,n);for(i=f;i<u;i++)o=[],e[i]=o,Yo(o,t,s,n)}else{for(i=0;i<f;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=f;i<u;i++)e[i]=n}}function Ko(e,t){var r=Dd(e,!0),n=r.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(t.length===0)throw new ae(0,n,"!=");t=un(t,n);var i=Sc(t);if(n!==i)throw new ae(i,n,"!=");try{return xd(r,t)}catch(o){throw o instanceof ae?new ae(i,n,"!="):o}}function un(e,t){var r=Sc(e),n=e.slice(),i=-1,o=e.indexOf(i),a=e.indexOf(i,o+1)>=0;if(a)throw new Error("More than one wildcard in sizes");var u=o>=0,f=t%r===0;if(u)if(f)n[o]=-t/r;else throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-r);return n}function Sc(e){return e.reduce((t,r)=>t*r,1)}function xd(e,t){for(var r=e,n,i=t.length-1;i>0;i--){var o=t[i];n=[];for(var a=r.length/o,u=0;u<a;u++)n.push(r.slice(u*o,(u+1)*o));r=n}return r}function gi(e,t,r,n){var i=n||me(e);if(r)for(var o=0;o<r;o++)e=[e],i.unshift(1);for(e=Mc(e,t,0);i.length<t;)i.push(1);return e}function Mc(e,t,r){var n,i;if(Array.isArray(e)){var o=r+1;for(n=0,i=e.length;n<i;n++)e[n]=Mc(e[n],t,o)}else for(var a=r;a<t;a++)e=[e];return e}function Dd(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(e))return e;if(typeof t!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var r=[];return t?i(e):n(e),r;function n(o){for(var a=0;a<o.length;a++){var u=o[a];Array.isArray(u)?n(u):r.push(u)}}function i(o){if(Array.isArray(o[0]))for(var a=0;a<o.length;a++)i(o[a]);else for(var u=0;u<o.length;u++)r.push(o[u])}}function sn(e,t){for(var r,n=0,i=0;i<e.length;i++){var o=e[i],a=Array.isArray(o);if(i===0&&a&&(n=o.length),a&&o.length!==n)return;var u=a?sn(o,t):t(o);if(r===void 0)r=u;else if(r!==u)return"mixed"}return r}function Nc(e,t,r,n){if(n<r){if(e.length!==t.length)throw new ae(e.length,t.length);for(var i=[],o=0;o<e.length;o++)i[o]=Nc(e[o],t[o],r,n+1);return i}else return e.concat(t)}function Jo(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(e.length===1)return e[0];if(e.length>1)return e.slice(1).reduce(function(r,n){return Nc(r,n,t,0)},e[0]);throw new Error("Wrong number of arguments in function concat")}function jo(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=t.map(p=>p.length),i=Math.max(...n),o=new Array(i).fill(null),a=0;a<t.length;a++)for(var u=t[a],f=n[a],s=0;s<f;s++){var c=i-f+s;u[s]>o[c]&&(o[c]=u[s])}for(var l=0;l<t.length;l++)Bc(t[l],o);return o}function Bc(e,t){for(var r=t.length,n=e.length,i=0;i<n;i++){var o=r-n+i;if(e[i]<t[o]&&e[i]>1||e[i]>t[o])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(n," with size ").concat(e[i]," to size ").concat(t[o]))}}function fn(e,t){var r=me(e);if(ht(r,t))return e;Bc(r,t);var n=jo(r,t),i=n.length,o=[...Array(i-r.length).fill(1),...r],a=wd(e);r.length<i&&(a=Ko(a,o),r=me(a));for(var u=0;u<i;u++)r[u]<n[u]&&(a=yd(a,n[u],u),r=me(a));return a}function yd(e,t,r){return Jo(...Array(t).fill(e),r)}function vi(e,t){if(!Array.isArray(e))throw new Error("Array expected");var r=me(e);if(t.length!==r.length)throw new ae(t.length,r.length);for(var n=0;n<t.length;n++)Se(t[n],r[n]);return t.reduce((i,o)=>i[o],e)}function ea(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.length===0)return[];if(r)return o(e);var n=[];return i(e,0);function i(a,u){if(Array.isArray(a)){for(var f=a.length,s=Array(f),c=0;c<f;c++)n[u]=c,s[c]=i(a[c],u+1);return s}else return t(a,n.slice(0,u),e)}function o(a){if(Array.isArray(a)){for(var u=a.length,f=Array(u),s=0;s<u;s++)f[s]=o(a[s]);return f}else return t(a)}}function wd(e){return vr([],e)}var ta=Mi(No(),1);function Sr(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(ta.default.isTypedFunction(e)){var i;if(n)i=1;else{var o=(t.isMatrix?t.size():me(t)).map(()=>0),a=t.isMatrix?t.get(o):vi(t,o);i=Fd(e,a,o,t)}var u;if(t.isMatrix&&t.dataType!=="mixed"&&t.dataType!==void 0){var f=Ad(e,i);u=f!==void 0?f:e}else u=e;return i>=1&&i<=3?{isUnary:i===1,fn:function(){for(var c=arguments.length,l=new Array(c),p=0;p<c;p++)l[p]=arguments[p];return Tc(u,l.slice(0,i),r,e.name)}}:{isUnary:!1,fn:function(){for(var c=arguments.length,l=new Array(c),p=0;p<c;p++)l[p]=arguments[p];return Tc(u,l,r,e.name)}}}return n===void 0?{isUnary:Ed(e),fn:e}:{isUnary:n,fn:e}}function Ad(e,t){var r=[];if(Object.entries(e.signatures).forEach(n=>{var[i,o]=n;i.split(",").length===t&&r.push(o)}),r.length===1)return r[0]}function Ed(e){if(e.length!==1)return!1;var t=e.toString();if(/arguments/.test(t))return!1;var r=t.match(/\(.*?\)/);return!/\.\.\./.test(r)}function Fd(e,t,r,n){for(var i=[t,r,n],o=3;o>0;o--){var a=i.slice(0,o);if(ta.default.resolve(e,a)!==null)return o}}function Tc(e,t,r,n){try{return e(...t)}catch(i){_d(i,t,r,n)}}function _d(e,t,r,n){var i;if(e instanceof TypeError&&((i=e.data)===null||i===void 0?void 0:i.category)==="wrongType"){var o=[];throw o.push("value: ".concat(st(t[0]))),t.length>=2&&o.push("index: ".concat(st(t[1]))),t.length>=3&&o.push("array: ".concat(st(t[2]))),new TypeError("Function ".concat(r," cannot apply callback arguments ")+"".concat(n,"(").concat(o.join(", "),") at index ").concat(JSON.stringify(t[1])))}else throw new TypeError("Function ".concat(r," cannot apply callback arguments ")+"to function ".concat(n,": ").concat(e.message))}var Cd="DenseMatrix",bd=["Matrix"],ra=V(Cd,bd,e=>{var{Matrix:t}=e;function r(c,l){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(l&&!je(l))throw new Error("Invalid datatype: "+l);if(pe(c))c.type==="DenseMatrix"?(this._data=xe(c._data),this._size=xe(c._size),this._datatype=l||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=l||c._datatype);else if(c&&Me(c.data)&&Me(c.size))this._data=c.data,this._size=c.size,Qo(this._data,this._size),this._datatype=l||c.datatype;else if(Me(c))this._data=s(c),this._size=me(this._data),Qo(this._data,this._size),this._datatype=l;else{if(c)throw new TypeError("Unsupported type of data ("+st(c)+")");this._data=[],this._size=[0],this._datatype=l}}r.prototype=new t,r.prototype.createDenseMatrix=function(c,l){return new r(c,l)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return sn(this._data,st)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(c,l){return new r(c,l)},r.prototype.subset=function(c,l,p){switch(arguments.length){case 1:return n(this,c);case 2:case 3:return o(this,c,l,p);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(c){return vi(this._data,c)},r.prototype.set=function(c,l,p){if(!Me(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new ae(c.length,this._size.length,"<");var m,d,h,v=c.map(function(A){return A+1});f(this,v,p);var y=this._data;for(m=0,d=c.length-1;m<d;m++)h=c[m],Se(h,y.length),y=y[h];return h=c[c.length-1],Se(h,y.length),y[h]=l,this};function n(c,l){if(!Dr(l))throw new TypeError("Invalid index");var p=l.isScalar();if(p)return c.get(l.min());var m=l.size();if(m.length!==c._size.length)throw new ae(m.length,c._size.length);for(var d=l.min(),h=l.max(),v=0,y=c._size.length;v<y;v++)Se(d[v],c._size[v]),Se(h[v],c._size[v]);var A=new r([]),g=i(c._data,l);return A._size=g.size,A._datatype=c._datatype,A._data=g.data,A}function i(c,l){var p=l.size().length-1,m=Array(p);return{data:d(c),size:m};function d(h){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=l.dimension(v);return m[v]=y.size()[0],v<p?y.map(A=>(Se(A,h.length),d(h[A],v+1))).valueOf():y.map(A=>(Se(A,h.length),h[A])).valueOf()}}function o(c,l,p,m){if(!l||l.isIndex!==!0)throw new TypeError("Invalid index");var d=l.size(),h=l.isScalar(),v;if(pe(p)?(v=p.size(),p=p.valueOf()):v=me(p),h){if(v.length!==0)throw new TypeError("Scalar expected");c.set(l.min(),p,m)}else{if(!ht(v,d))try{v.length===0?p=fn([p],d):p=fn(p,d),v=me(p)}catch{}if(d.length<c._size.length)throw new ae(d.length,c._size.length,"<");if(v.length<d.length){for(var y=0,A=0;d[y]===1&&v[y]===1;)y++;for(;d[y]===1;)A++,y++;p=gi(p,d.length,A,v)}if(!ht(d,v))throw new ae(d,v,">");var g=l.max().map(function(E){return E+1});f(c,g,m),a(c._data,l,p)}return c}function a(c,l,p){var m=l.size().length-1;d(c,p);function d(h,v){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,A=l.dimension(y);y<m?A.forEach((g,E)=>{Se(g,h.length),d(h[g],v[E[0]],y+1)}):A.forEach((g,E)=>{Se(g,h.length),h[g]=v[E[0]]})}}r.prototype.resize=function(c,l,p){if(!Ut(c))throw new TypeError("Array or Matrix expected");var m=c.valueOf().map(h=>Array.isArray(h)&&h.length===1?h[0]:h),d=p?this.clone():this;return u(d,m,l)};function u(c,l,p){if(l.length===0){for(var m=c._data;Me(m);)m=m[0];return m}return c._size=l.slice(0),c._data=or(c._data,c._size,p),c}r.prototype.reshape=function(c,l){var p=l?this.clone():this;p._data=Ko(p._data,c);var m=p._size.reduce((d,h)=>d*h);return p._size=un(c,m),p};function f(c,l,p){for(var m=c._size.slice(0),d=!1;m.length<l.length;)m.push(0),d=!0;for(var h=0,v=l.length;h<v;h++)l[h]>m[h]&&(m[h]=l[h],d=!0);d&&u(c,m,p)}r.prototype.clone=function(){var c=new r({data:xe(this._data),size:xe(this._size),datatype:this._datatype});return c},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(c){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,m=this,d=m._size.length-1;if(d<0)return m.clone();var h=Sr(c,m,"map",p),v=h.fn,y=m.create(void 0,m._datatype);if(y._size=m._size,p||h.isUnary)return y._data=_(m._data),y;if(d===0){for(var A=m.valueOf(),g=Array(A.length),E=0;E<A.length;E++)g[E]=v(A[E],[E],m);return y._data=g,y}var D=[];return y._data=w(m._data),y;function w(x){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=Array(x.length);if(S<d)for(var C=0;C<x.length;C++)D[S]=C,b[C]=w(x[C],S+1);else for(var T=0;T<x.length;T++)D[S]=T,b[T]=v(x[T],D.slice(),m);return b}function _(x){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=Array(x.length);if(S<d)for(var C=0;C<x.length;C++)b[C]=_(x[C],S+1);else for(var T=0;T<x.length;T++)b[T]=v(x[T]);return b}},r.prototype.forEach=function(c){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,m=this,d=m._size.length-1;if(d<0)return;var h=Sr(c,m,"map",p),v=h.fn;if(p||h.isUnary){E(m._data);return}if(d===0){for(var y=0;y<m._data.length;y++)v(m._data[y],[y],m);return}var A=[];g(m._data);function g(D){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(w<d)for(var _=0;_<D.length;_++)A[w]=_,g(D[_],w+1);else for(var x=0;x<D.length;x++)A[w]=x,v(D[x],A.slice(),m)}function E(D){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(w<d)for(var _=0;_<D.length;_++)E(D[_],w+1);else for(var x=0;x<D.length;x++)v(D[x])}},r.prototype[Symbol.iterator]=function*(){var c=this._size.length-1;if(!(c<0)){if(c===0){for(var l=0;l<this._data.length;l++)yield{value:this._data[l],index:[l]};return}var p=[],m=function*(h,v){if(v<c)for(var y=0;y<h.length;y++)p[v]=y,yield*m(h[y],v+1);else for(var A=0;A<h.length;A++)p[v]=A,yield{value:h[A],index:p.slice()}};yield*m(this._data,0)}},r.prototype.rows=function(){var c=[],l=this.size();if(l.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var p=this._data;for(var m of p)c.push(new r([m],this._datatype));return c},r.prototype.columns=function(){var c=this,l=[],p=this.size();if(p.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var m=this._data,d=function(y){var A=m.map(g=>[g[y]]);l.push(new r(A,c._datatype))},h=0;h<p[1];h++)d(h);return l},r.prototype.toArray=function(){return xe(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(c){return Ce(this._data,c)},r.prototype.toString=function(){return Ce(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(c){if(c){if(le(c)&&(c=c.toNumber()),!ce(c)||!ue(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var l=c>0?c:0,p=c<0?-c:0,m=this._size[0],d=this._size[1],h=Math.min(m-p,d-l),v=[],y=0;y<h;y++)v[y]=this._data[y+p][y+l];return new r({data:v,size:[h],datatype:this._datatype})},r.diagonal=function(c,l,p,m){if(!Me(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(_){if(le(_)&&(_=_.toNumber()),!ce(_)||!ue(_)||_<1)throw new Error("Size values must be positive integers");return _}),p){if(le(p)&&(p=p.toNumber()),!ce(p)||!ue(p))throw new TypeError("The parameter k must be an integer number")}else p=0;var d=p>0?p:0,h=p<0?-p:0,v=c[0],y=c[1],A=Math.min(v-h,y-d),g;if(Me(l)){if(l.length!==A)throw new Error("Invalid value array length");g=function(x){return l[x]}}else if(pe(l)){var E=l.size();if(E.length!==1||E[0]!==A)throw new Error("Invalid matrix length");g=function(x){return l.get([x])}}else g=function(){return l};m||(m=le(g(0))?g(0).mul(0):0);var D=[];if(c.length>0){D=or(D,c,m);for(var w=0;w<A;w++)D[w+h][w+d]=g(w)}return new r({data:D,size:[v,y]})},r.fromJSON=function(c){return new r(c)},r.prototype.swapRows=function(c,l){if(!ce(c)||!ue(c)||!ce(l)||!ue(l))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Se(c,this._size[0]),Se(l,this._size[0]),r._swapRows(c,l,this._data),this},r._swapRows=function(c,l,p){var m=p[c];p[c]=p[l],p[l]=m};function s(c){return pe(c)?s(c.valueOf()):Me(c)?c.map(s):c}return r},{isClass:!0});function Ye(e,t,r){if(!r)return pe(e)?e.map(i=>t(i),!1,!0):ea(e,t,!0);var n=i=>i===0?i:t(i);return pe(e)?e.map(i=>n(i),!1,!0):ea(e,n,!0)}var Ic="isInteger",Sd=["typed"],na=V(Ic,Sd,e=>{var{typed:t}=e;return t(Ic,{number:ue,BigNumber:function(n){return n.isInt()},bigint:function(n){return!0},Fraction:function(n){return n.d===1n},"Array | Matrix":t.referToSelf(r=>n=>Ye(n,r))})});var at="number",Ot="number, number";function ia(e){return Math.abs(e)}ia.signature=at;function oa(e,t){return e+t}oa.signature=Ot;function aa(e,t){return e-t}aa.signature=Ot;function ua(e,t){return e*t}ua.signature=Ot;function Md(e,t){return e/t}Md.signature=Ot;function sa(e){return-e}sa.signature=at;function Nd(e){return e}Nd.signature=at;function Bd(e){return ec(e)}Bd.signature=at;function Td(e){return e*e*e}Td.signature=at;function Id(e){return Math.exp(e)}Id.signature=at;function Od(e){return tc(e)}Od.signature=at;function zd(e,t){if(!ue(e)||!ue(t))throw new Error("Parameters in function gcd must be integer numbers");for(var r;t!==0;)r=e%t,e=t,t=r;return e<0?-e:e}zd.signature=Ot;function Pd(e,t){if(!ue(e)||!ue(t))throw new Error("Parameters in function lcm must be integer numbers");if(e===0||t===0)return 0;for(var r,n=e*t;t!==0;)r=t,t=e%r,e=r;return Math.abs(n/e)}Pd.signature=Ot;function Rd(e){return Jf(e)}Rd.signature=at;function kd(e){return Kf(e)}kd.signature=at;function qd(e){return jf(e)}qd.signature=at;function Ld(e,t){return t===0?e:e-t*Math.floor(e/t)}Ld.signature=Ot;function Ud(e){return Qf(e)}Ud.signature=at;function $d(e){return Math.sqrt(e)}$d.signature=at;function Vd(e){return e*e}Vd.signature=at;function Hd(e,t){var r,n,i,o=0,a=1,u=1,f=0;if(!ue(e)||!ue(t))throw new Error("Parameters in function xgcd must be integer numbers");for(;t;)n=Math.floor(e/t),i=e-n*t,r=o,o=a-n*o,a=r,r=u,u=f-n*u,f=r,e=t,t=i;var s;return e<0?s=[-e,-a,-f]:s=[e,e?a:0,f],s}Hd.signature=Ot;function Gd(e,t){return e*e<1&&t===1/0||e*e>1&&t===-1/0?0:Math.pow(e,t)}Gd.signature=Ot;function Zd(e){return Math.abs(e)}Zd.signature=at;function Oc(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(r<=0)throw new Error("Relative tolerance must be greater than 0");if(n<0)throw new Error("Absolute tolerance must be at least 0");return e.isNaN()||t.isNaN()?!1:!e.isFinite()||!t.isFinite()?e.eq(t):e.eq(t)?!0:e.minus(t).abs().lte(e.constructor.max(e.constructor.max(e.abs(),t.abs()).mul(r),n))}var zc="isZero",Wd=["typed","equalScalar"],fa=V(zc,Wd,e=>{var{typed:t,equalScalar:r}=e;return t(zc,{"number | BigNumber | Complex | Fraction":n=>r(n,0),bigint:n=>n===0n,Unit:t.referToSelf(n=>i=>t.find(n,i.valueType())(i.value)),"Array | Matrix":t.referToSelf(n=>i=>Ye(i,n))})});function Pc(e,t,r,n){return Ar(e.re,t.re,r,n)&&Ar(e.im,t.im,r,n)}var Rc=V("compareUnits",["typed"],e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf(r=>(n,i)=>{if(!n.equalBase(i))throw new Error("Cannot compare units with different base");return t.find(r,[n.valueType(),i.valueType()])(n.value,i.value)})}});var xi="equalScalar",Xd=["typed","config"],ca=V(xi,Xd,e=>{var{typed:t,config:r}=e,n=Rc({typed:t});return t(xi,{"boolean, boolean":function(o,a){return o===a},"number, number":function(o,a){return Ar(o,a,r.relTol,r.absTol)},"BigNumber, BigNumber":function(o,a){return o.eq(a)||Oc(o,a,r.relTol,r.absTol)},"bigint, bigint":function(o,a){return o===a},"Fraction, Fraction":function(o,a){return o.equals(a)},"Complex, Complex":function(o,a){return Pc(o,a,r.relTol,r.absTol)}},n)}),CC=V(xi,["typed","config"],e=>{var{typed:t,config:r}=e;return t(xi,{"number, number":function(i,o){return Ar(i,o,r.relTol,r.absTol)}})});var Yd="SparseMatrix",Qd=["typed","equalScalar","Matrix"],la=V(Yd,Qd,e=>{var{typed:t,equalScalar:r,Matrix:n}=e;function i(h,v){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(v&&!je(v))throw new Error("Invalid datatype: "+v);if(pe(h))o(this,h,v);else if(h&&Me(h.index)&&Me(h.ptr)&&Me(h.size))this._values=h.values,this._index=h.index,this._ptr=h.ptr,this._size=h.size,this._datatype=v||h.datatype;else if(Me(h))a(this,h,v);else{if(h)throw new TypeError("Unsupported type of data ("+st(h)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=v}}function o(h,v,y){v.type==="SparseMatrix"?(h._values=v._values?xe(v._values):void 0,h._index=xe(v._index),h._ptr=xe(v._ptr),h._size=xe(v._size),h._datatype=y||v._datatype):a(h,v.valueOf(),y||v._datatype)}function a(h,v,y){h._values=[],h._index=[],h._ptr=[],h._datatype=y;var A=v.length,g=0,E=r,D=0;if(je(y)&&(E=t.find(r,[y,y])||r,D=t.convert(0,y)),A>0){var w=0;do{h._ptr.push(h._index.length);for(var _=0;_<A;_++){var x=v[_];if(Me(x)){if(w===0&&g<x.length&&(g=x.length),w<x.length){var S=x[w];E(S,D)||(h._values.push(S),h._index.push(_))}}else w===0&&g<1&&(g=1),E(x,D)||(h._values.push(x),h._index.push(_))}w++}while(w<g)}h._ptr.push(h._index.length),h._size=[A,g]}i.prototype=new n,i.prototype.createSparseMatrix=function(h,v){return new i(h,v)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return sn(this._values,st)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(h,v){return new i(h,v)},i.prototype.density=function(){var h=this._size[0],v=this._size[1];return h!==0&&v!==0?this._index.length/(h*v):0},i.prototype.subset=function(h,v,y){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return u(this,h);case 2:case 3:return f(this,h,v,y);default:throw new SyntaxError("Wrong number of arguments")}};function u(h,v){if(!Dr(v))throw new TypeError("Invalid index");var y=v.isScalar();if(y)return h.get(v.min());var A=v.size();if(A.length!==h._size.length)throw new ae(A.length,h._size.length);var g,E,D,w,_=v.min(),x=v.max();for(g=0,E=h._size.length;g<E;g++)Se(_[g],h._size[g]),Se(x[g],h._size[g]);var S=h._values,b=h._index,C=h._ptr,T=v.dimension(0),k=v.dimension(1),O=[],L=[];T.forEach(function($,Q){L[$]=Q[0],O[$]=!0});var N=S?[]:void 0,G=[],Z=[];return k.forEach(function($){for(Z.push(G.length),D=C[$],w=C[$+1];D<w;D++)g=b[D],O[g]===!0&&(G.push(L[g]),N&&N.push(S[D]))}),Z.push(G.length),new i({values:N,index:G,ptr:Z,size:A,datatype:h._datatype})}function f(h,v,y,A){if(!v||v.isIndex!==!0)throw new TypeError("Invalid index");var g=v.size(),E=v.isScalar(),D;if(pe(y)?(D=y.size(),y=y.toArray()):D=me(y),E){if(D.length!==0)throw new TypeError("Scalar expected");h.set(v.min(),y,A)}else{if(g.length!==1&&g.length!==2)throw new ae(g.length,h._size.length,"<");if(D.length<g.length){for(var w=0,_=0;g[w]===1&&D[w]===1;)w++;for(;g[w]===1;)_++,w++;y=gi(y,g.length,_,D)}if(!ht(g,D))throw new ae(g,D,">");if(g.length===1){var x=v.dimension(0);x.forEach(function(C,T){Se(C),h.set([C,0],y[T[0]],A)})}else{var S=v.dimension(0),b=v.dimension(1);S.forEach(function(C,T){Se(C),b.forEach(function(k,O){Se(k),h.set([C,k],y[T[0]][O[0]],A)})})}}return h}i.prototype.get=function(h){if(!Me(h))throw new TypeError("Array expected");if(h.length!==this._size.length)throw new ae(h.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var v=h[0],y=h[1];Se(v,this._size[0]),Se(y,this._size[1]);var A=s(v,this._ptr[y],this._ptr[y+1],this._index);return A<this._ptr[y+1]&&this._index[A]===v?this._values[A]:0},i.prototype.set=function(h,v,y){if(!Me(h))throw new TypeError("Array expected");if(h.length!==this._size.length)throw new ae(h.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var A=h[0],g=h[1],E=this._size[0],D=this._size[1],w=r,_=0;je(this._datatype)&&(w=t.find(r,[this._datatype,this._datatype])||r,_=t.convert(0,this._datatype)),(A>E-1||g>D-1)&&(p(this,Math.max(A+1,E),Math.max(g+1,D),y),E=this._size[0],D=this._size[1]),Se(A,E),Se(g,D);var x=s(A,this._ptr[g],this._ptr[g+1],this._index);return x<this._ptr[g+1]&&this._index[x]===A?w(v,_)?c(x,g,this._values,this._index,this._ptr):this._values[x]=v:w(v,_)||l(x,A,g,v,this._values,this._index,this._ptr),this};function s(h,v,y,A){if(y-v===0)return y;for(var g=v;g<y;g++)if(A[g]===h)return g;return v}function c(h,v,y,A,g){y.splice(h,1),A.splice(h,1);for(var E=v+1;E<g.length;E++)g[E]--}function l(h,v,y,A,g,E,D){g.splice(h,0,A),E.splice(h,0,v);for(var w=y+1;w<D.length;w++)D[w]++}i.prototype.resize=function(h,v,y){if(!Ut(h))throw new TypeError("Array or Matrix expected");var A=h.valueOf().map(E=>Array.isArray(E)&&E.length===1?E[0]:E);if(A.length!==2)throw new Error("Only two dimensions matrix are supported");A.forEach(function(E){if(!ce(E)||!ue(E)||E<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Ce(A)+")")});var g=y?this.clone():this;return p(g,A[0],A[1],v)};function p(h,v,y,A){var g=A||0,E=r,D=0;je(h._datatype)&&(E=t.find(r,[h._datatype,h._datatype])||r,D=t.convert(0,h._datatype),g=t.convert(g,h._datatype));var w=!E(g,D),_=h._size[0],x=h._size[1],S,b,C;if(y>x){for(b=x;b<y;b++)if(h._ptr[b]=h._values.length,w)for(S=0;S<_;S++)h._values.push(g),h._index.push(S);h._ptr[y]=h._values.length}else y<x&&(h._ptr.splice(y+1,x-y),h._values.splice(h._ptr[y],h._values.length),h._index.splice(h._ptr[y],h._index.length));if(x=y,v>_){if(w){var T=0;for(b=0;b<x;b++){h._ptr[b]=h._ptr[b]+T,C=h._ptr[b+1]+T;var k=0;for(S=_;S<v;S++,k++)h._values.splice(C+k,0,g),h._index.splice(C+k,0,S),T++}h._ptr[x]=h._values.length}}else if(v<_){var O=0;for(b=0;b<x;b++){h._ptr[b]=h._ptr[b]-O;var L=h._ptr[b],N=h._ptr[b+1]-O;for(C=L;C<N;C++)S=h._index[C],S>v-1&&(h._values.splice(C,1),h._index.splice(C,1),O++)}h._ptr[b]=h._values.length}return h._size[0]=v,h._size[1]=y,h}i.prototype.reshape=function(h,v){if(!Me(h))throw new TypeError("Array expected");if(h.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");h.forEach(function($){if(!ce($)||!ue($)||$<=-2||$===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Ce(h)+")")});var y=this._size[0]*this._size[1];h=un(h,y);var A=h[0]*h[1];if(y!==A)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var g=v?this.clone():this;if(this._size[0]===h[0]&&this._size[1]===h[1])return g;for(var E=[],D=0;D<g._ptr.length;D++)for(var w=0;w<g._ptr[D+1]-g._ptr[D];w++)E.push(D);for(var _=g._values.slice(),x=g._index.slice(),S=0;S<g._index.length;S++){var b=x[S],C=E[S],T=b*g._size[1]+C;E[S]=T%h[1],x[S]=Math.floor(T/h[1])}g._values.length=0,g._index.length=0,g._ptr.length=h[1]+1,g._size=h.slice();for(var k=0;k<g._ptr.length;k++)g._ptr[k]=0;for(var O=0;O<_.length;O++){var L=x[O],N=E[O],G=_[O],Z=s(L,g._ptr[N],g._ptr[N+1],g._index);l(Z,L,N,G,g._values,g._index,g._ptr)}return g},i.prototype.clone=function(){var h=new i({values:this._values?xe(this._values):void 0,index:xe(this._index),ptr:xe(this._ptr),size:xe(this._size),datatype:this._datatype});return h},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(h,v){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var y=this,A=this._size[0],g=this._size[1],E=Sr(h,y,"map"),D=function(_,x,S){return E.fn(_,[x,S],y)};return m(this,0,A-1,0,g-1,D,v)};function m(h,v,y,A,g,E,D){var w=[],_=[],x=[],S=r,b=0;je(h._datatype)&&(S=t.find(r,[h._datatype,h._datatype])||r,b=t.convert(0,h._datatype));for(var C=function(fe,Ee,ye){var ve=E(fe,Ee,ye);S(ve,b)||(w.push(ve),_.push(Ee))},T=A;T<=g;T++){x.push(w.length);var k=h._ptr[T],O=h._ptr[T+1];if(D)for(var L=k;L<O;L++){var N=h._index[L];N>=v&&N<=y&&C(h._values[L],N-v,T-A)}else{for(var G={},Z=k;Z<O;Z++){var $=h._index[Z];G[$]=h._values[Z]}for(var Q=v;Q<=y;Q++){var te=Q in G?G[Q]:0;C(te,Q-v,T-A)}}}return x.push(w.length),new i({values:w,index:_,ptr:x,size:[y-v+1,g-A+1]})}i.prototype.forEach=function(h,v){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var y=this,A=this._size[0],g=this._size[1],E=Sr(h,y,"forEach"),D=0;D<g;D++){var w=this._ptr[D],_=this._ptr[D+1];if(v)for(var x=w;x<_;x++){var S=this._index[x];E.fn(this._values[x],[S,D],y)}else{for(var b={},C=w;C<_;C++){var T=this._index[C];b[T]=this._values[C]}for(var k=0;k<A;k++){var O=k in b?b[k]:0;E.fn(O,[k,D],y)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var h=this._size[1],v=0;v<h;v++)for(var y=this._ptr[v],A=this._ptr[v+1],g=y;g<A;g++){var E=this._index[g];yield{value:this._values[g],index:[E,v]}}},i.prototype.toArray=function(){return d(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return d(this._values,this._index,this._ptr,this._size,!1)};function d(h,v,y,A,g){var E=A[0],D=A[1],w=[],_,x;for(_=0;_<E;_++)for(w[_]=[],x=0;x<D;x++)w[_][x]=0;for(x=0;x<D;x++)for(var S=y[x],b=y[x+1],C=S;C<b;C++)_=v[C],w[_][x]=h?g?xe(h[C]):h[C]:1;return w}return i.prototype.format=function(h){for(var v=this._size[0],y=this._size[1],A=this.density(),g="Sparse Matrix ["+Ce(v,h)+" x "+Ce(y,h)+"] density: "+Ce(A,h)+`
`,E=0;E<y;E++)for(var D=this._ptr[E],w=this._ptr[E+1],_=D;_<w;_++){var x=this._index[_];g+=`
    (`+Ce(x,h)+", "+Ce(E,h)+") ==> "+(this._values?Ce(this._values[_],h):"X")}return g},i.prototype.toString=function(){return Ce(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(h){if(h){if(le(h)&&(h=h.toNumber()),!ce(h)||!ue(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var v=h>0?h:0,y=h<0?-h:0,A=this._size[0],g=this._size[1],E=Math.min(A-y,g-v),D=[],w=[],_=[];_[0]=0;for(var x=v;x<g&&D.length<E;x++)for(var S=this._ptr[x],b=this._ptr[x+1],C=S;C<b;C++){var T=this._index[C];if(T===x-v+y){D.push(this._values[C]),w[D.length-1]=T-y;break}}return _.push(D.length),new i({values:D,index:w,ptr:_,size:[E,1]})},i.fromJSON=function(h){return new i(h)},i.diagonal=function(h,v,y,A,g){if(!Me(h))throw new TypeError("Array expected, size parameter");if(h.length!==2)throw new Error("Only two dimensions matrix are supported");if(h=h.map(function($){if(le($)&&($=$.toNumber()),!ce($)||!ue($)||$<1)throw new Error("Size values must be positive integers");return $}),y){if(le(y)&&(y=y.toNumber()),!ce(y)||!ue(y))throw new TypeError("The parameter k must be an integer number")}else y=0;var E=r,D=0;je(g)&&(E=t.find(r,[g,g])||r,D=t.convert(0,g));var w=y>0?y:0,_=y<0?-y:0,x=h[0],S=h[1],b=Math.min(x-_,S-w),C;if(Me(v)){if(v.length!==b)throw new Error("Invalid value array length");C=function(Q){return v[Q]}}else if(pe(v)){var T=v.size();if(T.length!==1||T[0]!==b)throw new Error("Invalid matrix length");C=function(Q){return v.get([Q])}}else C=function(){return v};for(var k=[],O=[],L=[],N=0;N<S;N++){L.push(k.length);var G=N-w;if(G>=0&&G<b){var Z=C(G);E(Z,D)||(O.push(G+_),k.push(Z))}}return L.push(k.length),new i({values:k,index:O,ptr:L,size:[x,S]})},i.prototype.swapRows=function(h,v){if(!ce(h)||!ue(h)||!ce(v)||!ue(v))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Se(h,this._size[0]),Se(v,this._size[0]),i._swapRows(h,v,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(h,v,y,A,g){for(var E=A[h],D=A[h+1],w=E;w<D;w++)g(y[w],v[w])},i._swapRows=function(h,v,y,A,g,E){for(var D=0;D<y;D++){var w=E[D],_=E[D+1],x=s(h,w,_,g),S=s(v,w,_,g);if(x<_&&S<_&&g[x]===h&&g[S]===v){if(A){var b=A[x];A[x]=A[S],A[S]=b}continue}if(x<_&&g[x]===h&&(S>=_||g[S]!==v)){var C=A?A[x]:void 0;g.splice(S,0,v),A&&A.splice(S,0,C),g.splice(S<=x?x+1:x,1),A&&A.splice(S<=x?x+1:x,1);continue}if(S<_&&g[S]===v&&(x>=_||g[x]!==h)){var T=A?A[S]:void 0;g.splice(x,0,h),A&&A.splice(x,0,T),g.splice(x<=S?S+1:S,1),A&&A.splice(x<=S?S+1:S,1)}}},i},{isClass:!0});var Kd="number",Jd=["typed"];function jd(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(t){var r={"0b":2,"0o":8,"0x":16}[t[1]],n=t[2],i=t[3];return{input:e,radix:r,integerPart:n,fractionalPart:i}}else return null}function eg(e){for(var t=parseInt(e.integerPart,e.radix),r=0,n=0;n<e.fractionalPart.length;n++){var i=parseInt(e.fractionalPart[n],e.radix);r+=i/Math.pow(e.radix,n+1)}var o=t+r;if(isNaN(o))throw new SyntaxError('String "'+e.input+'" is not a valid number');return o}var pa=V(Kd,Jd,e=>{var{typed:t}=e,r=t("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var o=jd(i);if(o)return eg(o);var a=0,u=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);u&&(a=Number(u[2]),i=u[1]);var f=Number(i);if(isNaN(f))throw new SyntaxError('String "'+i+'" is not a valid number');if(u){if(f>2**a-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));f>=2**(a-1)&&(f=f-2**a)}return f},BigNumber:function(i){return i.toNumber()},bigint:function(i){return Number(i)},Fraction:function(i){return i.valueOf()},Unit:t.referToSelf(n=>i=>{var o=i.clone();return o.value=n(i.value),o}),null:function(i){return 0},"Unit, string | Unit":function(i,o){return i.toNumber(o)},"Array | Matrix":t.referToSelf(n=>i=>Ye(i,n))});return r.fromJSON=function(n){return parseFloat(n.value)},r});var tg="bignumber",rg=["typed","BigNumber"],ha=V(tg,rg,e=>{var{typed:t,BigNumber:r}=e;return t("bignumber",{"":function(){return new r(0)},number:function(i){return new r(i+"")},string:function(i){var o=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(o){var a=o[2],u=r(o[1]),f=new r(2).pow(Number(a));if(u.gt(f.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var s=new r(2).pow(Number(a)-1);return u.gte(s)?u.sub(f):u}return new r(i)},BigNumber:function(i){return i},bigint:function(i){return new r(i.toString())},Unit:t.referToSelf(n=>i=>{var o=i.clone();return o.value=n(i.value),o}),Fraction:function(i){return new r(String(i.n)).div(String(i.d)).times(String(i.s))},null:function(i){return new r(0)},"Array | Matrix":t.referToSelf(n=>i=>Ye(i,n))})});var ng="fraction",ig=["typed","Fraction"],ma=V(ng,ig,e=>{var{typed:t,Fraction:r}=e;return t("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new r(i)},string:function(i){return new r(i)},"number, number":function(i,o){return new r(i,o)},"bigint, bigint":function(i,o){return new r(i,o)},null:function(i){return new r(0)},BigNumber:function(i){return new r(i.toString())},bigint:function(i){return new r(i.toString())},Fraction:function(i){return i},Unit:t.referToSelf(n=>i=>{var o=i.clone();return o.value=n(i.value),o}),Object:function(i){return new r(i)},"Array | Matrix":t.referToSelf(n=>i=>Ye(i,n))})});var kc="matrix",og=["typed","Matrix","DenseMatrix","SparseMatrix"],da=V(kc,og,e=>{var{typed:t,Matrix:r,DenseMatrix:n,SparseMatrix:i}=e;return t(kc,{"":function(){return o([])},string:function(u){return o([],u)},"string, string":function(u,f){return o([],u,f)},Array:function(u){return o(u)},Matrix:function(u){return o(u,u.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(a,u,f){if(u==="dense"||u==="default"||u===void 0)return new n(a,f);if(u==="sparse")return new i(a,f);throw new TypeError("Unknown matrix type "+JSON.stringify(u)+".")}});var qc="unaryMinus",ag=["typed"],ga=V(qc,ag,e=>{var{typed:t}=e;return t(qc,{number:sa,"Complex | BigNumber | Fraction":r=>r.neg(),bigint:r=>-r,Unit:t.referToSelf(r=>n=>{var i=n.clone();return i.value=t.find(r,i.valueType())(n.value),i}),"Array | Matrix":t.referToSelf(r=>n=>Ye(n,r,!0))})});var Lc="abs",ug=["typed"],va=V(Lc,ug,e=>{var{typed:t}=e;return t(Lc,{number:ia,"Complex | BigNumber | Fraction | Unit":r=>r.abs(),bigint:r=>r<0n?-r:r,"Array | Matrix":t.referToSelf(r=>n=>Ye(n,r,!0))})});var Uc="addScalar",sg=["typed"],xa=V(Uc,sg,e=>{var{typed:t}=e;return t(Uc,{"number, number":oa,"Complex, Complex":function(n,i){return n.add(i)},"BigNumber, BigNumber":function(n,i){return n.plus(i)},"bigint, bigint":function(n,i){return n+i},"Fraction, Fraction":function(n,i){return n.add(i)},"Unit, Unit":t.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var o=n.clone();return o.value=t.find(r,[o.valueType(),i.valueType()])(o.value,i.value),o.fixPrefix=!1,o})})});var $c="subtractScalar",fg=["typed"],Da=V($c,fg,e=>{var{typed:t}=e;return t($c,{"number, number":aa,"Complex, Complex":function(n,i){return n.sub(i)},"BigNumber, BigNumber":function(n,i){return n.minus(i)},"bigint, bigint":function(n,i){return n-i},"Fraction, Fraction":function(n,i){return n.sub(i)},"Unit, Unit":t.referToSelf(r=>(n,i)=>{if(n.value===null||n.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(i))throw new Error("Units do not match");var o=n.clone();return o.value=t.find(r,[o.valueType(),i.valueType()])(o.value,i.value),o.fixPrefix=!1,o})})});var cg="matAlgo11xS0s",lg=["typed","equalScalar"],Vc=V(cg,lg,e=>{var{typed:t,equalScalar:r}=e;return function(i,o,a,u){var f=i._values,s=i._index,c=i._ptr,l=i._size,p=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=l[0],d=l[1],h,v=r,y=0,A=a;typeof p=="string"&&(h=p,v=t.find(r,[h,h]),y=t.convert(0,h),o=t.convert(o,h),A=t.find(a,[h,h]));for(var g=[],E=[],D=[],w=0;w<d;w++){D[w]=E.length;for(var _=c[w],x=c[w+1],S=_;S<x;S++){var b=s[S],C=u?A(o,f[S]):A(f[S],o);v(C,y)||(E.push(b),g.push(C))}}return D[d]=E.length,i.createSparseMatrix({values:g,index:E,ptr:D,size:[m,d],datatype:h})}});var pg="matAlgo12xSfs",hg=["typed","DenseMatrix"],Hc=V(pg,hg,e=>{var{typed:t,DenseMatrix:r}=e;return function(i,o,a,u){var f=i._values,s=i._index,c=i._ptr,l=i._size,p=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=l[0],d=l[1],h,v=a;typeof p=="string"&&(h=p,o=t.convert(o,h),v=t.find(a,[h,h]));for(var y=[],A=[],g=[],E=0;E<d;E++){for(var D=E+1,w=c[E],_=c[E+1],x=w;x<_;x++){var S=s[x];A[S]=f[x],g[S]=D}for(var b=0;b<m;b++)E===0&&(y[b]=[]),g[b]===D?y[b][E]=u?v(o,A[b]):v(A[b],o):y[b][E]=u?v(o,0):v(0,o)}return new r({data:y,size:[m,d],datatype:h})}});var mg="matAlgo14xDs",dg=["typed"],Di=V(mg,dg,e=>{var{typed:t}=e;return function(i,o,a,u){var f=i._data,s=i._size,c=i._datatype,l,p=a;typeof c=="string"&&(l=c,o=t.convert(o,l),p=t.find(a,[l,l]));var m=s.length>0?r(p,0,s,s[0],f,o,u):[];return i.createDenseMatrix({data:m,size:xe(s),datatype:l})};function r(n,i,o,a,u,f,s){var c=[];if(i===o.length-1)for(var l=0;l<a;l++)c[l]=s?n(f,u[l]):n(u[l],f);else for(var p=0;p<a;p++)c[p]=r(n,i+1,o,o[i+1],u[p],f,s);return c}});var gg="matAlgo03xDSf",vg=["typed"],Gc=V(gg,vg,e=>{var{typed:t}=e;return function(n,i,o,a){var u=n._data,f=n._size,s=n._datatype||n.getDataType(),c=i._values,l=i._index,p=i._ptr,m=i._size,d=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(f.length!==m.length)throw new ae(f.length,m.length);if(f[0]!==m[0]||f[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+m+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h=f[0],v=f[1],y,A=0,g=o;typeof s=="string"&&s===d&&s!=="mixed"&&(y=s,A=t.convert(0,y),g=t.find(o,[y,y]));for(var E=[],D=0;D<h;D++)E[D]=[];for(var w=[],_=[],x=0;x<v;x++){for(var S=x+1,b=p[x],C=p[x+1],T=b;T<C;T++){var k=l[T];w[k]=a?g(c[T],u[k][x]):g(u[k][x],c[T]),_[k]=S}for(var O=0;O<h;O++)_[O]===S?E[O][x]=w[O]:E[O][x]=a?g(A,u[O][x]):g(u[O][x],A)}return n.createDenseMatrix({data:E,size:[h,v],datatype:s===n._datatype&&d===i._datatype?y:void 0})}});var xg="matAlgo05xSfSf",Dg=["typed","equalScalar"],Zc=V(xg,Dg,e=>{var{typed:t,equalScalar:r}=e;return function(i,o,a){var u=i._values,f=i._index,s=i._ptr,c=i._size,l=i._datatype||i._data===void 0?i._datatype:i.getDataType(),p=o._values,m=o._index,d=o._ptr,h=o._size,v=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==h.length)throw new ae(c.length,h.length);if(c[0]!==h[0]||c[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+h+")");var y=c[0],A=c[1],g,E=r,D=0,w=a;typeof l=="string"&&l===v&&l!=="mixed"&&(g=l,E=t.find(r,[g,g]),D=t.convert(0,g),w=t.find(a,[g,g]));var _=u&&p?[]:void 0,x=[],S=[],b=_?[]:void 0,C=_?[]:void 0,T=[],k=[],O,L,N,G;for(L=0;L<A;L++){S[L]=x.length;var Z=L+1;for(N=s[L],G=s[L+1];N<G;N++)O=f[N],x.push(O),T[O]=Z,b&&(b[O]=u[N]);for(N=d[L],G=d[L+1];N<G;N++)O=m[N],T[O]!==Z&&x.push(O),k[O]=Z,C&&(C[O]=p[N]);if(_)for(N=S[L];N<x.length;){O=x[N];var $=T[O],Q=k[O];if($===Z||Q===Z){var te=$===Z?b[O]:D,j=Q===Z?C[O]:D,fe=w(te,j);E(fe,D)?x.splice(N,1):(_.push(fe),N++)}}}return S[A]=x.length,i.createSparseMatrix({values:_,index:x,ptr:S,size:[y,A],datatype:l===i._datatype&&v===o._datatype?g:void 0})}});var yg="matAlgo13xDD",wg=["typed"],Wc=V(yg,wg,e=>{var{typed:t}=e;return function(i,o,a){var u=i._data,f=i._size,s=i._datatype,c=o._data,l=o._size,p=o._datatype,m=[];if(f.length!==l.length)throw new ae(f.length,l.length);for(var d=0;d<f.length;d++){if(f[d]!==l[d])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+l+")");m[d]=f[d]}var h,v=a;typeof s=="string"&&s===p&&(h=s,v=t.find(a,[h,h]));var y=m.length>0?r(v,0,m,m[0],u,c):[];return i.createDenseMatrix({data:y,size:m,datatype:h})};function r(n,i,o,a,u,f){var s=[];if(i===o.length-1)for(var c=0;c<a;c++)s[c]=n(u[c],f[c]);else for(var l=0;l<a;l++)s[l]=r(n,i+1,o,o[i+1],u[l],f[l]);return s}});function Re(e,t){if(ht(e.size(),t.size()))return[e,t];var r=jo(e.size(),t.size());return[e,t].map(n=>Ag(n,r))}function Ag(e,t){return ht(e.size(),t)?e:e.create(fn(e.valueOf(),t),e.datatype())}var Eg="matrixAlgorithmSuite",Fg=["typed","matrix"],yi=V(Eg,Fg,e=>{var{typed:t,matrix:r}=e,n=Wc({typed:t}),i=Di({typed:t});return function(a){var u=a.elop,f=a.SD||a.DS,s;u?(s={"DenseMatrix, DenseMatrix":(m,d)=>n(...Re(m,d),u),"Array, Array":(m,d)=>n(...Re(r(m),r(d)),u).valueOf(),"Array, DenseMatrix":(m,d)=>n(...Re(r(m),d),u),"DenseMatrix, Array":(m,d)=>n(...Re(m,r(d)),u)},a.SS&&(s["SparseMatrix, SparseMatrix"]=(m,d)=>a.SS(...Re(m,d),u,!1)),a.DS&&(s["DenseMatrix, SparseMatrix"]=(m,d)=>a.DS(...Re(m,d),u,!1),s["Array, SparseMatrix"]=(m,d)=>a.DS(...Re(r(m),d),u,!1)),f&&(s["SparseMatrix, DenseMatrix"]=(m,d)=>f(...Re(d,m),u,!0),s["SparseMatrix, Array"]=(m,d)=>f(...Re(r(d),m),u,!0))):(s={"DenseMatrix, DenseMatrix":t.referToSelf(m=>(d,h)=>n(...Re(d,h),m)),"Array, Array":t.referToSelf(m=>(d,h)=>n(...Re(r(d),r(h)),m).valueOf()),"Array, DenseMatrix":t.referToSelf(m=>(d,h)=>n(...Re(r(d),h),m)),"DenseMatrix, Array":t.referToSelf(m=>(d,h)=>n(...Re(d,r(h)),m))},a.SS&&(s["SparseMatrix, SparseMatrix"]=t.referToSelf(m=>(d,h)=>a.SS(...Re(d,h),m,!1))),a.DS&&(s["DenseMatrix, SparseMatrix"]=t.referToSelf(m=>(d,h)=>a.DS(...Re(d,h),m,!1)),s["Array, SparseMatrix"]=t.referToSelf(m=>(d,h)=>a.DS(...Re(r(d),h),m,!1))),f&&(s["SparseMatrix, DenseMatrix"]=t.referToSelf(m=>(d,h)=>f(...Re(h,d),m,!0)),s["SparseMatrix, Array"]=t.referToSelf(m=>(d,h)=>f(...Re(r(h),d),m,!0))));var c=a.scalar||"any",l=a.Ds||a.Ss;l&&(u?(s["DenseMatrix,"+c]=(m,d)=>i(m,d,u,!1),s[c+", DenseMatrix"]=(m,d)=>i(d,m,u,!0),s["Array,"+c]=(m,d)=>i(r(m),d,u,!1).valueOf(),s[c+", Array"]=(m,d)=>i(r(d),m,u,!0).valueOf()):(s["DenseMatrix,"+c]=t.referToSelf(m=>(d,h)=>i(d,h,m,!1)),s[c+", DenseMatrix"]=t.referToSelf(m=>(d,h)=>i(h,d,m,!0)),s["Array,"+c]=t.referToSelf(m=>(d,h)=>i(r(d),h,m,!1).valueOf()),s[c+", Array"]=t.referToSelf(m=>(d,h)=>i(r(h),d,m,!0).valueOf())));var p=a.sS!==void 0?a.sS:a.Ss;return u?(a.Ss&&(s["SparseMatrix,"+c]=(m,d)=>a.Ss(m,d,u,!1)),p&&(s[c+", SparseMatrix"]=(m,d)=>p(d,m,u,!0))):(a.Ss&&(s["SparseMatrix,"+c]=t.referToSelf(m=>(d,h)=>a.Ss(d,h,m,!1))),p&&(s[c+", SparseMatrix"]=t.referToSelf(m=>(d,h)=>p(h,d,m,!0)))),u&&u.signatures&&Hf(s,u.signatures),s}});var _g="matAlgo01xDSid",Cg=["typed"],wi=V(_g,Cg,e=>{var{typed:t}=e;return function(n,i,o,a){var u=n._data,f=n._size,s=n._datatype||n.getDataType(),c=i._values,l=i._index,p=i._ptr,m=i._size,d=i._datatype||i._data===void 0?i._datatype:i.getDataType();if(f.length!==m.length)throw new ae(f.length,m.length);if(f[0]!==m[0]||f[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+f+") must match Matrix B ("+m+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var h=f[0],v=f[1],y=typeof s=="string"&&s!=="mixed"&&s===d?s:void 0,A=y?t.find(o,[y,y]):o,g,E,D=[];for(g=0;g<h;g++)D[g]=[];var w=[],_=[];for(E=0;E<v;E++){for(var x=E+1,S=p[E],b=p[E+1],C=S;C<b;C++)g=l[C],w[g]=a?A(c[C],u[g][E]):A(u[g][E],c[C]),_[g]=x;for(g=0;g<h;g++)_[g]===x?D[g][E]=w[g]:D[g][E]=u[g][E]}return n.createDenseMatrix({data:D,size:[h,v],datatype:s===n._datatype&&d===i._datatype?y:void 0})}});var bg="matAlgo04xSidSid",Sg=["typed","equalScalar"],Xc=V(bg,Sg,e=>{var{typed:t,equalScalar:r}=e;return function(i,o,a){var u=i._values,f=i._index,s=i._ptr,c=i._size,l=i._datatype||i._data===void 0?i._datatype:i.getDataType(),p=o._values,m=o._index,d=o._ptr,h=o._size,v=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(c.length!==h.length)throw new ae(c.length,h.length);if(c[0]!==h[0]||c[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+h+")");var y=c[0],A=c[1],g,E=r,D=0,w=a;typeof l=="string"&&l===v&&l!=="mixed"&&(g=l,E=t.find(r,[g,g]),D=t.convert(0,g),w=t.find(a,[g,g]));var _=u&&p?[]:void 0,x=[],S=[],b=u&&p?[]:void 0,C=u&&p?[]:void 0,T=[],k=[],O,L,N,G,Z;for(L=0;L<A;L++){S[L]=x.length;var $=L+1;for(G=s[L],Z=s[L+1],N=G;N<Z;N++)O=f[N],x.push(O),T[O]=$,b&&(b[O]=u[N]);for(G=d[L],Z=d[L+1],N=G;N<Z;N++)if(O=m[N],T[O]===$){if(b){var Q=w(b[O],p[N]);E(Q,D)?T[O]=null:b[O]=Q}}else x.push(O),k[O]=$,C&&(C[O]=p[N]);if(b&&C)for(N=S[L];N<x.length;)O=x[N],T[O]===$?(_[N]=b[O],N++):k[O]===$?(_[N]=C[O],N++):x.splice(N,1)}return S[A]=x.length,i.createSparseMatrix({values:_,index:x,ptr:S,size:[y,A],datatype:l===i._datatype&&v===o._datatype?g:void 0})}});var Mg="matAlgo10xSids",Ng=["typed","DenseMatrix"],Ai=V(Mg,Ng,e=>{var{typed:t,DenseMatrix:r}=e;return function(i,o,a,u){var f=i._values,s=i._index,c=i._ptr,l=i._size,p=i._datatype;if(!f)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=l[0],d=l[1],h,v=a;typeof p=="string"&&(h=p,o=t.convert(o,h),v=t.find(a,[h,h]));for(var y=[],A=[],g=[],E=0;E<d;E++){for(var D=E+1,w=c[E],_=c[E+1],x=w;x<_;x++){var S=s[x];A[S]=f[x],g[S]=D}for(var b=0;b<m;b++)E===0&&(y[b]=[]),g[b]===D?y[b][E]=u?v(o,A[b]):v(A[b],o):y[b][E]=o}return new r({data:y,size:[m,d],datatype:h})}});var Bg="multiplyScalar",Tg=["typed"],ya=V(Bg,Tg,e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":ua,"Complex, Complex":function(n,i){return n.mul(i)},"BigNumber, BigNumber":function(n,i){return n.times(i)},"bigint, bigint":function(n,i){return n*i},"Fraction, Fraction":function(n,i){return n.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(r,n)=>n.multiply(r),"Unit, number | Fraction | BigNumber | Complex | Unit":(r,n)=>r.multiply(n)})});var Yc="multiply",Ig=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],wa=V(Yc,Ig,e=>{var{typed:t,matrix:r,addScalar:n,multiplyScalar:i,equalScalar:o,dot:a}=e,u=Vc({typed:t,equalScalar:o}),f=Di({typed:t});function s(D,w){switch(D.length){case 1:switch(w.length){case 1:if(D[0]!==w[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(D[0]!==w[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+D[0]+") must match Matrix rows ("+w[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+w.length+" dimensions)")}break;case 2:switch(w.length){case 1:if(D[1]!==w[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+D[1]+") must match Vector length ("+w[0]+")");break;case 2:if(D[1]!==w[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+D[1]+") must match Matrix B rows ("+w[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+w.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+D.length+" dimensions)")}}function c(D,w,_){if(_===0)throw new Error("Cannot multiply two empty vectors");return a(D,w)}function l(D,w){if(w.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return p(D,w)}function p(D,w){var _=D._data,x=D._size,S=D._datatype||D.getDataType(),b=w._data,C=w._size,T=w._datatype||w.getDataType(),k=x[0],O=C[1],L,N=n,G=i;S&&T&&S===T&&typeof S=="string"&&S!=="mixed"&&(L=S,N=t.find(n,[L,L]),G=t.find(i,[L,L]));for(var Z=[],$=0;$<O;$++){for(var Q=G(_[0],b[0][$]),te=1;te<k;te++)Q=N(Q,G(_[te],b[te][$]));Z[$]=Q}return D.createDenseMatrix({data:Z,size:[O],datatype:S===D._datatype&&T===w._datatype?L:void 0})}var m=t("_multiplyMatrixVector",{"DenseMatrix, any":h,"SparseMatrix, any":A}),d=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":v,"DenseMatrix, SparseMatrix":y,"SparseMatrix, DenseMatrix":g,"SparseMatrix, SparseMatrix":E});function h(D,w){var _=D._data,x=D._size,S=D._datatype||D.getDataType(),b=w._data,C=w._datatype||w.getDataType(),T=x[0],k=x[1],O,L=n,N=i;S&&C&&S===C&&typeof S=="string"&&S!=="mixed"&&(O=S,L=t.find(n,[O,O]),N=t.find(i,[O,O]));for(var G=[],Z=0;Z<T;Z++){for(var $=_[Z],Q=N($[0],b[0]),te=1;te<k;te++)Q=L(Q,N($[te],b[te]));G[Z]=Q}return D.createDenseMatrix({data:G,size:[T],datatype:S===D._datatype&&C===w._datatype?O:void 0})}function v(D,w){var _=D._data,x=D._size,S=D._datatype||D.getDataType(),b=w._data,C=w._size,T=w._datatype||w.getDataType(),k=x[0],O=x[1],L=C[1],N,G=n,Z=i;S&&T&&S===T&&typeof S=="string"&&S!=="mixed"&&S!=="mixed"&&(N=S,G=t.find(n,[N,N]),Z=t.find(i,[N,N]));for(var $=[],Q=0;Q<k;Q++){var te=_[Q];$[Q]=[];for(var j=0;j<L;j++){for(var fe=Z(te[0],b[0][j]),Ee=1;Ee<O;Ee++)fe=G(fe,Z(te[Ee],b[Ee][j]));$[Q][j]=fe}}return D.createDenseMatrix({data:$,size:[k,L],datatype:S===D._datatype&&T===w._datatype?N:void 0})}function y(D,w){var _=D._data,x=D._size,S=D._datatype||D.getDataType(),b=w._values,C=w._index,T=w._ptr,k=w._size,O=w._datatype||w._data===void 0?w._datatype:w.getDataType();if(!b)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var L=x[0],N=k[1],G,Z=n,$=i,Q=o,te=0;S&&O&&S===O&&typeof S=="string"&&S!=="mixed"&&(G=S,Z=t.find(n,[G,G]),$=t.find(i,[G,G]),Q=t.find(o,[G,G]),te=t.convert(0,G));for(var j=[],fe=[],Ee=[],ye=w.createSparseMatrix({values:j,index:fe,ptr:Ee,size:[L,N],datatype:S===D._datatype&&O===w._datatype?G:void 0}),ve=0;ve<N;ve++){Ee[ve]=fe.length;var oe=T[ve],Te=T[ve+1];if(Te>oe)for(var Fe=0,he=0;he<L;he++){for(var Qe=he+1,Ie=void 0,se=oe;se<Te;se++){var Be=C[se];Fe!==Qe?(Ie=$(_[he][Be],b[se]),Fe=Qe):Ie=Z(Ie,$(_[he][Be],b[se]))}Fe===Qe&&!Q(Ie,te)&&(fe.push(he),j.push(Ie))}}return Ee[N]=fe.length,ye}function A(D,w){var _=D._values,x=D._index,S=D._ptr,b=D._datatype||D._data===void 0?D._datatype:D.getDataType();if(!_)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var C=w._data,T=w._datatype||w.getDataType(),k=D._size[0],O=w._size[0],L=[],N=[],G=[],Z,$=n,Q=i,te=o,j=0;b&&T&&b===T&&typeof b=="string"&&b!=="mixed"&&(Z=b,$=t.find(n,[Z,Z]),Q=t.find(i,[Z,Z]),te=t.find(o,[Z,Z]),j=t.convert(0,Z));var fe=[],Ee=[];G[0]=0;for(var ye=0;ye<O;ye++){var ve=C[ye];if(!te(ve,j))for(var oe=S[ye],Te=S[ye+1],Fe=oe;Fe<Te;Fe++){var he=x[Fe];Ee[he]?fe[he]=$(fe[he],Q(ve,_[Fe])):(Ee[he]=!0,N.push(he),fe[he]=Q(ve,_[Fe]))}}for(var Qe=N.length,Ie=0;Ie<Qe;Ie++){var se=N[Ie];L[Ie]=fe[se]}return G[1]=N.length,D.createSparseMatrix({values:L,index:N,ptr:G,size:[k,1],datatype:b===D._datatype&&T===w._datatype?Z:void 0})}function g(D,w){var _=D._values,x=D._index,S=D._ptr,b=D._datatype||D._data===void 0?D._datatype:D.getDataType();if(!_)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var C=w._data,T=w._datatype||w.getDataType(),k=D._size[0],O=w._size[0],L=w._size[1],N,G=n,Z=i,$=o,Q=0;b&&T&&b===T&&typeof b=="string"&&b!=="mixed"&&(N=b,G=t.find(n,[N,N]),Z=t.find(i,[N,N]),$=t.find(o,[N,N]),Q=t.convert(0,N));for(var te=[],j=[],fe=[],Ee=D.createSparseMatrix({values:te,index:j,ptr:fe,size:[k,L],datatype:b===D._datatype&&T===w._datatype?N:void 0}),ye=[],ve=[],oe=0;oe<L;oe++){fe[oe]=j.length;for(var Te=oe+1,Fe=0;Fe<O;Fe++){var he=C[Fe][oe];if(!$(he,Q))for(var Qe=S[Fe],Ie=S[Fe+1],se=Qe;se<Ie;se++){var Be=x[se];ve[Be]!==Te?(ve[Be]=Te,j.push(Be),ye[Be]=Z(he,_[se])):ye[Be]=G(ye[Be],Z(he,_[se]))}}for(var ke=fe[oe],ct=j.length,re=ke;re<ct;re++){var _e=j[re];te[re]=ye[_e]}}return fe[L]=j.length,Ee}function E(D,w){var _=D._values,x=D._index,S=D._ptr,b=D._datatype||D._data===void 0?D._datatype:D.getDataType(),C=w._values,T=w._index,k=w._ptr,O=w._datatype||w._data===void 0?w._datatype:w.getDataType(),L=D._size[0],N=w._size[1],G=_&&C,Z,$=n,Q=i;b&&O&&b===O&&typeof b=="string"&&b!=="mixed"&&(Z=b,$=t.find(n,[Z,Z]),Q=t.find(i,[Z,Z]));for(var te=G?[]:void 0,j=[],fe=[],Ee=D.createSparseMatrix({values:te,index:j,ptr:fe,size:[L,N],datatype:b===D._datatype&&O===w._datatype?Z:void 0}),ye=G?[]:void 0,ve=[],oe,Te,Fe,he,Qe,Ie,se,Be,ke=0;ke<N;ke++){fe[ke]=j.length;var ct=ke+1;for(Qe=k[ke],Ie=k[ke+1],he=Qe;he<Ie;he++)if(Be=T[he],G)for(Te=S[Be],Fe=S[Be+1],oe=Te;oe<Fe;oe++)se=x[oe],ve[se]!==ct?(ve[se]=ct,j.push(se),ye[se]=Q(C[he],_[oe])):ye[se]=$(ye[se],Q(C[he],_[oe]));else for(Te=S[Be],Fe=S[Be+1],oe=Te;oe<Fe;oe++)se=x[oe],ve[se]!==ct&&(ve[se]=ct,j.push(se));if(G)for(var re=fe[ke],_e=j.length,lt=re;lt<_e;lt++){var ut=j[lt];te[lt]=ye[ut]}}return fe[N]=j.length,Ee}return t(Yc,i,{"Array, Array":t.referTo("Matrix, Matrix",D=>(w,_)=>{s(me(w),me(_));var x=D(r(w),r(_));return pe(x)?x.valueOf():x}),"Matrix, Matrix":function(w,_){var x=w.size(),S=_.size();return s(x,S),x.length===1?S.length===1?c(w,_,x[0]):l(w,_):S.length===1?m(w,_):d(w,_)},"Matrix, Array":t.referTo("Matrix,Matrix",D=>(w,_)=>D(w,r(_))),"Array, Matrix":t.referToSelf(D=>(w,_)=>D(r(w,_.storage()),_)),"SparseMatrix, any":function(w,_){return u(w,_,i,!1)},"DenseMatrix, any":function(w,_){return f(w,_,i,!1)},"any, SparseMatrix":function(w,_){return u(_,w,i,!0)},"any, DenseMatrix":function(w,_){return f(_,w,i,!0)},"Array, any":function(w,_){return f(r(w),_,i,!1).valueOf()},"any, Array":function(w,_){return f(r(_),w,i,!0).valueOf()},"any, any":i,"any, any, ...any":t.referToSelf(D=>(w,_,x)=>{for(var S=D(w,_),b=0;b<x.length;b++)S=D(S,x[b]);return S})})});var Qc="subtract",Og=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],Aa=V(Qc,Og,e=>{var{typed:t,matrix:r,equalScalar:n,subtractScalar:i,unaryMinus:o,DenseMatrix:a,concat:u}=e,f=wi({typed:t}),s=Gc({typed:t}),c=Zc({typed:t,equalScalar:n}),l=Ai({typed:t,DenseMatrix:a}),p=Hc({typed:t,DenseMatrix:a}),m=yi({typed:t,matrix:r,concat:u});return t(Qc,{"any, any":i},m({elop:i,SS:c,DS:f,SD:s,Ss:p,sS:l}))});var Kc="conj",zg=["typed"],Ea=V(Kc,zg,e=>{var{typed:t}=e;return t(Kc,{"number | BigNumber | Fraction":r=>r,Complex:r=>r.conjugate(),Unit:t.referToSelf(r=>n=>new n.constructor(r(n.toNumeric()),n.formatUnits())),"Array | Matrix":t.referToSelf(r=>n=>Ye(n,r))})});var Jc="concat",Pg=["typed","matrix","isInteger"],Fa=V(Jc,Pg,e=>{var{typed:t,matrix:r,isInteger:n}=e;return t(Jc,{"...Array | Matrix | number | BigNumber":function(o){var a,u=o.length,f=-1,s,c=!1,l=[];for(a=0;a<u;a++){var p=o[a];if(pe(p)&&(c=!0),ce(p)||le(p)){if(a!==u-1)throw new Error("Dimension must be specified as last argument");if(s=f,f=p.valueOf(),!n(f))throw new TypeError("Integer number expected for dimension");if(f<0||a>0&&f>s)throw new It(f,s+1)}else{var m=xe(p).valueOf(),d=me(m);if(l[a]=m,s=f,f=d.length-1,a>0&&f!==s)throw new ae(s+1,f+1)}}if(l.length===0)throw new SyntaxError("At least one matrix expected");for(var h=l.shift();l.length;)h=Jo(h,l.shift(),f);return c?r(h):h},"...string":function(o){return o.join("")}})});var jc="diag",Rg=["typed","matrix","DenseMatrix","SparseMatrix"],_a=V(jc,Rg,e=>{var{typed:t,matrix:r,DenseMatrix:n,SparseMatrix:i}=e;return t(jc,{Array:function(s){return o(s,0,me(s),null)},"Array, number":function(s,c){return o(s,c,me(s),null)},"Array, BigNumber":function(s,c){return o(s,c.toNumber(),me(s),null)},"Array, string":function(s,c){return o(s,0,me(s),c)},"Array, number, string":function(s,c,l){return o(s,c,me(s),l)},"Array, BigNumber, string":function(s,c,l){return o(s,c.toNumber(),me(s),l)},Matrix:function(s){return o(s,0,s.size(),s.storage())},"Matrix, number":function(s,c){return o(s,c,s.size(),s.storage())},"Matrix, BigNumber":function(s,c){return o(s,c.toNumber(),s.size(),s.storage())},"Matrix, string":function(s,c){return o(s,0,s.size(),c)},"Matrix, number, string":function(s,c,l){return o(s,c,s.size(),l)},"Matrix, BigNumber, string":function(s,c,l){return o(s,c.toNumber(),s.size(),l)}});function o(f,s,c,l){if(!ue(s))throw new TypeError("Second parameter in function diag must be an integer");var p=s>0?s:0,m=s<0?-s:0;switch(c.length){case 1:return a(f,s,l,c[0],m,p);case 2:return u(f,s,l,c,m,p)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function a(f,s,c,l,p,m){var d=[l+p,l+m];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var h=c==="sparse"?i.diagonal(d,f,s):n.diagonal(d,f,s);return c!==null?h:h.valueOf()}function u(f,s,c,l,p,m){if(pe(f)){var d=f.diagonal(s);return c!==null?c!==d.storage()?r(d,c):d:d.valueOf()}for(var h=Math.min(l[0]-p,l[1]-m),v=[],y=0;y<h;y++)v[y]=f[y+p][y+m];return c!==null?r(v):v}});var el="identity",kg=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],Ca=V(el,kg,e=>{var{typed:t,config:r,matrix:n,BigNumber:i,DenseMatrix:o,SparseMatrix:a}=e;return t(el,{"":function(){return r.matrix==="Matrix"?n([]):[]},string:function(c){return n(c)},"number | BigNumber":function(c){return f(c,c,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,l){return f(c,c,l)},"number | BigNumber, number | BigNumber":function(c,l){return f(c,l,r.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,l,p){return f(c,l,p)},Array:function(c){return u(c)},"Array, string":function(c,l){return u(c,l)},Matrix:function(c){return u(c.valueOf(),c.storage())},"Matrix, string":function(c,l){return u(c.valueOf(),l)}});function u(s,c){switch(s.length){case 0:return c?n(c):[];case 1:return f(s[0],s[0],c);case 2:return f(s[0],s[1],c);default:throw new Error("Vector containing two values expected")}}function f(s,c,l){var p=le(s)||le(c)?i:null;if(le(s)&&(s=s.toNumber()),le(c)&&(c=c.toNumber()),!ue(s)||s<1)throw new Error("Parameters in function identity must be positive integers");if(!ue(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var m=p?new i(1):1,d=p?new p(0):0,h=[s,c];if(l){if(l==="sparse")return a.diagonal(h,m,0,d);if(l==="dense")return o.diagonal(h,m,0,d);throw new TypeError('Unknown matrix type "'.concat(l,'"'))}for(var v=or([],h,d),y=s<c?s:c,A=0;A<y;A++)v[A][A]=m;return v}});function tl(){throw new Error('No "bignumber" implementation available')}function rl(){throw new Error('No "fraction" implementation available')}function nl(){throw new Error('No "matrix" implementation available')}var il="size",qg=["typed","config","?matrix"],ba=V(il,qg,e=>{var{typed:t,config:r,matrix:n}=e;return t(il,{Matrix:function(o){return o.create(o.size(),"number")},Array:me,string:function(o){return r.matrix==="Array"?[o.length]:n([o.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(o){return r.matrix==="Array"?[]:n?n([],"dense","number"):nl()}})});var ol="zeros",Lg=["typed","config","matrix","BigNumber"],Sa=V(ol,Lg,e=>{var{typed:t,config:r,matrix:n,BigNumber:i}=e;return t(ol,{"":function(){return r.matrix==="Array"?o([]):o([],"default")},"...number | BigNumber | string":function(s){var c=s[s.length-1];if(typeof c=="string"){var l=s.pop();return o(s,l)}else return r.matrix==="Array"?o(s):o(s,"default")},Array:o,Matrix:function(s){var c=s.storage();return o(s.valueOf(),c)},"Array | Matrix, string":function(s,c){return o(s.valueOf(),c)}});function o(f,s){var c=a(f),l=c?new i(0):0;if(u(f),s){var p=n(s);return f.length>0?p.resize(f,l):p}else{var m=[];return f.length>0?or(m,f,l):m}}function a(f){var s=!1;return f.forEach(function(c,l,p){le(c)&&(s=!0,p[l]=c.toNumber())}),s}function u(f){f.forEach(function(s){if(typeof s!="number"||!ue(s)||s<0)throw new Error("Parameters in function zeros must be positive integers")})}});var Ug="numeric",$g=["number","?bignumber","?fraction"],Ma=V(Ug,$g,e=>{var{number:t,bignumber:r,fraction:n}=e,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:a=>t(a),BigNumber:r?a=>r(a):tl,bigint:a=>BigInt(a),Fraction:n?a=>n(a):rl};return function(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",s=arguments.length>2?arguments[2]:void 0;if(s!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=st(u);if(!(c in i))throw new TypeError("Cannot convert "+u+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(f in o))throw new TypeError("Cannot convert "+u+' to type "'+f+'"; valid output types are '+Object.keys(o).join(", "));return f===c?u:o[f](u)}});var al="divideScalar",Vg=["typed","numeric"],Na=V(al,Vg,e=>{var{typed:t,numeric:r}=e;return t(al,{"number, number":function(i,o){return i/o},"Complex, Complex":function(i,o){return i.div(o)},"BigNumber, BigNumber":function(i,o){return i.div(o)},"bigint, bigint":function(i,o){return i/o},"Fraction, Fraction":function(i,o){return i.div(o)},"Unit, number | Complex | Fraction | BigNumber | Unit":(n,i)=>n.divide(i),"number | Fraction | Complex | BigNumber, Unit":(n,i)=>i.divideInto(n)})});var ul="add",Hg=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],Ba=V(ul,Hg,e=>{var{typed:t,matrix:r,addScalar:n,equalScalar:i,DenseMatrix:o,SparseMatrix:a,concat:u}=e,f=wi({typed:t}),s=Xc({typed:t,equalScalar:i}),c=Ai({typed:t,DenseMatrix:o}),l=yi({typed:t,matrix:r,concat:u});return t(ul,{"any, any":n,"any, any, ...any":t.referToSelf(p=>(m,d,h)=>{for(var v=p(m,d),y=0;y<h.length;y++)v=p(v,h[y]);return v})},l({elop:n,DS:f,SS:s,Ss:c}))});var sl="dot",Gg=["typed","addScalar","multiplyScalar","conj","size"],Ta=V(sl,Gg,e=>{var{typed:t,addScalar:r,multiplyScalar:n,conj:i,size:o}=e;return t(sl,{"Array | DenseMatrix, Array | DenseMatrix":u,"SparseMatrix, SparseMatrix":f});function a(c,l){var p=s(c),m=s(l),d,h;if(p.length===1)d=p[0];else if(p.length===2&&p[1]===1)d=p[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+p.join(", ")+")");if(m.length===1)h=m[0];else if(m.length===2&&m[1]===1)h=m[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+m.join(", ")+")");if(d!==h)throw new RangeError("Vectors must have equal length ("+d+" != "+h+")");if(d===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return d}function u(c,l){var p=a(c,l),m=pe(c)?c._data:c,d=pe(c)?c._datatype||c.getDataType():void 0,h=pe(l)?l._data:l,v=pe(l)?l._datatype||l.getDataType():void 0,y=s(c).length===2,A=s(l).length===2,g=r,E=n;if(d&&v&&d===v&&typeof d=="string"&&d!=="mixed"){var D=d;g=t.find(r,[D,D]),E=t.find(n,[D,D])}if(!y&&!A){for(var w=E(i(m[0]),h[0]),_=1;_<p;_++)w=g(w,E(i(m[_]),h[_]));return w}if(!y&&A){for(var x=E(i(m[0]),h[0][0]),S=1;S<p;S++)x=g(x,E(i(m[S]),h[S][0]));return x}if(y&&!A){for(var b=E(i(m[0][0]),h[0]),C=1;C<p;C++)b=g(b,E(i(m[C][0]),h[C]));return b}if(y&&A){for(var T=E(i(m[0][0]),h[0][0]),k=1;k<p;k++)T=g(T,E(i(m[k][0]),h[k][0]));return T}}function f(c,l){a(c,l);for(var p=c._index,m=c._values,d=l._index,h=l._values,v=0,y=r,A=n,g=0,E=0;g<p.length&&E<d.length;){var D=p[g],w=d[E];if(D<w){g++;continue}if(D>w){E++;continue}D===w&&(v=y(v,A(m[g],h[E])),g++,E++)}return v}function s(c){return pe(c)?c.size():o(c)}});var fl="det",Zg=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],Ia=V(fl,Zg,e=>{var{typed:t,matrix:r,subtractScalar:n,multiply:i,divideScalar:o,isZero:a,unaryMinus:u}=e;return t(fl,{any:function(c){return xe(c)},"Array | Matrix":function(c){var l;switch(pe(c)?l=c.size():Array.isArray(c)?(c=r(c),l=c.size()):l=[],l.length){case 0:return xe(c);case 1:if(l[0]===1)return xe(c.valueOf()[0]);if(l[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Ce(l)+")");case 2:{var p=l[0],m=l[1];if(p===m)return f(c.clone().valueOf(),p,m);if(m===0)return 1;throw new RangeError("Matrix must be square (size: "+Ce(l)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Ce(l)+")")}}});function f(s,c,l){if(c===1)return xe(s[0][0]);if(c===2)return n(i(s[0][0],s[1][1]),i(s[1][0],s[0][1]));for(var p=!1,m=new Array(c).fill(0).map((_,x)=>x),d=0;d<c;d++){var h=m[d];if(a(s[h][d])){var v=void 0;for(v=d+1;v<c;v++)if(!a(s[m[v]][d])){h=m[v],m[v]=m[d],m[d]=h,p=!p;break}if(v===c)return s[h][d]}for(var y=s[h][d],A=d===0?1:s[m[d-1]][d-1],g=d+1;g<c;g++)for(var E=m[g],D=d+1;D<c;D++)s[E][D]=o(n(i(s[E][D],y),i(s[E][d],s[h][D])),A)}var w=s[m[c-1]][c-1];return p?u(w):w}});var cl="inv",Wg=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],Oa=V(cl,Wg,e=>{var{typed:t,matrix:r,divideScalar:n,addScalar:i,multiply:o,unaryMinus:a,det:u,identity:f,abs:s}=e;return t(cl,{"Array | Matrix":function(p){var m=pe(p)?p.size():me(p);switch(m.length){case 1:if(m[0]===1)return pe(p)?r([n(1,p.valueOf()[0])]):[n(1,p[0])];throw new RangeError("Matrix must be square (size: "+Ce(m)+")");case 2:{var d=m[0],h=m[1];if(d===h)return pe(p)?r(c(p.valueOf(),d,h),p.storage()):c(p,d,h);throw new RangeError("Matrix must be square (size: "+Ce(m)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Ce(m)+")")}},any:function(p){return n(1,p)}});function c(l,p,m){var d,h,v,y,A;if(p===1){if(y=l[0][0],y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(1,y)]]}else if(p===2){var g=u(l);if(g===0)throw Error("Cannot calculate inverse, determinant is zero");return[[n(l[1][1],g),n(a(l[0][1]),g)],[n(a(l[1][0]),g),n(l[0][0],g)]]}else{var E=l.concat();for(d=0;d<p;d++)E[d]=E[d].concat();for(var D=f(p).valueOf(),w=0;w<m;w++){var _=s(E[w][w]),x=w;for(d=w+1;d<p;)s(E[d][w])>_&&(_=s(E[d][w]),x=d),d++;if(_===0)throw Error("Cannot calculate inverse, determinant is zero");d=x,d!==w&&(A=E[w],E[w]=E[d],E[d]=A,A=D[w],D[w]=D[d],D[d]=A);var S=E[w],b=D[w];for(d=0;d<p;d++){var C=E[d],T=D[d];if(d!==w){if(C[w]!==0){for(v=n(a(C[w]),S[w]),h=w;h<m;h++)C[h]=i(C[h],o(v,S[h]));for(h=0;h<m;h++)T[h]=i(T[h],o(v,b[h]))}}else{for(v=S[w],h=w;h<m;h++)C[h]=n(C[h],v);for(h=0;h<m;h++)T[h]=n(T[h],v)}}}return D}}});var Ei=Uo({config:rr}),Xg=Ho({});var ll=Zo({});var za=Wo({});var Mr=ra({Matrix:za});var Ae=Oo({BigNumber:Ei,Complex:Xg,DenseMatrix:Mr,Fraction:ll});var Yg=va({typed:Ae});var Fi=xa({typed:Ae});var Qg=Ea({typed:Ae});var cn=ca({config:rr,typed:Ae});var Kg=na({typed:Ae});var Jg=fa({equalScalar:cn,typed:Ae});var pl=ya({typed:Ae});var jg=pa({typed:Ae});var _i=la({Matrix:za,equalScalar:cn,typed:Ae});var hl=Da({typed:Ae});var e1=ha({BigNumber:Ei,typed:Ae});var Ue=da({DenseMatrix:Mr,Matrix:za,SparseMatrix:_i,typed:Ae});var ml=Sa({BigNumber:Ei,config:rr,matrix:Ue,typed:Ae});var dl=Fa({isInteger:Kg,matrix:Ue,typed:Ae});var Ci=_a({DenseMatrix:Mr,SparseMatrix:_i,matrix:Ue,typed:Ae});var t1=ma({Fraction:ll,typed:Ae}),r1=Ca({BigNumber:Ei,DenseMatrix:Mr,SparseMatrix:_i,config:rr,matrix:Ue,typed:Ae});var n1=Ma({bignumber:e1,fraction:t1,number:jg});var Pa=ba({matrix:Ue,config:rr,typed:Ae});var Ra=ga({typed:Ae});var bi=Ba({DenseMatrix:Mr,SparseMatrix:_i,addScalar:Fi,concat:dl,equalScalar:cn,matrix:Ue,typed:Ae});var gl=Na({numeric:n1,typed:Ae});var vl=Aa({DenseMatrix:Mr,concat:dl,equalScalar:cn,matrix:Ue,subtractScalar:hl,typed:Ae,unaryMinus:Ra});var i1=Ta({addScalar:Fi,conj:Qg,multiplyScalar:pl,size:Pa,typed:Ae});var dt=wa({addScalar:Fi,dot:i1,equalScalar:cn,matrix:Ue,multiplyScalar:pl,typed:Ae});var ka=Ia({divideScalar:gl,isZero:Jg,matrix:Ue,multiply:dt,subtractScalar:hl,typed:Ae,unaryMinus:Ra});var qa=Oa({abs:Yg,addScalar:Fi,det:ka,divideScalar:gl,identity:r1,matrix:Ue,multiply:dt,typed:Ae,unaryMinus:Ra});function Dl(e,t,r,n,i,o,a,u,f,s,c){let l=[o.invert(e.layerX-c.left),a.invert(e.layerY-c.top)],{h_star:p,kn:m}=xl(n,l,r,s.metric_bw),d=xl(n,l,r,s.transformation_bw).kn;d=d.map(g=>g/Xt(d));let h=qa(a1(p)),v=qa(p),y=[],A=Object.values(r).length;for(let g=0;g<A;g++){let E=Ue([r[g][i.x],r[g][i.y]]),D=bi(dt(h,vl(E,l)),l),w=bi(dt(d[g],D),dt(1-d[g],E)),_=dt(v,Ue(n[g])),{q:x,v:S}=(0,Si.SVD)(_._data),b=[d[g]*x[0]+(1-d[g])*r[g].s0,d[g]*x[1]+(1-d[g])*r[g].s1],C=[d[g]*S[0][0]+(1-d[g])*r[g].x0,d[g]*S[0][1]+(1-d[g])*r[g].y0];y.push({[i.x]:w._data[0],[i.y]:w._data[1],s0:b[0],s1:b[1],x0:C[0],y0:C[1],new_angle:f1(C[0],C[1]),kernel_transform:d[g],kernel_metric:m[g]/Xt(m),color:r[g][i.color],_id:r[g]._id})}for(let g in s.otherClasses)t.select(`.${s.otherClasses[g]}`).selectAll("*").data(y,E=>E._id).attr("cx",E=>o(E[i.x])).attr("cy",E=>a(E[i.y])).attr("rx",E=>u(E[i.a])).attr("ry",E=>u(E[i.b])).attr("transform",E=>`rotate(${E.new_angle} ${o(E[i.x])} ${a(E[i.y])})`),i.color!==null&&t.select(`.${s.otherClasses[g]}`).selectAll("*").attr("fill",E=>f(E[i.color]??E.color));t.select(".isometry-links").selectAll("line").data(y,g=>g._id).attr("x1",g=>o(g[i.x])).attr("y1",g=>a(g[i.y]))}function o1(e,t,r){let n=[];for(let o=0;o<Object.values(t).length;o++){let a=[t[o].embedding_0,t[o].embedding_1];n.push(s1(e,a,r))}let i=xn(n);return n.map(o=>o/i)}function xl(e,t,r,n){let i=Object.values(e).length,o=Ue(e[0]),a=ml(Pa(o)),u=o1(t,r,n);for(let s=0;s<i;s++)a=bi(a,dt(u[s],Ue(e[s])));let{q:f}=(0,Si.SVD)(a._data);return{h_star:a,sv:f,kn:u}}function a1(e){let t=(0,Si.SVD)(e._data),{v:r,q:n}=u1(t);return dt(Ue(r),Ci(n.map(i=>Math.sqrt(i))))}function u1(e){let t=Ue(e.v),r=e.q;if(Math.abs(t._data[0][0])<Math.abs(t._data[0][1])){let n=Ue([[0,1],[1,0]]);t=dt(t,n),r=[r[1],r[0]]}return ka(t)<0&&(t=dt(t,Ci([1,-1]))),t._data[0][0]<0&&(t=dt(t,Ci([-1,-1]))),{v:t,q:r}}function s1(e,t,r=1){let n=Math.sqrt((e[0]-t[0])**2+(e[1]-t[1])**2),i=Math.exp(-r*n);return isNaN(i)?0:i}function f1(e,t){return Math.atan(t/e)*(180/Math.PI)+90}var ln=class{constructor(t,r){let i={...{width:700,height:350,margin:{top:40,right:90,bottom:60,left:90},labelFontSize:14},...r},o=Ui("svg").attr("width",i.width).attr("height",i.height);t.appendChild(o.node()),this.svg=rt(t).select("svg"),this.width=+this.svg.attr("width"),this.height=+this.svg.attr("height"),this.margin=i.margin,this.plotWidth=this.width-this.margin.left-this.margin.right,this.plotHeight=this.height-this.margin.top-this.margin.bottom,this.labelFontSize=i.labelFontSize,this.g=this.svg.append("g").attr("transform",`translate(${this.margin.left},${this.margin.top})`),this.xScale=pt().range([0,this.plotWidth]),this.yScale=pt().range([this.plotHeight,0]),this.rScale=pt(),this.colorScale=qt(Jn),this.dataset=null,this.layers=[],this.title="",this.xLabel="",this.yLabel=""}data(t){if(this.dataset=t,Object.keys(t[0]).indexOf("_id")==-1)for(let r=0;r<t.length;r++)t[r]._id=r;return this}mapping(t){if(this.mappingObj=t,this.dataset&&this.mappingObj){this.xScale.domain(zt(this.dataset,n=>+n[this.mappingObj.x])).nice(),this.yScale.domain(zt(this.dataset,n=>+n[this.mappingObj.y])).nice();let r=this.dataset.map(n=>[+n[this.mappingObj.a],+n[this.mappingObj.b]]);if(this.rScale.domain(zt([].concat.apply([],r))).nice(),["kernel_transform","kernel_metric"].includes(this.mappingObj.color))this.colorScale=pt().domain([0,1]).range(["white","black"]);else if(typeof this.dataset[0][this.mappingObj.color]=="string"){let n=[...new Set(this.dataset.map(i=>i[this.mappingObj.color]))];this.colorScale.domain(n)}else{let n=zt(this.dataset.map(i=>i[this.mappingObj.color]));this.colorScale=pt().domain(n)}}return this}geomEllipse(t={}){let n={...{radiusMax:25,radiusMin:3,color:null,opacity:1,className:"ellipse"},...t};return this.layers.push({type:"ellipse",options:n,render:()=>{this.rScale.range([n.radiusMin,n.radiusMax]),this.g.append("g").attr("class",n.className).selectAll("ellipse").data(this.dataset,i=>i._id).enter().append("ellipse").attr("cx",i=>this.xScale(i[this.mappingObj.x])).attr("cy",i=>this.yScale(i[this.mappingObj.y])).attr("rx",i=>this.rScale(i[this.mappingObj.a])).attr("ry",i=>this.rScale(i[this.mappingObj.b])).attr("transform",i=>`rotate(${i[this.mappingObj.angle]} ${this.xScale(i[this.mappingObj.x])} ${this.yScale(i[this.mappingObj.y])})`).attr("fill",i=>this.mappingObj.color?this.colorScale(i[this.mappingObj.color]):n.color||"#0c0c0c").attr("opacity",n.opacity)}}),this}geomHair(t={}){let n={...{className:"hair",color:null,radiusMax:25,radiusMin:.1,opacity:1,strokeWidth:1},...t};return this.layers.push({type:"hair",options:n,render:()=>{if(this.rScale.range([n.radiusMin,n.radiusMax]),this.mappingObj.color){let i=[...new Set(this.dataset.map(o=>o[n.color]))];this.colorScale.domain(i)}this.g.append("g").attr("class",n.className).selectAll("rect").data(this.dataset).enter().append("rect").attr("class",n.className).attr("x",i=>{let o=this.xScale(+i[this.mappingObj.x]),a=this.rScale(+i[this.mappingObj.a]);return o-a}).attr("y",i=>this.yScale(+i[this.mappingObj.y])-n.strokeWidth/2).attr("width",i=>2*this.rScale(+i[this.mappingObj.a])).attr("height",n.strokeWidth).attr("transform",i=>{let o=this.xScale(+i[this.mappingObj.x]),a=this.yScale(+i[this.mappingObj.y]);return`rotate(${+i[this.mappingObj.angle]} ${o} ${a})`}).attr("fill",i=>this.mappingObj.color?this.colorScale(i[this.mappingObj.color]):n.color||"#0c0c0c").attr("opacity",n.opacity)}}),this}scaleColor(t={}){let n={...{scheme:Jn,className:null,padding:20,x_offset:20,y_offset:0,size:14,legendTextSize:14,titleOffset:15,labelOffset:20},...t};return this.layers.push({type:"scale_color",options:n,render:()=>{if(["kernel_transform","kernel_metric"].includes(this.mappingObj.color))this.colorScale=pt().domain([0,1]).range(["white","black"]);else if(typeof this.dataset[0][this.mappingObj.color]=="string"){let a=[...new Set(this.dataset.map(u=>u[this.mappingObj.color]))];this.colorScale=qt(a,n.scheme)}else{let a=zt(this.dataset.map(u=>u[this.mappingObj.color]));this.colorScale=pt(a,[n.scheme[0],n.scheme[1]])}let i=n.className||this.layers[0].options.className;this.svg.select(`.${i}`).selectAll("*").attr("fill",a=>this.colorScale(a[this.mappingObj.color])),this.svg.select(`.${i}-background`).selectAll("*").attr("fill",a=>this.colorScale(a[this.mappingObj.color]));let o=yl.legendColor().shapePadding(n.padding).shapeHeight(n.size).shapeWidth(n.size).title(this.mappingObj.color).scale(this.colorScale);this.g.append("g").attr("class","legend").attr("id","colorScale").attr("transform",`translate(${this.plotWidth+n.x_offset}, ${n.y_offset})`).call(o),this.g.selectAll("#colorScale .label").attr("font-size",n.legendTextSize).attr("transform",`translate(${n.labelOffset}, ${.75*n.size})`),this.g.select("#colorScale .legendTitle").attr("transform",`translate(0, -${n.titleOffset})`).attr("font-size",n.legendTextSize)}}),this}scaleSize(t={}){let n={...{nCells:4,shapePadding:20,labelOffset:20,yOffset:100,legendTextSize:14,xOffset:20,titleOffset:20,symbolColor:"#a8a8a8"},...t};this.layers.push({type:"scale_size",options:n,render:()=>{let i=yl.legendSize().scale(this.rScale).shape("circle").shapePadding(n.shapePadding).labelOffset(n.labelOffset).orient("vertical").title("\u03BB(H\u2099)").cells(n.nCells);this.g.append("g").attr("class","legend").attr("id","sizeScale").attr("transform",`translate(${this.plotWidth+n.xOffset}, ${n.yOffset})`).call(i),this.g.selectAll("#sizeScale .legendCells circle").attr("fill",n.symbolColor),this.g.selectAll("#sizeScale .label").attr("font-size",n.legendTextSize),this.g.select("#sizeScale .legendTitle").attr("transform",`translate(0, -${n.titleOffset})`).attr("font-size",n.legendTextSize)}})}labs(t={}){return this.layers.push(uf(this.svg,t,this.width,this.height,this.margin)),this}geomEdgeLink(t={}){let n={...{"stroke-width":1,stroke:"#363E59",opacity:1,className:"edge_link"},...t},i=t.N,o=jn(i,this.dataset,this.mappingObj);this.layers.push({type:"edge_link",options:n,render:()=>{this.g.select(`.${n.className}`).selectAll("line").data(o,a=>a._id).enter().insert("line").attr("class",n.className).attr("x1",a=>this.xScale(a.x1)).attr("y1",a=>this.yScale(a.y1)).attr("x2",a=>this.xScale(a.x2)).attr("y2",a=>this.yScale(a.y2)).attr("stroke-width",n["stroke-width"]).attr("stroke",n.stroke).attr("opacity",n.opacity)}})}interEdgeLink(t={}){let n={...{strokeWidth:1,backgroundOpacity:.2,className:"inter_edge_link",opacity:1,otherClasses:["ellipse"],stroke:"#363E59",highlightColor:"#363E59",highlightStrokeWidth:1.5,threshold:1},...t},i=t.N;this.layers.push({type:"inter_edge_link",options:n,render:()=>{this.g.insert("g").attr("class",n.className);for(let a in n.otherClasses)this.g.select(`.${n.otherClasses[a]}`).selectAll("ellipse").attr("stroke",u=>Object.keys(i).indexOf(u._id.toString())==-1?"white":n.highlightColor).attr("stroke-width",u=>Object.keys(i).indexOf(u._id.toString())==-1?0:n.highlightStrokeWidth);let o=!1;this.svg.on("mousemove",a=>{o||ff(a,this.g,i,this.dataset,this.mappingObj,this.xScale,this.yScale,n,this.margin)}),this.svg.on("dblclick",()=>{o=!o})}})}interIsometry(t={}){let n={...{backgroundOpacity:.2,className:"inter_isometry",magnify:1,metric_bw:10,stroke:"#a5a5a5",strokeWidth:1.5,otherClasses:["ellipse"],transformation_bw:2},...t};this.layers.push({type:"inter_isometry",options:n,render:()=>{let i=t.metrics;this.g.append("g").lower().attr("class","isometry-links").selectAll("line").data(this.dataset,a=>a._id).enter().append("line").attr("x1",a=>this.xScale(a[this.mappingObj.x])).attr("y1",a=>this.yScale(a[this.mappingObj.y])).attr("x2",a=>this.xScale(a[this.mappingObj.x])).attr("y2",a=>this.yScale(a[this.mappingObj.y])).attr("stroke",n.stroke).attr("stroke-width",n.strokeWidth);for(let a in n.otherClasses)this.g.select(`.${n.otherClasses[a]}`).clone(!0).lower().attr("opacity",n.backgroundOpacity).attr("class",`${n.otherClasses[a]}-background`).selectAll("*").data(this.dataset);let o=!1;this.svg.on("mousemove",a=>{o||Dl(a,this.g,this.dataset,i,this.mappingObj,this.xScale,this.yScale,this.rScale,this.colorScale,n,this.margin)}),this.svg.on("dblclick",()=>{o=!o})}})}interBoxplot(t,r,n={}){let o={...{backgroundOpacity:.2,className:"inter_boxplot",fill:"#bcbcbc",highlightColor:"#363E59",highlightStrokeWidth:1.5,legendOffset:60,opacity:1,otherClasses:["ellipse"],outlierRadius:2,relHeight:.3,relPanelMargin:.05,relWidth:.75,stroke:"#262626",strokeWidth:1},...n},a=r.map(u=>u.value).concat(t.map(u=>u.q1)).concat(t.map(u=>u.q3));this.xScale.range([0,this.plotWidth*(o.relWidth-o.relPanelMargin)]),this.xBoxScale=en().domain([...new Set(t.map(u=>u.bin))]).range([o.relWidth*this.plotWidth,this.plotWidth]),this.yBoxScale=pt().domain([0,Xt(a)]).range([o.relHeight*this.plotHeight,0]),this.layers.push({type:"inter_isometry",options:o,render:()=>{this.g.select(".legend").attr("transform",`translate(${o.relWidth*this.plotWidth}, ${o.relHeight*this.plotHeight+o.legendOffset})`),this.opts=o,sf(this,t,r)}})}render(){let t=Or(this.xScale),r=zr(this.yScale);return this.g.append("g").attr("class","x-axis").attr("transform",`translate(0, ${this.plotHeight})`).call(t.tickFormat("").tickSize(0)).selectAll(".tick text").attr("font-size",this.labelFontSize),this.g.append("g").attr("class","y-axis").call(r.tickFormat("").tickSize(0)).selectAll(".tick text").attr("font-size",this.labelFontSize),this.layers.forEach(n=>n.render()),this}};import*as Al from"https://esm.sh/d3@7";function wl(e){return e.includes("geom")?1:e.includes("scale")?2:e.includes("inter")?3:2}function c1(e,t){let r=wl(e.type),n=wl(t.type);return r!=n?r-n:0}function l1({model:e,el:t}){let r=new ln(t,e.get("options")).data(e.get("dataset")).mapping(e.get("_mapping")),n=e.get("layers");Object.keys(r.mappingObj).some(i=>i==="color")&&!n.some(i=>i.type==="scale_color")&&n.push({type:"scale_color",options:{}}),n.sort(c1),n.forEach(i=>p1(r,i,e)),r.render(),e.on("msg:custom",i=>{if(i.type==="save"){let o=Al.select(t).select("svg"),a=new XMLSerializer().serializeToString(o.node());e.set("elem_svg",a),e.save_changes()}})}function p1(e,t,r){switch(t.type){case"geom_ellipse":e.geomEllipse(t.options);break;case"geom_hair":e.geomHair(t.options);break;case"geom_edge_link":e.geomEdgeLink(t.options);break;case"inter_edge_link":e.interEdgeLink(t.options);break;case"inter_isometry":e.interIsometry(t.options);break;case"inter_boxplot":e.interBoxplot(r.get("distance_summaries"),r.get("outliers"),t.options);break;case"scale_color":e.scaleColor(t.options);break;case"scale_size":e.scaleSize(t.options);break;case"labs":e.labs(t.options);break}}var t5={render:l1};export{t5 as default};
/*! Bundled license information:

decimal.js/decimal.mjs:
  (*!
   *  decimal.js v10.6.0
   *  An arbitrary-precision Decimal type for JavaScript.
   *  https://github.com/MikeMcl/decimal.js
   *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
   *  MIT Licence
   *)
*/
